!function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t){"use strict";t("setimmediate");var e=t("./CanvasController");document.addEventListener("DOMContentLoaded",function(){var t=new e;document.body.appendChild(t.element)})},{"./CanvasController":5,setimmediate:3}],2:[function(t,e){function n(){if(!s){s=!0;for(var t,e=o.length;e;){t=o,o=[];for(var n=-1;++n<e;)t[n]();e=o.length}s=!1}}function i(){}var r=e.exports={},o=[],s=!1;r.nextTick=function(t){o.push(t),s||setTimeout(n,0)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=i,r.addListener=i,r.once=i,r.off=i,r.removeListener=i,r.removeAllListeners=i,r.emit=i,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],3:[function(t){(function(t){!function(e,n){"use strict";function i(t){return m[l]=r.apply(n,t),l++}function r(t){var e=[].slice.call(arguments,1);return function(){"function"==typeof t?t.apply(n,e):new Function(""+t)()}}function o(t){if(y)setTimeout(r(o,t),0);else{var e=m[t];if(e){y=!0;try{e()}finally{s(t),y=!1}}}}function s(t){delete m[t]}function a(){p=function(){var e=i(arguments);return t.nextTick(r(o,e)),e}}function h(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function u(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),p=function(){var n=i(arguments);return e.postMessage(t+n,"*"),n}}function c(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;o(e)},p=function(){var e=i(arguments);return t.port2.postMessage(e),e}}function f(){var t=x.documentElement;p=function(){var e=i(arguments),n=x.createElement("script");return n.onreadystatechange=function(){o(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n),e}}function d(){p=function(){var t=i(arguments);return setTimeout(r(o,t),0),t}}if(!e.setImmediate){var p,l=1,m={},y=!1,x=e.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(e);v=v&&v.setTimeout?v:e,"[object process]"==={}.toString.call(e.process)?a():h()?u():e.MessageChannel?c():x&&"onreadystatechange"in x.createElement("script")?f():d(),v.setImmediate=p,v.clearImmediate=s}}(new Function("return this")())}).call(this,t("_process"))},{_process:2}],4:[function(t,e){"use strict";var n=function(){function t(t){this.color=t}return Object.defineProperty(t.prototype,"isOpaque",{get:function(){return 0!==this.color.a},enumerable:!0,configurable:!0}),t}();e.exports=n},{}],5:[function(t,e){"use strict";function n(t){return new s(t.clientX,t.clientY)}var i,r=t("./Renderer"),o=t("./Stroke"),s=t("./Point"),a=t("./Color"),h=t("./Transform"),u=t("./Background");!function(t){t[t.None=0]="None",t[t.Pressed=1]="Pressed",t[t.Pinching=2]="Pinching"}(i||(i={}));var c=function(){function t(){this.interactionState=0,this.transform=h.identity(),this.initialTransform=h.identity(),this.isStroking=!1,this.strokeWidth=4,this.strokeColor=new a(0,0,0,1),this.renderer=new r({tiled:!1,background:new u(new a(255,255,255,1))}),this.currentStrokeRenderer=new r({tiled:!0,background:new u(new a(0,0,0,0))});var t=this.element=document.createElement("div");t.className="canvas-area",t.appendChild(this.renderer.element),t.appendChild(this.currentStrokeRenderer.element),t.addEventListener("mousemove",this.onMouseMove.bind(this)),t.addEventListener("mousedown",this.onMouseDown.bind(this)),t.addEventListener("mouseup",this.onMouseUp.bind(this)),t.addEventListener("touchmove",this.onTouchMove.bind(this)),t.addEventListener("touchstart",this.onTouchStart.bind(this)),t.addEventListener("touchend",this.onTouchEnd.bind(this)),t.addEventListener("wheel",this.onWheel.bind(this))}return t.prototype.pinchStart=function(t){var e=this;this.interactionState=2,this.pinchStartPoints=t,this.initialTransform=this.transform,requestAnimationFrame(function(){e.currentStrokeRenderer.clear()})},t.prototype.pinchMove=function(t){2!==this.interactionState&&this.pinchStart(t);var e=t[0].sub(t[1]).length/this.pinchStartPoints[0].sub(this.pinchStartPoints[1]).length,n=this.pinchStartPoints[0].add(this.pinchStartPoints[1]).mul(.5),i=t[0].add(t[1]).mul(.5),r=i.sub(n.mul(e)),o=h.scale(e).merge(h.translation(r)),o=this.initialTransform.merge(o);this.updateTransform(o),this.renderer.update()},t.prototype.pinchEnd=function(){this.interactionState=0},t.prototype.pressStart=function(t){this.interactionState=1,t=t.transform(this.transform.invert());var e=this.currentStroke=new o;e.width=this.strokeWidth,e.color=this.strokeColor,e.addPoint(t),this.currentStrokeRenderer.strokes=[e];var n=this.currentStrokeRenderer;n.addDirtyRect(e.lastCurveBoundingRect),n.updateLater(setImmediate.bind(window))},t.prototype.pressMove=function(t){if(1===this.interactionState){t=t.transform(this.transform.invert());var e=this.currentStroke,n=this.currentStrokeRenderer;n.addDirtyRect(e.lastCurveBoundingRect),e.addPoint(t),n.addDirtyRect(e.lastCurveBoundingRect),n.updateLater(setImmediate.bind(window))}},t.prototype.pressEnd=function(){var t=this;1===this.interactionState&&(this.renderer.strokes.push(this.currentStroke),requestAnimationFrame(function(){t.renderer.addDirtyRect(t.currentStroke.boundingRect),t.renderer.drawOther(t.currentStrokeRenderer),t.currentStrokeRenderer.strokes=[],t.currentStrokeRenderer.clear(),t.currentStrokeRenderer.tiles.forEach(function(t){t.isBlank=!0})}),this.interactionState=0)},t.prototype.updateTransform=function(t){this.transform=t,this.renderer.transform=t,this.currentStrokeRenderer.transform=t},t.prototype.onMouseMove=function(t){this.pressMove(new s(t.clientX,t.clientY))},t.prototype.onMouseDown=function(t){this.pressStart(new s(t.clientX,t.clientY))},t.prototype.onMouseUp=function(){this.pressEnd()},t.prototype.onTouchMove=function(t){if(1===t.touches.length){var e=t.touches[0];this.pressMove(n(e))}else 2===t.touches.length&&this.pinchMove([0,1].map(function(e){return n(t.touches[e])}));t.preventDefault()},t.prototype.onTouchStart=function(t){if(1===t.touches.length){var e=t.touches[0];this.pressStart(n(e))}else 2===t.touches.length&&this.pinchStart([0,1].map(function(e){return n(t.touches[e])}));t.preventDefault()},t.prototype.onTouchEnd=function(t){this.pressEnd(),this.pinchEnd(),t.preventDefault()},t.prototype.onWheel=function(t){var e=this.transform.translate(new s(-t.deltaX,-t.deltaY));this.updateTransform(e),this.renderer.update(),t.preventDefault()},t}();e.exports=c},{"./Background":4,"./Color":6,"./Point":8,"./Renderer":10,"./Stroke":12,"./Transform":13}],6:[function(t,e){"use strict";var n=function(){function t(t,e,n,i){this.r=t,this.g=e,this.b=n,this.a=i}return t.prototype.toString=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},t}();e.exports=n},{}],7:[function(t,e){"use strict";var n=t("./Point"),i=t("./Rect"),r=t("./vendor/bezier"),o=function(){function t(t,e,n,i){this.start=t,this.control1=e,this.control2=n,this.end=i,this.boundingRect=this.calcBoundingRect()}return t.prototype.calcBoundingRect=function(){var t=new r([this.start,this.control1,this.control2,this.end]),e=t.bbox();return new i(new n(e.x.min,e.y.min),new n(e.x.max,e.y.max))},t.catmullRom=function(e,n,i,r){return new t(n,n.add(i.sub(e).div(6)),i.sub(r.sub(n).div(6)),i)},t.bSpline=function(e,n,i,r){return new t(e.add(n.mul(4)).add(i).div(6),n.mul(2).add(i).div(3),i.mul(2).add(n).div(3),r.add(i.mul(4)).add(n).div(6))},t}();e.exports=o},{"./Point":8,"./Rect":9,"./vendor/bezier":14}],8:[function(t,e){"use strict";var n=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.sub=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.mul=function(e){return new t(this.x*e,this.y*e)},t.prototype.div=function(e){return new t(this.x/e,this.y/e)},t.prototype.negate=function(){return new t(-this.x,-this.y)},Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t.prototype.ceil=function(){return new t(Math.ceil(this.x),Math.ceil(this.y))},t.prototype.transform=function(e){var n=e.m11*this.x+e.m21*this.y+e.dx,i=e.m12*this.x+e.m22*this.y+e.dy;return new t(n,i)},t.prototype.toString=function(){return"Point("+this.x+","+this.y+")"},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t}();e.exports=n},{}],9:[function(t,e){"use strict";var n=t("./Point"),i=function(){function t(t,e){this.min=t,this.max=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this.min.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.min.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.max.x-this.min.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.max.y-this.min.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.max.x<this.min.x||this.max.y<this.min.y},enumerable:!0,configurable:!0}),t.prototype.union=function(e){if(this.isEmpty)return e;if(e.isEmpty)return this;var i=new n(Math.min(this.min.x,e.min.x),Math.min(this.min.y,e.min.y)),r=new n(Math.max(this.max.x,e.max.x),Math.max(this.max.y,e.max.y));return new t(i,r)},t.prototype.intersection=function(e){if(this.isEmpty||e.isEmpty)return t.empty;var i=new n(Math.max(this.min.x,e.min.x),Math.max(this.min.y,e.min.y)),r=new n(Math.min(this.max.x,e.max.x),Math.min(this.max.y,e.max.y));return new t(i,r)},t.prototype.outset=function(e){var i=new n(e,e);return new t(this.min.sub(i),this.max.add(i))},t.prototype.translate=function(e){return new t(this.min.add(e),this.max.add(e))},t.prototype.transform=function(e){var n=this.min.transform(e),i=this.max.transform(e);return t.fromPoints(n,i)},t.prototype.boundingIntegerRect=function(){return new t(this.min.floor(),this.max.ceil())},t.prototype.toString=function(){return"Rect("+this.min+","+this.max+")"},t.prototype.equals=function(t){return this.min.equals(t.min)&&this.max.equals(t.max)},t.fromPoints=function(e,i){var r=new n(Math.min(e.x,i.x),Math.min(e.y,i.y)),o=new n(Math.max(e.x,i.x),Math.max(e.y,i.y));return new t(r,o)},t.fromMetrics=function(e,i,r,o){return new t(new n(e,i),new n(e+r,i+o))},Object.defineProperty(t,"empty",{get:function(){return new t(new n(0,0),new n(-1,-1))},enumerable:!0,configurable:!0}),t}();e.exports=i},{"./Point":8}],10:[function(t,e){"use strict";var n=t("./Point"),i=t("./Rect"),r=t("./Transform"),o=t("./RendererTile"),s=128,a=function(){function t(t){this.isTiled=!0,this.element=document.createElement("div"),this.tiles=[],this.strokes=[],this.isRenderQueued=!1,this.devicePixelRatio=1,this.width=0,this.height=0,this.dirtyRect=i.empty,this._transform=r.identity(),this.transformToPixel=r.identity(),this.isTiled=t.tiled,this.background=t.background,this.element.className="canvas-area__renderer",window.addEventListener("resize",this.onResize.bind(this)),this.onResize()}return Object.defineProperty(t.prototype,"transform",{get:function(){return this._transform},set:function(t){this._transform=t,this.transformToPixel=t.scale(this.devicePixelRatio),this.dirtyWhole(),this.updateTileTransforms()},enumerable:!0,configurable:!0}),t.prototype.add=function(t){this.strokes.push(t)},t.prototype.addDirtyRect=function(t){this.dirtyRect=this.dirtyRect.union(t.transform(this.transformToPixel).boundingIntegerRect())},t.prototype.dirtyWhole=function(){this.dirtyRect=i.fromMetrics(0,0,this.width*this.devicePixelRatio,this.height*this.devicePixelRatio)},t.prototype.updateLater=function(t){var e=this;void 0===t&&(t=requestAnimationFrame.bind(window)),this.isRenderQueued||(this.isRenderQueued=!0,t(function(){e.update(),e.isRenderQueued=!1}))},t.prototype.update=function(){this.beginRendering(),this.render()},t.prototype.clear=function(){this.tiles.forEach(function(t){t.clear()})},t.prototype.beginRendering=function(t){var e=this;void 0===t&&(t=!0),this.tiles.forEach(function(n){n.beginRendering(e.dirtyRect,t)}),this.dirtyRect=i.empty},t.prototype.drawOther=function(t){this.beginRendering(!1),this.tiles.forEach(function(e){t.tiles.forEach(function(t){e.drawOther(t)})})},t.prototype.render=function(){var t=this;this.tiles.forEach(function(e){t.strokes.forEach(function(t){e.drawStroke(t)})})},t.prototype.updateTileTransforms=function(){var t=this;this.tiles.forEach(function(e){e.setRendererTransform(t.transformToPixel)})},t.prototype.onResize=function(){var t=this.width=window.innerWidth,e=this.height=window.innerHeight,n=this.devicePixelRatio=window.devicePixelRatio||1;this.transformToPixel=this.transform.scale(n),console.log("resized to "+t+" * "+e+", pixel ratio "+n),this.rebuildTiles(),this.update()},t.prototype.rebuildTiles=function(){var t,e=this,r=this.devicePixelRatio,a=this.width*r,h=this.height*r;if(this.isTiled){var r=this.devicePixelRatio;for(t=Math.floor(s/r)*r;Math.floor(t)!==t;)t-=r}else t=Math.max(a,h);var u=Math.ceil(a/t),c=Math.ceil(h/t);this.tiles.forEach(function(t){e.element.removeChild(t.element)}),this.tiles=[];for(var f=0;c>f;++f){var d;f===c-1?(d=h%t,0===d&&(d=t)):d=t;for(var p=0;u>p;++p){var l;p===u-1?(l=a%t,0===l&&(l=t)):l=t;var m=new n(p,f).mul(t),y=m.add(new n(l,d)),x=new o(new i(m,y),this.background);this.tiles.push(x),this.element.appendChild(x.element)}}this.updateTileTransforms(),this.update()},t}();e.exports=a},{"./Point":8,"./Rect":9,"./RendererTile":11,"./Transform":13}],11:[function(t,e){"use strict";var n=t("./Rect"),i=t("./Transform"),r=function(){function t(t,e){this.rect=n.empty,this.rendererTransform=i.identity(),this.transform=i.identity(),this.isBlank=!0,this.renderingRect=n.empty,this.rect=t,this.background=e;var r=this.element=document.createElement("canvas");r.width=t.width,r.height=t.height;var o=window.devicePixelRatio||0;r.className="canvas-area__renderer-tile";var s=r.style;s.left=""+t.x/o+"px",s.top=""+t.y/o+"px",s.width=""+t.width/o+"px",s.height=""+t.height/o+"px",s.opacity="0",this.context=r.getContext("2d",{alpha:!e.isOpaque}),this.context.save(),e.isOpaque&&(this.isBlank=!1,this.clear())}return t.prototype._clearRect=function(t){this.background.isOpaque?(this.context.restore(),this.context.save(),this.context.fillStyle=this.background.color.toString(),this.context.fillRect(t.x,t.y,t.width,t.height)):this.context.clearRect(t.x,t.y,t.width,t.height)},t.prototype.setRendererTransform=function(t){this.rendererTransform=t,this.transform=t.translate(this.rect.min.negate())},t.prototype.clear=function(){this.isBlank||(this.context.restore(),this.context.save(),this._clearRect(n.fromMetrics(0,0,this.rect.width,this.rect.height)),this.element.style.opacity="0",this.isBlank=!0)},t.prototype.activate=function(){this.element.style.opacity="1",this.isBlank=!1},t.prototype.beginRendering=function(t,e){void 0===e&&(e=!0);var i=this.rect.intersection(t);if(i.isEmpty)return void(this.renderingRect=n.empty);var r=this.renderingRect=i.translate(this.rect.min.negate()),o=this.context;o.restore(),o.save(),!this.isBlank&&e&&(this._clearRect(r),i.equals(this.rect)&&(this.isBlank=!0)),o.beginPath(),o.rect(r.x,r.y,r.width,r.height),o.closePath(),o.clip()},t.prototype.drawOther=function(t){if(!t.isBlank){this.activate();var e=this.context;e.setTransform(1,0,0,1,0,0);var n=t.rect.min.sub(this.rect.min);e.drawImage(t.element,n.x,n.y)}},t.prototype.drawStroke=function(t){if(!this.renderingRect.isEmpty){var e=t.boundingRect.transform(this.rendererTransform);if(!this.rect.intersection(e).isEmpty){this.activate();var n=t.points.length;if(0!==n){var i=this.context;i.globalCompositeOperation=t.composition,i.lineCap="round",i.lineJoin="round";var r=this.transform;i.setTransform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy);var o=t.points[0];1===n&&(i.fillStyle=t.color.toString(),i.beginPath(),i.arc(o.x,o.y,t.width/2,0,2*Math.PI),i.fill()),n>1&&(i.lineWidth=t.width,i.strokeStyle=t.color.toString(),i.beginPath(),i.moveTo(o.x,o.y),t.curves.forEach(function(t){i.bezierCurveTo(t.control1.x,t.control1.y,t.control2.x,t.control2.y,t.end.x,t.end.y)}),i.stroke())}}}},t}();e.exports=r},{"./Rect":9,"./Transform":13}],12:[function(t,e){"use strict";var n=t("./Point"),i=t("./Curve"),r=t("./Color"),o=t("./Rect"),s=function(){function t(){this.points=[],this.color=new r(0,0,0,1),this.composition="source-over",this.width=1,this.curves=[],this.finalizedBoundingRect=o.empty,this.lastCurveBoundingRect=o.empty}return Object.defineProperty(t.prototype,"boundingRect",{get:function(){return this.finalizedBoundingRect.union(this.lastCurveBoundingRect)},enumerable:!0,configurable:!0}),t.prototype.addPoint=function(t){this.points.push(t);var e=this.points.length;if(1===e){var i=.5*this.width,r=new o(t.sub(new n(i,i)),t.add(new n(i,i)));this.finalizedBoundingRect=this.lastCurveBoundingRect=r}else{if(e>=3){var s=this.curves[e-3]=this.curveAt(e-3),r=s.boundingRect.outset(.5*this.width);this.finalizedBoundingRect=this.finalizedBoundingRect.union(r)}if(e>=2){var s=this.curveAt(e-2);this.curves.push(s),this.lastCurveBoundingRect=s.boundingRect.outset(.5*this.width)}}},t.prototype.curveAt=function(t){var e=this.points[t-1],n=this.points[t],r=this.points[t+1],o=this.points[t+2];return i.bSpline(e||n,n,r,o||r)},t}();e.exports=s},{"./Color":6,"./Curve":7,"./Point":8,"./Rect":9}],13:[function(t,e){"use strict";var n=function(){function t(t,e,n,i,r,o){this.m11=t,this.m12=e,this.m21=n,this.m22=i,this.dx=r,this.dy=o}return t.prototype.merge=function(e){var n=e.m11*this.m11+e.m21*this.m12,i=e.m11*this.m21+e.m21*this.m22,r=e.m12*this.m11+e.m22*this.m12,o=e.m12*this.m21+e.m22*this.m22,s=e.m11*this.dx+e.m21*this.dy+e.dx,a=e.m12*this.dx+e.m22*this.dy+e.dy;return new t(n,i,r,o,s,a)},t.prototype.invert=function(){var e=this.m11*this.m22-this.m12*this.m21,n=this.m22/e,i=-this.m12/e,r=-this.m21/e,o=this.m11/e,s=-(n*this.dx+r*this.dy),a=-(i*this.dx+o*this.dy);return new t(n,i,r,o,s,a)},t.prototype.translate=function(e){return new t(this.m11,this.m12,this.m21,this.m22,this.dx+e.x,this.dy+e.y)},t.prototype.scale=function(e){return new t(this.m11*e,this.m12*e,this.m21*e,this.m22*e,this.dx*e,this.dy*e)},t.identity=function(){return new t(1,0,0,1,0,0)},t.scale=function(e){return new t(e,0,0,e,0,0)},t.translation=function(e){return new t(1,0,0,1,e.x,e.y)},t}();e.exports=n},{}],14:[function(e,n){!function(){"use strict";var e=Math.abs,i=Math.min,r=Math.max,o=Math.cos,s=Math.sin,a=Math.acos,h=(Math.asin,Math.atan2),u=Math.sqrt,c=function(t){return 0>t?-Math.pow(-t,1/3):Math.pow(t,1/3)},f=Math.PI,d=2*f,p={x:0,y:0,z:0},l={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(t,e,n){var i=n(e);return i=i.x*i.x+i.y*i.y,"undefined"!=typeof i.z&&(i+=i.z*i.z),u(i)},length:function(t,e){var n,i,r=.5,o=0,s=this.Tvalues.length;for(n=0;s>n;n++)i=r*this.Tvalues[n]+r,o+=this.Cvalues[n]*this.arcfn(t,i,e);return r*o},map:function(t,e,n,i,r){var o=n-e,s=r-i,a=t-e,h=a/o;return i+s*h},lerp:function(t,e,n){var i={x:e.x+t*(n.x-e.x),y:e.y+t*(n.y-e.y)};return e.z&&n.z&&(i.z=e.z+t*(n.z-e.z)),i},pointToString:function(t){var e=t.x+"/"+t.y;return"undefined"!=typeof t.z&&(e+="/"+t.z),e},pointsToString:function(t){return"["+t.map(this.pointToString).join(", ")+"]"},copy:function(t){return JSON.parse(JSON.stringify(t))},angle:function(t,e,n){var i,r=e.x-t.x,o=e.y-t.y,s=n.x-t.x,a=n.y-t.y,c=r*a-o*s,f=u(r*r+o*o),d=u(s*s+a*a);return r/=f,o/=f,s/=d,a/=d,i=r*s+o*a,h(c,i)},lli8:function(t,e,n,i,r,o,s,a){var h=(t*i-e*n)*(r-s)-(t-n)*(r*a-o*s),u=(t*i-e*n)*(o-a)-(e-i)*(r*a-o*s),c=(t-n)*(o-a)-(e-i)*(r-s);return 0==c?!1:{x:h/c,y:u/c}},lli4:function(t,e,n,i){var r=t.x,o=t.y,s=e.x,a=e.y,h=n.x,u=n.y,c=i.x,f=i.y;return this.lli8(r,o,s,a,h,u,c,f)},lli:function(t,e){return this.lli4(t,t.c,e,e.c)},makeline:function(t,e){var n=t.x,i=t.y,r=e.x,o=e.y,s=(r-n)/3,a=(o-i)/3;return new y(n,i,n+s,i+a,n+2*s,i+2*a,r,o)},findbbox:function(t){var e=99999999,n=e,i=-e,r=i;return t.forEach(function(t){var o=t.bbox();e>o.x.min&&(e=o.x.min),n>o.y.min&&(n=o.y.min),i<o.x.max&&(i=o.x.max),r<o.y.max&&(r=o.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:n,mid:(n+r)/2,max:r,size:r-n}}},shapeintersections:function(t,e,n,i){if(!this.bboxoverlap(e,i))return[];var r=[],o=[t.startcap,t.forward,t.back,t.endcap],s=[n.startcap,n.forward,n.back,n.endcap];return o.forEach(function(e){e.virtual||s.forEach(function(i){if(!i.virtual){var o=e.intersects(i);o.length>0&&(o.c1=e,o.c2=i,o.s1=t,o.s2=n,r.push(o))}})}),r},makeshape:function(t,e){var n=e.points.length,i=t.points.length,r=this.makeline(e.points[n-1],t.points[0]),o=this.makeline(t.points[i-1],e.points[0]),s={startcap:r,forward:t,back:e,endcap:o,bbox:this.findbbox([r,t,e,o])},a=this;return s.intersections=function(t){return a.shapeintersections(s,s.bbox,t,t.bbox)},s},getminmax:function(t,e,n){if(!n)return{min:0,max:0};var i,r,o=0x10000000000000000,s=-o;-1===n.indexOf(0)&&(n=[0].concat(n)),-1===n.indexOf(1)&&n.push(1);for(var a=0,h=n.length;h>a;a++)i=n[a],r=t.get(i),r[e]<o&&(o=r[e]),r[e]>s&&(s=r[e]);return{min:o,mid:(o+s)/2,max:s,size:s-o}},align:function(t,e){var n=e.p1.x,i=e.p1.y,r=-h(e.p2.y-i,e.p2.x-n),a=function(t){return{x:(t.x-n)*o(r)-(t.y-i)*s(r),y:(t.x-n)*s(r)+(t.y-i)*o(r)}};return t.map(a)},roots:function(t,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};var n=t.length-1,i=this.align(t,e),r=function(t){return t>=0&&1>=t};if(2===n){var s=i[0].y,h=i[1].y,f=i[2].y,p=s-2*h+f;if(0!==p){var l=-u(h*h-s*f),m=-s+h,y=-(l+m)/p,x=-(-l+m)/p;return[y,x].filter(r)}return h!==f&&0===p?[(2*h-f)/2*(h-f)].filter(r):[]}var v,y,g,b,w,z=i[0].y,R=i[1].y,_=i[2].y,k=i[3].y,p=-z+3*R-3*_+k,s=(3*z-6*R+3*_)/p,h=(-3*z+3*R)/p,f=z/p,i=(3*h-s*s)/3,S=i/3,E=(2*s*s*s-9*s*h+27*f)/27,M=E/2,T=M*M+S*S*S;if(0>T){var P=-i/3,C=P*P*P,O=u(C),B=-E/(2*O),L=-1>B?-1:B>1?1:B,q=a(L),j=c(O),D=2*j;return g=D*o(q/3)-s/3,b=D*o((q+d)/3)-s/3,w=D*o((q+2*d)/3)-s/3,[g,b,w].filter(r)}if(0===T)return v=0>M?c(-M):-c(M),g=2*v-s/3,b=-v-s/3,[g,b].filter(r);var I=u(T);return v=c(-M+I),y=c(M+I),[v-y-s/3].filter(r)},droots:function(t){if(3===t.length){var e=t[0],n=t[1],i=t[2],r=e-2*n+i;if(0!==r){var o=-u(n*n-e*i),s=-e+n,a=-(o+s)/r,h=-(-o+s)/r;return[a,h]}return n!==i&&0===r?[(2*n-i)/(2*(n-i))]:[]}if(2===t.length){var e=t[0],n=t[1];return e!==n?[e/(e-n)]:[]}},bboxoverlap:function(t,n){var i,r,o,s,a,h=["x","y"],u=h.length;for(i=0;u>i;i++)if(r=h[i],o=t[r].mid,s=n[r].mid,a=(t[r].size+n[r].size)/2,e(o-s)>=a)return!1;return!0},expandbox:function(t,e){e.x.min<t.x.min&&(t.x.min=e.x.min),e.y.min<t.y.min&&(t.y.min=e.y.min),e.z&&e.z.min<t.z.min&&(t.z.min=e.z.min),e.x.max>t.x.max&&(t.x.max=e.x.max),e.y.max>t.y.max&&(t.y.max=e.y.max),e.z&&e.z.max>t.z.max&&(t.z.max=e.z.max),t.x.mid=(t.x.min+t.x.max)/2,t.y.mid=(t.y.min+t.y.max)/2,t.z&&(t.z.mid=(t.z.min+t.z.max)/2),t.x.size=t.x.max-t.x.min,t.y.size=t.y.max-t.y.min,t.z&&(t.z.size=t.z.max-t.z.min)},pairiteration:function(t,e){var n=t.bbox(),i=e.bbox(),r=1e5,o=.5;if(n.x.size+n.y.size<o&&i.x.size+i.y.size<o)return[(r*(t._t1+t._t2)/2|0)/r+"/"+(r*(e._t1+e._t2)/2|0)/r];var s=t.split(.5),a=e.split(.5),h=[{left:s.left,right:a.left},{left:s.left,right:a.right},{left:s.right,right:a.right},{left:s.right,right:a.left}];h=h.filter(function(t){return l.bboxoverlap(t.left.bbox(),t.right.bbox())});var u=[];return 0===h.length?u:(h.forEach(function(t){u=u.concat(l.pairiteration(t.left,t.right))}),u=u.filter(function(t,e){return u.indexOf(t)===e}))}},m=function(t){this.curves=[],this._3d=!1,t&&(this.curves=t,this._3d=this.curves[0]._3d)};m.prototype={valueOf:function(){return this.toString()},toString:function(){return l.pointsToString(this.points)},addCurve:function(t){this.curves.push(t),this._3d=this._3d||t._3d},length:function(){return this.curves.map(function(t){return t.length()}).reduce(function(t,e){return t+e})},curve:function(t){return this.curves[t]},bbox:function(){for(var t=this.curves,e=t[0].bbox(),n=1;n<t.length;n++)l.expandbox(e,t[n].bbox());return e},offset:function(t){var e=[];return this.curves.forEach(function(n){e=e.concat(n.offset(t))}),new m(e)}};var y=function(t){var n=t&&t.forEach?t:arguments;if("object"==typeof n[0]){n=[];for(var i=0;i<t.length;i++)["x","y","z"].forEach(function(e){"undefined"!=typeof t[i][e]&&n.push(t[i][e])})}var r=n.length;if(6!==r&&8!==r&&9!==r&&12!==r)throw new Error("This Bezier curve library only supports quadratic and cubic curves (in 2d and 3d)");var o=9===r||12===r;this._3d=o;for(var s=[],a=0,h=o?3:2;r>a;a+=h){var u={x:n[a],y:n[a+1]};o&&(u.z=n[a+2]),s.push(u)}this.order=s.length-1,this.points=s;var c=["x","y"];o&&c.push("z"),this.dims=c,this.dimlen=c.length,function(t){for(var n=l.align(s,{p1:s[0],p2:s[t.order]}),i=0;i<n.length;i++)if(e(n[i].y)>1e-4)return void(t._linear=!1);t._linear=!0}(this),this._t1=0,this._t2=1,this.update()};y.utils=l,y.prototype={valueOf:function(){return this.toString()},toString:function(){return l.pointsToString(this.points)},toSVG:function(){if(this._3d)return!1;for(var t=this.points,e=t[0].x,n=t[0].y,i="M "+e+" "+n+" "+(2===this.order?"Q ":"C "),r=1,o=t.length;o>r;r++)i+=t[r].x+" "+t[r].y;return i},update:function(){this.dpoints=[];for(var t=this.points,e=t.length,n=e-1;e>1;e--,n--){for(var i,r=[],o=0;n>o;o++)i={x:n*(t[o+1].x-t[o].x),y:n*(t[o+1].y-t[o].y)},this._3d&&(i.z=n*(t[o+1].z-t[o].z)),r.push(i);this.dpoints.push(r),t=r}this.computedirection()},computedirection:function(){var t=this.points,e=l.angle(t[0],t[this.order],t[1]);this.clockwise=e>0},length:function(){return l.length(this.points,this.derivative.bind(this))},getLUT:function(t){t=t||100;for(var e=[],n=0;t>=n;n++)e.push(this.compute(n/t));return e},get:function(t){return this.compute(t)},point:function(t){return this.points[t]},compute:function(t){if(0===t)return this.points[0];if(1===t)return this.points[this.order];var e,n,i,r=1-t,o=r*r,s=t*t,a=0,h=this.points;2===this.order&&(h=[h[0],h[1],h[2],p],e=o,n=r*t*2,i=s),3===this.order&&(e=o*r,n=o*t*3,i=r*s*3,a=t*s);var u={x:e*h[0].x+n*h[1].x+i*h[2].x+a*h[3].x,y:e*h[0].y+n*h[1].y+i*h[2].y+a*h[3].y};return this._3d&&(u.z=e*h[0].z+n*h[1].z+i*h[2].z+a*h[3].z),u},raise:function(){for(var t,e,n,i=this.points,r=[i[0]],o=i.length,t=1;o>t;t++)e=i[t],n=i[t-1],r[t]={x:(o-t)/o*e.x+t/o*n.x,y:(o-t)/o*e.y+t/o*n.y};return r[o]=i[o-1],new y(r)},derivative:function(t){var e,n,i=1-t,r=0,o=this.dpoints[0];2===this.order&&(o=[o[0],o[1],p],e=i,n=t),3===this.order&&(e=i*i,n=i*t*2,r=t*t);var s={x:e*o[0].x+n*o[1].x+r*o[2].x,y:e*o[0].y+n*o[1].y+r*o[2].y};return this._3d&&(s.z=e*o[0].z+n*o[1].z+r*o[2].z),s},normal:function(t){return this._3d?this.__normal3(t):this.__normal2(t)},__normal2:function(t){var e=this.derivative(t),n=u(e.x*e.x+e.y*e.y);return{x:-e.y/n,y:e.x/n}},__normal3:function(){var e=this.derivative(t),n=this.derivative(t+.01),i=u(e.x*e.x+e.y*e.y+e.z*e.z),r=u(n.x*n.x+n.y*n.y+n.z*n.z);e.x/=i,e.y/=i,e.z/=i,n.x/=r,n.y/=r,n.z/=r;var o={x:n.y*e.z-n.z*e.y,y:n.z*e.x-n.x*e.z,z:n.x*e.y-n.y*e.x},s=u(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=s,o.y/=s,o.z/=s;var a=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z],h={x:a[0]*e.x+a[1]*e.y+a[2]*e.z,y:a[3]*e.x+a[4]*e.y+a[5]*e.z,z:a[6]*e.x+a[7]*e.y+a[8]*e.z};return h},split:function(t,e){if(0===t&&e)return this.split(e).left;if(1===e)return this.split(t).right;var n,i=this.points,r=[],o=[],s=0,a=0,h=0;for(o[s++]=i[0],o[s++]=i[1],o[s++]=i[2],3===this.order&&(o[s++]=i[3]);i.length>1;){for(r=[],a=0,h=i.length-1;h>a;a++)n=l.lerp(t,i[a],i[a+1]),o[s++]=n,r.push(n);i=r}var u={left:new y(2===this.order?[o[0],o[3],o[5]]:[o[0],o[4],o[7],o[9]]),right:new y(2===this.order?[o[5],o[4],o[2]]:[o[9],o[8],o[6],o[3]]),span:o};if(u.left._t1=l.map(0,0,1,this._t1,this._t2),u.left._t2=l.map(t,0,1,this._t1,this._t2),u.right._t1=l.map(t,0,1,this._t1,this._t2),u.right._t2=l.map(1,0,1,this._t1,this._t2),!e)return u;e=l.map(e,t,1,0,1);var c=u.right.split(e);return c.left},inflections:function(){var t,e,n=this.dims,i=(this.dimlen,{}),r=[];return n.forEach(function(n){e=function(t){return t[n]},t=this.dpoints[0].map(e),i[n]=l.droots(t),3===this.order&&(t=this.dpoints[1].map(e),i[n]=i[n].concat(l.droots(t))),i[n]=i[n].filter(function(t){return t>=0&&1>=t}),r=r.concat(i[n].sort())}.bind(this)),r.sort(),i.values=r,i},bbox:function(){var t=this.inflections(),e={};return this.dims.forEach(function(n){e[n]=l.getminmax(this,n,t[n])}.bind(this)),e},overlaps:function(t){var e=this.bbox(),n=t.bbox();return l.bboxoverlap(e,n)},offset:function(t,e){if("undefined"!=typeof e){var n=this.get(t),i=this.normal(t),r={c:n,n:i,x:n.x+i.x*e,y:n.y+i.y*e};return this._3d&&(r.z=n.z+i.z*e),r}if(this._linear){var o=this.normal(0),s=this.points.map(function(e){var n={x:e.x+t*o.x,y:e.y+t*o.y};return e.z&&i.z&&(n.z=e.z+t*o.z),n});return[new y(s)]}var a=this.reduce();return a.map(function(e){return e.scale(t)})},simple:function(){if(3===this.order){var t=l.angle(this.points[0],this.points[3],this.points[1]),n=l.angle(this.points[0],this.points[3],this.points[2]);if(t>0&&0>n||0>t&&n>0)return!1}var i=this.normal(0),r=this.normal(1),o=i.x*r.x+i.y*r.y;this._3d&&(o+=i.z*r.z);var s=e(a(o));return f/3>s},reduce:function(){var t,n,i=0,r=0,o=.01,s=[],a=[],h=this.inflections().values;for(-1===h.indexOf(0)&&(h=[0].concat(h)),-1===h.indexOf(1)&&h.push(1),i=h[0],t=1;t<h.length;t++)r=h[t],n=this.split(i,r),n._t1=i,n._t2=r,s.push(n),i=r;return s.forEach(function(t){for(i=0,r=0;1>=r;)for(r=i+o;1+o>=r;r+=o)if(n=t.split(i,r),!n.simple()){if(r-=o,e(i-r)<o)return[];n=t.split(i,r),n._t1=l.map(i,0,1,t._t1,t._t2),n._t2=l.map(r,0,1,t._t1,t._t2),a.push(n),i=r;break}1>i&&(n=t.split(i,1),n._t1=l.map(i,0,1,t._t1,t._t2),n._t2=t._t2,a.push(n))}),a},scale:function(t){var e=this.order,n=!1;if("function"==typeof t&&(n=t),n&&2===e)return this.raise().scale(n);var i=this.clockwise,r=n?n(0):t,o=n?n(1):t,s=[this.offset(0,10),this.offset(1,10)],a=l.lli4(s[0],s[0].c,s[1],s[1].c);if(!a)throw"cannot scale this curve. Try reducing it first.";var h=this.points,c=[];return[0,1].forEach(function(t){var n=c[t*e]=l.copy(h[t*e]);n.x+=(t?o:r)*s[t].n.x,n.y+=(t?o:r)*s[t].n.y}.bind(this)),n?([0,1].forEach(function(r){if(2!==this.order||!r){var o=h[r+1],s={x:o.x-a.x,y:o.y-a.y},f=n?n((r+1)/e):t;n&&!i&&(f=-f);var d=u(s.x*s.x+s.y*s.y);s.x/=d,s.y/=d,c[r+1]={x:o.x+f*s.x,y:o.y+f*s.y}}}.bind(this)),new y(c)):([0,1].forEach(function(t){if(2!==this.order||!t){var n=c[t*e],i=this.derivative(t),r={x:n.x+i.x,y:n.y+i.y};c[t+1]=l.lli4(n,r,a,h[t+1])}}.bind(this)),new y(c))},outline:function(t,e,n,i){function r(t,e,n,i,r){return function(o){var s=i/n,a=(i+r)/n,h=e-t;return l.map(o,0,1,t+s*h,t+a*h)}}e="undefined"==typeof e?t:e;
var o,s=this.reduce(),a=s.length,h=(this.order,[]),u=[],c=0,f=this.length(),d="undefined"!=typeof n&&"undefined"!=typeof i;s.forEach(function(o){z=o.length(),d?(h.push(o.scale(r(t,n,f,c,z))),u.push(o.scale(r(-e,-i,f,c,z)))):(h.push(o.scale(t)),u.push(o.scale(-e))),c+=z}),u=u.map(function(t){return o=t.points,t.points=o[3]?[o[3],o[2],o[1],o[0]]:[o[2],o[1],o[0]],t}).reverse();var p=h[0].points[0],y=h[a-1].points[h[a-1].points.length-1],x=u[a-1].points[u[a-1].points.length-1],v=u[0].points[0],g=l.makeline(x,p),b=l.makeline(y,v),w=[g].concat(h).concat([b]).concat(u),z=w.length;return new m(w)},outlineshapes:function(t,e){e=e||t;for(var n=this.outline(t,e).curves,i=[],r=1,o=n.length;o/2>r;r++){var s=l.makeshape(n[r],n[o-r]);s.startcap.virtual=r>1,s.endcap.virtual=o/2-1>r,i.push(s)}return i},intersects:function(t){return t?t.p1&&t.p2?this.lineIntersects(t):(t instanceof y&&(t=t.reduce()),this.curveintersects(this.reduce(),t)):this.selfintersects()},lineIntersects:function(t){var e=i(t.p1.x,t.p2.x),n=i(t.p1.y,t.p2.y),o=r(t.p1.x,t.p2.x),s=r(t.p1.y,t.p2.y),a=this;return l.roots(this.points,t).filter(function(t){var i=a.get(t);return e<=i.x&&i.x<=o&&n<=i.y&&i.y<=s})},selfintersects:function(){var t,e,n,i,r=this.reduce(),o=r.length-2,s=[];for(t=0;o>t;t++)n=r.slice(t,t+1),i=r.slice(t+2),e=this.curveintersects(n,i),s=s.concat(e);return s},curveintersects:function(t,e){var n=[];t.forEach(function(t){e.forEach(function(e){t.overlaps(e)&&n.push({left:t,right:e})})});var i=[];return n.forEach(function(t){var e=l.pairiteration(t.left,t.right);e.length>0&&(i=i.concat(e))}),i}},"undefined"!=typeof n&&n.exports?n.exports=y:"undefined"!=typeof define?define(function(){return y}):"undefined"!=typeof window&&(window.Bezier=y)}()},{}]},{},[1]);
//# sourceMappingURL=bundle.js.map