!function e(t,n,r){function i(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[s]={exports:{}};t[s][0].call(h.exports,function(e){var n=t[s][1][e];return i(n?n:e)},h,h.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){"use strict";function r(){return o(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.authorize(s["default"].google.clientID,{immediate:!0});case 3:e=t.sent,n.accessToken=e.access_token,n.isAuthenticated.value=!0,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("need to relogin",t.t0);case 11:case"end":return t.stop()}},t,this,[[0,8]])}))}function i(){return o(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.authorize(s["default"].google.clientID,{immediate:!1});case 2:e=t.sent,n.accessToken=e.access_token,n.isAuthenticated.value=!0;case 5:case"end":return t.stop()}},t,this)}))}var o=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{a(r.next(t))}catch(e){o(e)}}function u(t){try{a(r["throw"](t))}catch(e){o(e)}}function a(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}a((r=r.apply(t,e)).next())})},s=t("./config"),u=t("./lib/rx/Variable"),a=t("./lib/GoogleAPI");n.isAuthenticated=new u["default"](!1),n.check=r,n.popup=i},{"./config":2,"./lib/GoogleAPI":5,"./lib/rx/Variable":15}],2:[function(t,e,n){"use strict";var r=function(){var t="production";return console.log("env: "+t),"production"===t?{google:{clientID:"505664874088-43685mt6pknd2fl8jicmikv94p4g5tgi.apps.googleusercontent.com"}}:{google:{clientID:"505664874088-01422r75947r0t9ib3mtqgaue3k00nfk.apps.googleusercontent.com"}}}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{}],3:[function(t,e,n){"use strict";function r(){return i(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return new o["default"](document.getElementById("root")),t.next=3,s.init();case 3:return t.next=5,s.load("auth:client,drive-realtime");case 5:return t.next=7,u.check();case 7:case"end":return t.stop()}},t,this)}))}var i=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{a(r.next(t))}catch(e){o(e)}}function u(t){try{a(r["throw"](t))}catch(e){o(e)}}function a(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}a((r=r.apply(t,e)).next())})};t("setimmediate"),t("whatwg-fetch"),t("babel-regenerator-runtime");var o=t("./view/MainView"),s=t("./lib/GoogleAPI"),u=t("./Auth");document.addEventListener("DOMContentLoaded",r)},{"./Auth":1,"./lib/GoogleAPI":5,"./view/MainView":36,"babel-regenerator-runtime":43,setimmediate:54,"whatwg-fetch":55}],4:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.disposables=new Set}return i(t,[{key:"clear",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.disposables[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.dispose()}}catch(s){e=!0,n=s}finally{try{!t&&i["return"]&&i["return"]()}finally{if(e)throw n}}this.disposables.clear()}},{key:"add",value:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var a=s.value;this.disposables.add(a)}}catch(c){i=!0,o=c}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw o}}}},{key:"delete",value:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var a=s.value;this.disposables["delete"](a)}}catch(c){i=!0,o=c}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw o}}}},{key:"dispose",value:function(){this.clear()}}]),t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{}],5:[function(t,e,n){"use strict";function r(){return new Promise(function(t,e){window.googleAPILoaded=function(){t(),delete window.googleAPILoaded};var n=document.createElement("script");n.src="https://apis.google.com/js/client.js?onload=googleAPILoaded",document.body.appendChild(n)})}function i(t){return new Promise(function(e,n){gapi.load(t,e)})}function o(t,e){var n=e.immediate,r=void 0===n?!1:n;return new Promise(function(e,n){gapi.auth.authorize({client_id:t,scope:"https://www.googleapis.com/auth/drive.file",immediate:r},function(t){t.error?n(new Error(t.error)):e(t)})})}function s(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=arguments.length<=3||void 0===arguments[3]?void 0:arguments[3],i=gapi.client.request({method:t,path:e,params:n,body:r});return new Promise(function(t,e){i.then(function(e){var n=e.result;return t(n)},function(t){var n=t.body;return e(new Error(n))})})}function u(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return s("GET",t,e)}function a(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2];return s("POST",t,e,n)}n.init=r,n.load=i,n.authorize=o,n.request=s,n.get=u,n.post=a},{}],6:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("./DisposableBag"),s=function(){function t(){r(this,t),this.disposables=new o["default"]}return i(t,[{key:"dispose",value:function(){this.disposables.dispose()}}]),t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=s},{"./DisposableBag":4}],7:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){r(this,t),this.color=e}return i(t,[{key:"isOpaque",get:function(){return 0!==this.color.a}}]),t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{}],8:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e,n,i,o){r(this,t),this.r=e,this.g=n,this.b=i,this.a=o}return i(t,[{key:"toString",value:function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"}},{key:"toData",value:function(){return new Float32Array([this.r,this.g,this.b,this.a])}}]),t}();o.black=new o(0,0,0,1),o.white=new o(255,255,255,1),o.transparent=new o(0,0,0,0),Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{}],9:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(a){i=!0,o=a}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./Vec2"),u=t("./Rect"),a=t("bezier-js"),c=t("bezier-subdivide"),h=function(){function t(e,n,i,o){r(this,t),this.start=e,this.control1=n,this.control2=i,this.end=o}return o(t,[{key:"midpoint",value:function(){var t=this.bezier().get(.5);return new s["default"](t.x,t.y)}},{key:"split",value:function(e){var n=this.bezier().split(e);return[n.left,n.right].map(t._fromBezier)}},{key:"calcBoundingRect",value:function(){var t=this.bezier().bbox();return new u["default"](new s["default"](t.x.min,t.y.min),new s["default"](t.x.max,t.y.max))}},{key:"subdivide",value:function(){var t=[this.start,this.control1,this.control2,this.end].map(function(t){return[t.x,t.y]});return c(t,{approximationScale:.5}).map(function(t){var e=i(t,2),n=e[0],r=e[1];return new s["default"](n,r)})}},{key:"bezier",value:function(){return new a([this.start,this.control1,this.control2,this.end])}},{key:"toString",value:function(){return"Curve("+this.start+","+this.control1+","+this.control2+","+this.end+")"}}],[{key:"catmullRom",value:function(e,n,r,i){return new t(n,n.add(r.sub(e).div(6)),r.sub(i.sub(n).div(6)),r)}},{key:"bSpline",value:function(e,n,r,i){return new t(e.add(n.mul(4)).add(r).div(6),n.mul(2).add(r).div(3),r.mul(2).add(n).div(3),i.add(r.mul(4)).add(n).div(6))}},{key:"_fromBezier",value:function(e){var n=e.points.map(function(t){return new s["default"](t.x,t.y)});return new t(n[0],n[1],n[2],n[3])}}]),t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=h},{"./Rect":10,"./Vec2":12,"bezier-js":44,"bezier-subdivide":48}],10:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("./Vec2"),s=function(){function t(e,n){r(this,t),this.min=e,this.max=n}return i(t,[{key:"union",value:function(e){if(this.isEmpty)return e;if(e.isEmpty)return this;var n=new o["default"](Math.min(this.min.x,e.min.x),Math.min(this.min.y,e.min.y)),r=new o["default"](Math.max(this.max.x,e.max.x),Math.max(this.max.y,e.max.y));return new t(n,r)}},{key:"intersection",value:function(e){if(this.isEmpty||e.isEmpty)return t.empty;var n=new o["default"](Math.max(this.min.x,e.min.x),Math.max(this.min.y,e.min.y)),r=new o["default"](Math.min(this.max.x,e.max.x),Math.min(this.max.y,e.max.y));return new t(n,r)}},{key:"outset",value:function(e){var n=new o["default"](e,e);return new t(this.min.sub(n),this.max.add(n))}},{key:"translate",value:function(e){return new t(this.min.add(e),this.max.add(e))}},{key:"transform",value:function(e){var n=this.min.transform(e),r=this.max.transform(e);return t.fromPoints(n,r)}},{key:"boundingIntegerRect",value:function(){return new t(this.min.floor(),this.max.ceil())}},{key:"toString",value:function(){return"Rect("+this.min+","+this.max+")"}},{key:"equals",value:function(t){return this.min.equals(t.min)&&this.max.equals(t.max)}},{key:"x",get:function(){return this.min.x}},{key:"y",get:function(){return this.min.y}},{key:"width",get:function(){return this.max.x-this.min.x}},{key:"height",get:function(){return this.max.y-this.min.y}},{key:"isEmpty",get:function(){return this.max.x<this.min.x||this.max.y<this.min.y}}],[{key:"fromPoints",value:function(e,n){var r=new o["default"](Math.min(e.x,n.x),Math.min(e.y,n.y)),i=new o["default"](Math.max(e.x,n.x),Math.max(e.y,n.y));return new t(r,i)}},{key:"fromMetrics",value:function(e,n,r,i){return new t(new o["default"](e,n),new o["default"](e+r,n+i))}},{key:"empty",get:function(){return new t(new o["default"](0,0),new o["default"](-1,-1))}}]),t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=s},{"./Vec2":12}],11:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e,n,i,o,s,u){r(this,t),this.m11=e,this.m12=n,this.m21=i,this.m22=o,this.dx=s,this.dy=u}return i(t,[{key:"merge",value:function(e){var n=e.m11*this.m11+e.m21*this.m12,r=e.m11*this.m21+e.m21*this.m22,i=e.m12*this.m11+e.m22*this.m12,o=e.m12*this.m21+e.m22*this.m22,s=e.m11*this.dx+e.m21*this.dy+e.dx,u=e.m12*this.dx+e.m22*this.dy+e.dy;return new t(n,i,r,o,s,u)}},{key:"invert",value:function(){var e=this.m11*this.m22-this.m12*this.m21,n=this.m22/e,r=-this.m12/e,i=-this.m21/e,o=this.m11/e,s=-(n*this.dx+i*this.dy),u=-(r*this.dx+o*this.dy);return new t(n,r,i,o,s,u)}},{key:"translate",value:function(e){return new t(this.m11,this.m12,this.m21,this.m22,this.dx+e.x,this.dy+e.y)}},{key:"scale",value:function(e){return new t(this.m11*e.x,this.m12*e.x,this.m21*e.y,this.m22*e.y,this.dx*e.x,this.dy*e.y)}},{key:"toData",value:function(){return new Float32Array([this.m11,this.m12,0,this.m21,this.m22,0,this.dx,this.dy,1])}},{key:"toString",value:function(){return"Transform(["+this.m11+","+this.m12+"],["+this.m21+","+this.m22+"],["+this.dx+","+this.dy+"])"}}],[{key:"identity",value:function(){return new t(1,0,0,1,0,0)}},{key:"scale",value:function(e){return new t(e.x,0,0,e.y,0,0)}},{key:"translation",value:function(e){return new t(1,0,0,1,e.x,e.y)}},{key:"fromPoints",value:function(e,n,r,i,o,s){var u=n.sub(e),a=r.sub(e),c=o.sub(i),h=s.sub(i),l=t.translation(e.negate()).merge(new t(u.x,u.y,a.x,a.y,0,0).invert()).merge(new t(c.x,c.y,h.x,h.y,0,0)).merge(t.translation(i));return l}}]),t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{}],12:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("./util"),s=function(){function t(e,n){r(this,t),this.x=e,this.y=n}return i(t,[{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"sub",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:"mul",value:function(e){return new t(this.x*e,this.y*e)}},{key:"div",value:function(e){return new t(this.x/e,this.y/e)}},{key:"negate",value:function(){return new t(-this.x,-this.y)}},{key:"rotate90",value:function(){return new t(-this.y,this.x)}},{key:"rotate270",value:function(){return new t(this.y,-this.x)}},{key:"normalize",value:function(){return this.div(this.length)}},{key:"midpoint",value:function(t){return this.add(t).mul(.5)}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"lengthSquare",value:function(){return this.length*this.length}},{key:"floor",value:function(){return new t(Math.floor(this.x),Math.floor(this.y))}},{key:"ceil",value:function(){return new t(Math.ceil(this.x),Math.ceil(this.y))}},{key:"normal",value:function(){return this.normalize().rotate90()}},{key:"transform",value:function(e){var n=e.m11*this.x+e.m21*this.y+e.dx,r=e.m12*this.x+e.m22*this.y+e.dy;return new t(n,r)}},{key:"toString",value:function(){return"Vec2("+this.x+","+this.y+")"}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"fuzzyEquals",value:function(t){return Math.abs(this.x-t.x)<o.FLOAT_EPSILON&&Math.abs(this.y-t.y)<o.FLOAT_EPSILON}},{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}}]),t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=s},{"./util":13}],13:[function(t,e,n){"use strict";n.FLOAT_EPSILON=1.1920929e-7},{}],14:[function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("rx"),u=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];i(this,t),this._inserted=new s.Subject,this._removed=new s.Subject,this._replaced=new s.Subject,this._values=e}return o(t,[{key:"get",value:function(t){return this._values[t]}},{key:"push",value:function(t){this.insert(this.length,[t])}},{key:"unshift",value:function(t){this.insert(0,[t])}},{key:"insert",value:function(t,e){var n;(n=this._values).splice.apply(n,[t,0].concat(r(e))),this._inserted.onNext({index:t,values:e})}},{key:"remove",value:function(t,e){var n=this._values.splice(t,2);return this._removed.onNext({index:t,values:n}),n}},{key:"replace",value:function(t,e){var n,i=(n=this._values).splice.apply(n,[t,e.length].concat(r(e)));this._replaced.onNext({index:t,newValues:e,oldValues:i})}},{key:"set",value:function(t,e){this.replace(t,[e])}},{key:"length",get:function(){return this._values.length}},{key:"values",get:function(){return this._values},set:function(t){this.remove(0,this.length),this.insert(0,t)}},{key:"inserted",get:function(){return this._inserted}},{key:"removed",get:function(){return this._removed}},{key:"replaced",get:function(){return this._replaced}}]),t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=u},{rx:52}],15:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("rx"),s=function(){function t(e){r(this,t),this._value=e,this._subject=new o.BehaviorSubject(e)}return i(t,[{key:"onNext",value:function(t){this.value=t}},{key:"onError",value:function(t){console.error(t)}},{key:"onCompleted",value:function(){}},{key:"value",get:function(){return this._value},set:function(t){this._value!=t&&(this._value=t,this._subject.onNext(t))}},{key:"changed",get:function(){return this._subject}}]),t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=s},{rx:52}],16:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("./Slot"),a=t("../TreeDisposable"),c=t("../rx/Variable"),h=function(t){function e(t){r(this,e);var n=i(this,Object.getPrototypeOf(e).call(this));return n.element=n.constructor.getTemplateElement().cloneNode(!0),n.slot=new u["default"](n.element),n.isShown=new c["default"](!0),null!=t&&n.mount(t),n.isShown.changed.map(function(t){return!t}).subscribe(n.slot.toggleClass("sg-hidden")),n}return o(e,t),s(e,[{key:"mount",value:function(t){t.parentElement.insertBefore(this.element,t),t.parentElement.removeChild(t)}},{key:"elementFor",value:function(t){return this.element.querySelector(t)}},{key:"slotFor",value:function(t){return new u["default"](this.elementFor(t))}}],[{key:"getTemplateElement",value:function(){if(null!=this.templateElement)return this.templateElement;var t=document.createElement("div");return t.innerHTML=this.template,this.templateElement=t.firstElementChild}}]),e}(a["default"]);h.template="",Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=h},{"../TreeDisposable":6,"../rx/Variable":15,"./Slot":18}],17:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("./Component"),a=function(t){function e(t,n,o){r(this,e);var s=i(this,Object.getPrototypeOf(e).call(this,t));return s.array=n,s.factory=o,s._insert(0,n.values),s.disposables.add(n.inserted.subscribe(function(t){var e=t.index,n=t.values;s._insert(e,n)}),n.removed.subscribe(function(t){var e=t.index,n=t.values;s._remove(e,n.length)}),n.replaced.subscribe(function(t){var e=t.index,n=t.newValues,r=t.oldValues;s._remove(e,r.length),s._insert(e,n)})),s}return o(e,t),s(e,[{key:"_insert",value:function(t,e){var n=this.element,r=this.factory,i=n.childNodes[t],o=!0,s=!1,u=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var h=a.value,l=r(h).element;n.insertBefore(l,i)}}catch(f){s=!0,u=f}finally{try{!o&&c["return"]&&c["return"]()}finally{if(s)throw u}}}},{key:"_remove",value:function(t,e){for(var n=this.element,r=0;e>r;++r)n.removeChild(n.childNodes[t])}}]),e}(u["default"]);a.template='\n    <div class="sg-list-view">\n    </div>\n  ',Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a},{"./Component":16}],18:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("./util"),s=function(){function t(e){r(this,t),this.element=e}return i(t,[{key:"addClass",value:function(){var t=this,e="";return function(n){var r=new Set(t.element.className.split(" "));r["delete"](e),r.add(n),e=n,t.element.className=Array.from(r).join(" ")}}},{key:"toggleClass",value:function(t){var e=this;return function(n){o.toggleClass(e.element,t,n)}}},{key:"text",value:function(){var t=this;return function(e){t.element.textContent=e}}},{key:"attribute",value:function(t){var e=this;return function(n){e.element.setAttribute(t,n)}}}]),t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=s},{"./util":19}],19:[function(t,e,n){"use strict";function r(t,e,n){var r=new Set(t.className.split(" "));n?r.add(e):r["delete"](e),t.className=Array.from(r).join(" ")}n.toggleClass=r},{}],20:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=t("../lib/rx/ObservableArray"),o=function s(){r(this,s),this.strokes=new i["default"]([])};Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{"../lib/rx/ObservableArray":14}],21:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{a(r.next(t))}catch(e){o(e)}}function u(t){try{a(r["throw"](t))}catch(e){o(e)}}function a(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}a((r=r.apply(t,e)).next())})},s=t("../lib/GoogleAPI"),u=function(){function t(){r(this,t)}return i(t,null,[{key:"create",value:function(){return o(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.post("https://www.googleapis.com/drive/v3/files",{},{appProperties:{showInList:!0},mimeType:"application/vnd.google-apps.drive-sdk"});case 2:return e=t.sent,t.abrupt("return",this.fromData(e));case 4:case"end":return t.stop()}},t,this)}))}},{key:"fromData",value:function(e){var n=new t;return n.id=e.id,n.name=e.name,n.modifiedTime=new Date(e.modifiedTime),n}},{key:"list",value:function(){return o(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.get("https://www.googleapis.com/drive/v3/files",{orderBy:"modifiedTime desc",q:"appProperties has { key='showInList' and value='true' } and trashed = false",fields:"files(id,modifiedTime,name),kind,nextPageToken"});case 2:return e=t.sent,t.abrupt("return",e.files.map(function(t){return n.fromData(t)}));case 4:case"end":return t.stop()}},t,this)}))}}]),t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=u},{"../lib/GoogleAPI":5}],22:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(a){i=!0,o=a}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("../lib/geometry/Vec2"),u=t("../lib/geometry/Color"),a=function(){function t(e,n,i){r(this,t),this.points=e,this.color=n,this.width=i}return o(t,[{key:"toData",value:function(){return{points:this.points.map(function(t){return[t.x,t.y]}),color:[this.color.r,this.color.g,this.color.b,this.color.a],width:this.width}}}],[{key:"fromData",value:function(e){return new t(e.points.map(function(t){var e=i(t,2),n=e[0],r=e[1];return new s["default"](n,r)}),new u["default"](e.color[0],e.color[1],e.color[2],e.color[3]),e.width)}}]),t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a},{"../lib/geometry/Color":8,"../lib/geometry/Vec2":12}],23:[function(t,e,n){"use strict";var r;!function(t){t[t.Pen=0]="Pen",t[t.Eraser=1]="Eraser"}(r||(r={})),Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{}],24:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{a(r.next(t))}catch(e){o(e)}}function u(t){try{a(r["throw"](t))}catch(e){o(e)}}function a(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}a((r=r.apply(t,e)).next())})},s=t("../lib/GoogleAPI"),u=function(){function t(e,n,i){r(this,t),this.displayName=e,this.photoLink=n,this.emailAddress=i}return i(t,null,[{key:"empty",value:function(){return new t("","","")}},{key:"current",value:function(){return o(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("https://www.googleapis.com/drive/v3/about",{fields:"user"});case 2:return n=e.sent,r=n.user,e.abrupt("return",new t(r.displayName,r.photoLink,r.emailAddress));case 5:case"end":return e.stop()}},e,this)}))}}]),t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=u},{"../lib/GoogleAPI":5}],25:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(a){i=!0,o=a}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(){function t(e,n){r(this,t),this.gl=e,this.vertices=n,this.buffer=e.createBuffer()}return o(t,[{key:"updateBuffer",value:function(){for(var t=new Float32Array(4*this.vertices.length),e=0;e<this.vertices.length;++e){var n=i(this.vertices[e],2),r=n[0],o=n[1];t.set([r.x,r.y,o.x,o.y],4*e)}var s=this.gl;s.bindBuffer(s.ARRAY_BUFFER,this.buffer),s.bufferData(s.ARRAY_BUFFER,t,s.STREAM_DRAW)}},{key:"draw",value:function(t){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.vertexAttribPointer(t.aPosition,2,e.FLOAT,!1,16,0),e.vertexAttribPointer(t.aUVCoord,2,e.FLOAT,!1,16,8),e.drawArrays(e.TRIANGLE_STRIP,0,this.vertices.length)}},{key:"dispose",value:function(){this.gl.deleteBuffer(this.buffer)}}]),t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=s},{}],26:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(a){i=!0,o=a}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance");
}}(),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function x(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:x(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},c=t("../lib/geometry/Color"),h=t("../lib/geometry/Vec2"),l=t("../lib/geometry/Curve"),f=t("../lib/geometry/Transform"),p=t("../model/Stroke"),d=t("../lib/geometry/Background"),v=t("./StrokeShader"),y=t("./Model"),b=t("./Shader"),m=t("../lib/TreeDisposable"),_=t("./StrokeWeaver"),w=t("./StrokeCollider"),g=function(t){function e(t,n){r(this,e);var o=i(this,Object.getPrototypeOf(e).call(this));o.element=t,o.canvas=n,o.strokeWeaverMap=new Map,o.erasingPoints=[],o.isUpdateQueued=!1,o.devicePixelRatio=1,o.size=new h["default"](0,0),o.background=new d["default"](c["default"].white);var s={alpha:!1,depth:!1,stencil:!1,antialias:!1,premultipliedAlpha:!0},u=o.gl=o.element.getContext("webgl",s)||o.element.getContext("experimental-webgl",s);return u.enable(u.BLEND),u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA),o.shader=new v["default"](u),o.backgroundShader=new b["default"](u),o.backgroundShader.setColor(o.background.color),o.backgroundModel=new y["default"](u,[[new h["default"](-1,-1),new h["default"](0,0)],[new h["default"](-1,1),new h["default"](0,0)],[new h["default"](1,-1),new h["default"](0,0)],[new h["default"](1,1),new h["default"](0,0)]]),o.backgroundModel.updateBuffer(),u.clearColor(0,0,0,0),window.addEventListener("resize",o.onResize.bind(o)),o.onResize(),o}return o(e,t),u(e,[{key:"dispose",value:function(){a(Object.getPrototypeOf(e.prototype),"dispose",this).call(this);var t=!0,n=!1,r=void 0;try{for(var i,o=this.strokeWeaverMap.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;s.dispose()}}catch(u){n=!0,r=u}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw r}}this.currentStrokeWeaver&&this.currentStrokeWeaver.dispose()}},{key:"strokeBegin",value:function(t,e){var n=this.currentStroke=new p["default"]([],e,t);this.currentStrokeWeaver=new _["default"](this.gl,n)}},{key:"strokeNext",value:function(t){this.currentStroke.points.push(t);var e=this.currentStroke.points,n=e.length,r=this.currentStrokeWeaver;if(2===n)r.addSection(e);else if(3===n)r.rewindLastSection(),r.addSection(l["default"].bSpline(e[0],e[0],e[1],e[2]).subdivide()),r.addSection(l["default"].bSpline(e[0],e[1],e[2],e[2]).subdivide());else{if(!(n>3))return;r.rewindLastSection(),r.addSection(l["default"].bSpline(e[n-4],e[n-3],e[n-2],e[n-1]).subdivide()),r.addSection(l["default"].bSpline(e[n-3],e[n-2],e[n-1],e[n-1]).subdivide())}r.model.updateBuffer(),this.render()}},{key:"strokeEnd",value:function(){this.currentStrokeWeaver.finalize(),this.strokeWeaverMap.set(this.currentStroke,this.currentStrokeWeaver),this.canvas.strokes.push(this.currentStroke),this.currentStroke=null,this.currentStrokeWeaver=null}},{key:"eraseBegin",value:function(t){this.erasingWidth=t,this.erasingPoints=[]}},{key:"eraseNext",value:function(t){var e=this.erasingPoints;e.push(t);var n=e.length;if(!(3>=n)){var r=l["default"].bSpline(e[n-4],e[n-3],e[n-2],e[n-1]).subdivide(),i=new w["default"](this.erasingWidth,r),o=[],u=!0,a=!1,c=void 0;try{for(var h,f=this.strokeWeaverMap[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=s(h.value,2),d=p[0],v=p[1];v.collider.collides(i)&&o.push(d)}}catch(y){a=!0,c=y}finally{try{!u&&f["return"]&&f["return"]()}finally{if(a)throw c}}if(o.length>0){var b=!0,m=!1,_=void 0;try{for(var g,x=o[Symbol.iterator]();!(b=(g=x.next()).done);b=!0){var E=g.value;this.strokeWeaverMap["delete"](E)}}catch(y){m=!0,_=y}finally{try{!b&&x["return"]&&x["return"]()}finally{if(m)throw _}}this.render()}}}},{key:"eraseEnd",value:function(){}},{key:"update",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];if(!this.isUpdateQueued){this.isUpdateQueued=!0;var n=function(){t.render(),t.isUpdateQueued=!1};e?setImmediate(n):requestAnimationFrame(n)}}},{key:"renderBackground",value:function(){var t=this.backgroundShader,e=this.backgroundModel;t.use(),t.setTransforms(f["default"].identity(),f["default"].identity()),e.draw(t)}},{key:"render",value:function(){var t=this.gl,e=this.shader;t.clear(t.COLOR_BUFFER_BIT),this.renderBackground();var n=this.transform;e.use(),e.setTransforms(this.viewportTransform,n);var r=function(t){var r=t.model,i=t.stroke;r.vertices.length>0&&(e.setColor(i.color),e.setDisplayWidth(i.width*n.m11),r.draw(e))},i=!0,o=!1,s=void 0;try{for(var u,a=this.strokeWeaverMap.values()[Symbol.iterator]();!(i=(u=a.next()).done);i=!0){var c=u.value;r(c)}}catch(h){o=!0,s=h}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw s}}this.currentStrokeWeaver&&r(this.currentStrokeWeaver)}},{key:"onResize",value:function(){var t=this.size=new h["default"](window.innerWidth,window.innerHeight),e=t.width,n=t.height,r=this.devicePixelRatio=window.devicePixelRatio||1;this.viewportTransform=f["default"].scale(new h["default"](2/e,2/n)).translate(new h["default"](-1,-1)).scale(new h["default"](1,-1)),this.element.width=e*r,this.element.height=n*r,this.element.style.transform="scale("+1/r+")",this.gl.viewport(0,0,e*r,n*r),console.log("resized to "+e+" * "+n+", pixel ratio "+devicePixelRatio),this.update()}}]),e}(m["default"]);Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=g},{"../lib/TreeDisposable":6,"../lib/geometry/Background":7,"../lib/geometry/Color":8,"../lib/geometry/Curve":9,"../lib/geometry/Transform":11,"../lib/geometry/Vec2":12,"../model/Stroke":22,"./Model":25,"./Shader":27,"./StrokeCollider":28,"./StrokeShader":29,"./StrokeWeaver":30}],27:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){r(this,t),this.gl=e,this.setup(),this.aPosition=e.getAttribLocation(this.program,"aPosition"),this.aUVCoord=e.getAttribLocation(this.program,"aUVCoord"),this.uTransform=e.getUniformLocation(this.program,"uTransform"),this.uColor=e.getUniformLocation(this.program,"uColor"),e.enableVertexAttribArray(this.aPosition),e.enableVertexAttribArray(this.aUVCoord)}return i(t,[{key:"setColor",value:function(t){this.gl.uniform4fv(this.uColor,t.toData())}},{key:"use",value:function(){this.gl.useProgram(this.program)}},{key:"setTransforms",value:function(t,e){var n=e.merge(t);this.gl.uniformMatrix3fv(this.uTransform,!1,n.toData())}},{key:"compile",value:function(t,e){var n=this.gl,r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS)||(console.warn("An error occurred compiling the shaders"),console.warn(n.getShaderInfoLog(r))),r}},{key:"setup",value:function(){var t=this.gl,e=this.program=t.createProgram();t.attachShader(e,this.compile(this.vertexShader,t.VERTEX_SHADER)),t.attachShader(e,this.compile(this.fragmentShader,t.FRAGMENT_SHADER)),t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS)||console.warn("Failed to link shader program"),t.useProgram(e)}},{key:"vertexShader",get:function(){return"\n      precision highp float;\n      uniform mat3 uTransform;\n      attribute vec2 aPosition;\n      attribute mediump vec2 aUVCoord;\n      varying mediump vec2 vUVCoord;\n      void main(void) {\n        vUVCoord = aUVCoord;\n        vec3 pos = uTransform * vec3(aPosition, 1.0);\n        gl_Position = vec4(pos.xy, 0.0, 1.0);\n      }\n    "}},{key:"fragmentShader",get:function(){return"\n      precision lowp float;\n      uniform vec4 uColor;\n      void main(void) {\n        gl_FragColor = uColor;\n      }\n    "}}]),t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{}],28:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("sat"),s=function(){function t(e,n){r(this,t);for(var i=[],s=0;s<n.length-1;++s){var u=n[s],a=n[s+1],c=a.sub(u).normal(),h=c.mul(e/2),l=c.mul(-e/2),f=[u.add(h),u.add(l),a.add(l),a.add(h)],p=new o.Polygon(new o.Vector,f.map(function(t){var e=t.x,n=t.y;return new o.Vector(e,n)}));i.push(p)}this.satPolygons=i}return i(t,[{key:"collides",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,s=this.satPolygons[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var u=i.value,a=!0,c=!1,h=void 0;try{for(var l,f=t.satPolygons[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var p=l.value;if(o.testPolygonPolygon(u,p))return!0}}catch(d){c=!0,h=d}finally{try{!a&&f["return"]&&f["return"]()}finally{if(c)throw h}}}}catch(d){n=!0,r=d}finally{try{!e&&s["return"]&&s["return"]()}finally{if(n)throw r}}return!1}}]),t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=s},{sat:53}],29:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("./shader"),a=function(t){function e(t){r(this,e);var n=i(this,Object.getPrototypeOf(e).call(this,t));return n.uAntialiasEdge=t.getUniformLocation(n.program,"uAntialiasEdge"),n}return o(e,t),s(e,[{key:"setDisplayWidth",value:function(t){var e=.5*t,n=(e-1)/e;this.gl.uniform1f(this.uAntialiasEdge,n)}},{key:"fragmentShader",get:function(){return"\n      precision lowp float;\n      uniform vec4 uColor;\n      uniform float uAntialiasEdge;\n      varying vec2 vUVCoord;\n      void main(void) {\n        float dist = length(vUVCoord);\n        float alpha = 1.0 - smoothstep(uAntialiasEdge, 1.0, dist);\n        gl_FragColor = uColor * alpha;\n      }\n    "}}]),e}(u["default"]);Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a},{"./shader":31}],30:[function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("./Model"),c=t("../lib/geometry/Vec2"),h=t("../lib/TreeDisposable"),l=t("./StrokeCollider"),f=function(t){function e(t,n){i(this,e);var r=o(this,Object.getPrototypeOf(e).call(this));return r.gl=t,r.stroke=n,r.model=new a["default"](r.gl,[]),r.lastSectionLength=0,r.vertices=[],r.disposables.add(r.model),r}return s(e,t),u(e,[{key:"addSegment",value:function(t,e){var n=this.model.vertices,r=this.stroke.width,i=e.sub(t).normal(),o=i.mul(r/2),s=i.mul(-r/2);n.push([t.add(o),new c["default"](-1,0)]),n.push([t.add(s),new c["default"](1,0)]),n.push([e.add(o),new c["default"](-1,0)]),n.push([e.add(s),new c["default"](1,0)])}},{key:"addSection",value:function(t){for(var e,n=0;n<t.length-1;++n)this.addSegment(t[n],t[n+1]);this.vertices.pop(),(e=this.vertices).push.apply(e,r(t)),this.lastSectionLength=t.length-1}},{key:"rewindLastSection",value:function(){var t=this.lastSectionLength;this.model.vertices.splice(4*-t,4*t),this.vertices.splice(-t,t),this.lastSectionLength=0}},{key:"finalize",value:function(){this.collider=new l["default"](this.stroke.width,this.vertices)}}]),e}(h["default"]);Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=f},{"../lib/TreeDisposable":6,"../lib/geometry/Vec2":12,"./Model":25,"./StrokeCollider":28}],31:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],32:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=t("../lib/ui/Component"),u=t("../lib/rx/Variable"),a=t("rx"),c=function(t){function e(t,n){r(this,e);var o=i(this,Object.getPrototypeOf(e).call(this,t));return o.isChecked=new u["default"](!1),o.clicked=a.Observable.fromEvent(o.element,"click"),o.isChecked.changed.subscribe(o.slot.toggleClass("checked")),o.element.className+=" "+n,o}return o(e,t),e}(s["default"]);c.template='\n    <button class="sg-button"></button>\n  ',Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=c},{"../lib/rx/Variable":15,"../lib/ui/Component":16,rx:52}],33:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){return new l["default"](t.clientX,t.clientY)}var u,a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=t("../lib/ui/Component"),h=t("../renderer/Renderer"),l=t("../lib/geometry/Vec2"),f=t("../lib/geometry/Transform"),p=t("../lib/TreeDisposable"),d=t("../model/Tool"),v=t("../lib/rx/Variable");!function(t){t[t.None=0]="None",t[t.Drawing=1]="Drawing",t[t.Erasing=2]="Erasing",t[t.Pinching=3]="Pinching",t[t.Dragging=4]="Dragging"}(u||(u={}));var y=function(t){function e(t,n){r(this,e);var o=i(this,Object.getPrototypeOf(e).call(this));return o.canvasViewModel=t,o.renderer=n,o.interactionState=new v["default"](u.None),o.initialTransform=f["default"].identity(),o.isStroking=!1,o.disposables.add(o.renderer,t.transform.changed.subscribe(function(t){n.transform=t,o.transform=t})),o}return o(e,t),a(e,[{key:"pinchStart",value:function(t){this.interactionState.value=u.Pinching,this.pinchStartPoints=t,this.initialTransform=this.transform}},{key:"pinchMove",value:function(t){this.interactionState.value!==u.Pinching&&this.pinchStart(t);var e=t[0].sub(t[1]).length/this.pinchStartPoints[0].sub(this.pinchStartPoints[1]).length,n=this.pinchStartPoints[0].add(this.pinchStartPoints[1]).mul(.5),r=t[0].add(t[1]).mul(.5),i=r.sub(n.mul(e)),o=f["default"].scale(new l["default"](e,e)).merge(f["default"].translation(i));this.renderer.transform=this.transform=this.initialTransform.merge(o),this.renderer.update()}},{key:"pinchEnd",value:function(){this.interactionState.value=u.None,this.canvasViewModel.transform.value=this.transform}},{key:"pressStart",value:function(t){t=t.transform(this.transform.invert()),this.canvasViewModel.tool.value==d["default"].Pen?(this.interactionState.value=u.Drawing,this.renderer.strokeBegin(this.canvasViewModel.penWidth.value,this.canvasViewModel.color.value),this.renderer.strokeNext(t)):(this.interactionState.value=u.Erasing,this.renderer.eraseBegin(this.canvasViewModel.eraserWidth.value),this.renderer.eraseNext(t))}},{key:"pressMove",value:function(t){t=t.transform(this.transform.invert()),this.interactionState.value===u.Drawing?this.renderer.strokeNext(t):this.interactionState.value==u.Erasing&&this.renderer.eraseNext(t)}},{key:"pressEnd",value:function(){this.interactionState.value===u.Drawing?(this.interactionState.value=u.None,this.renderer.strokeEnd()):this.interactionState.value==u.Erasing&&this.renderer.eraseEnd()}},{key:"dragStart",value:function(t){this.interactionState.value=u.Dragging,this.startPoint=t,this.initialTransform=this.canvasViewModel.transform.value}},{key:"dragMove",value:function(t){this.interactionState.value==u.Dragging&&(this.transform=this.renderer.transform=this.initialTransform.translate(t.sub(this.startPoint)),this.renderer.update())}},{key:"dragEnd",value:function(){this.interactionState.value==u.Dragging&&(this.canvasViewModel.transform.value=this.transform,this.interactionState.value=u.None)}},{key:"scale",value:function(t,e){var n=f["default"].translation(t.negate()).scale(new l["default"](e,e)).translate(t);this.canvasViewModel.transform.value=this.canvasViewModel.transform.value.merge(n),this.renderer.update()}}]),e}(p["default"]),b=function(t){function e(t,n){r(this,e);var o=i(this,Object.getPrototypeOf(e).call(this,t));return o.strokeHandler=new y(n,new h["default"](o.element,n.canvas)),o.disposables.add(o.strokeHandler),o.element.addEventListener("mousemove",o.onMouseMove.bind(o)),o.element.addEventListener("mousedown",o.onMouseDown.bind(o)),o.element.addEventListener("mouseup",o.onMouseUp.bind(o)),o.element.addEventListener("touchmove",o.onTouchMove.bind(o)),o.element.addEventListener("touchstart",o.onTouchStart.bind(o)),o.element.addEventListener("touchend",o.onTouchEnd.bind(o)),o.element.addEventListener("wheel",o.onWheel.bind(o)),o.element.addEventListener("contextmenu",function(t){t.preventDefault()}),o.strokeHandler.interactionState.changed.map(function(t){return t==u.Dragging}).subscribe(o.slot.toggleClass("dragging")),o}return o(e,t),a(e,[{key:"onMouseMove",value:function(t){var e=new l["default"](t.clientX,t.clientY);0==t.button?this.strokeHandler.pressMove(e):2==t.button&&this.strokeHandler.dragMove(e)}},{key:"onMouseDown",value:function(t){var e=new l["default"](t.clientX,t.clientY);0==t.button?this.strokeHandler.pressStart(e):2==t.button&&(console.log("right click"),this.strokeHandler.dragStart(e))}},{key:"onMouseUp",value:function(t){0==t.button?this.strokeHandler.pressEnd():2==t.button&&this.strokeHandler.dragEnd()}},{key:"onTouchMove",value:function(t){if(1===t.touches.length){var e=t.touches[0];this.strokeHandler.pressMove(s(e))}else 2===t.touches.length&&this.strokeHandler.pinchMove([0,1].map(function(e){return s(t.touches[e])}));t.preventDefault()}},{key:"onTouchStart",value:function(t){if(1===t.touches.length){var e=t.touches[0];this.strokeHandler.pressStart(s(e))}else 2===t.touches.length&&this.strokeHandler.pinchStart([0,1].map(function(e){return s(t.touches[e])}));t.preventDefault()}},{key:"onTouchEnd",value:function(t){this.strokeHandler.pressEnd(),this.strokeHandler.pinchEnd(),t.preventDefault()}},{key:"onWheel",value:function(t){console.log(t.deltaY),this.strokeHandler.scale(new l["default"](t.clientX,t.clientY),Math.pow(.5,t.deltaY/256)),t.preventDefault()}}]),e}(c["default"]);b.template='\n    <canvas class="sg-canvas"></canvas>\n  ',Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=b},{"../lib/TreeDisposable":6,"../lib/geometry/Transform":11,"../lib/geometry/Vec2":12,"../lib/rx/Variable":15,"../lib/ui/Component":16,"../model/Tool":23,"../renderer/Renderer":26}],34:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=t("../lib/ui/Component"),u=t("./ButtonView"),a=function(t){function e(t){r(this,e);var n=i(this,Object.getPrototypeOf(e).call(this,t));return n.infoButton=new u["default"](n.elementFor(".info-button"),"info"),n.userButton=new u["default"](n.elementFor(".user-button"),"user"),n}return o(e,t),e}(s["default"]);a.template='\n    <div class="sg-info-buttons">\n      <div class="info-button"></div>\n      <div class="user-button"></div>\n    </div>\n  ',Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a},{"../lib/ui/Component":16,"./ButtonView":32}],35:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("../lib/ui/Component"),a=t("rx"),c=t("../Auth"),h=function(t){function e(t){r(this,e);var n=i(this,Object.getPrototypeOf(e).call(this,t));return n.clicked=a.Observable.fromEvent(n.elementFor(".login-google"),"click"),n.disposables.add(c.isAuthenticated.changed.map(function(t){return!t}).subscribe(n.isShown),n.clicked.subscribe(function(){return n.auth()})),n}return o(e,t),s(e,[{key:"auth",value:function(){c.popup()}}]),e}(u["default"]);h.template="\n    <div class='sg-login-dialog'>\n      <section class='dialog'>\n        <h1>Sign in</h1>\n        <button class='login-google'>Continue with Google</button>\n      </section>\n    </div>\n  ",Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=h},{"../Auth":1,"../lib/ui/Component":16,rx:52}],36:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=t("../lib/ui/Component"),u=t("./CanvasView"),a=t("./userSideBar/UserSideBarView"),c=t("./ToolBoxView"),h=t("./InfoButtonsView"),l=t("./LoginDialog"),f=t("../viewmodel/CanvasViewModel"),p=t("../viewmodel/AppViewModel"),d=function(t){function e(t){r(this,e);var n=i(this,Object.getPrototypeOf(e).call(this,t));return n.canvasViewModel=new f["default"],n.canvasView=new u["default"](n.elementFor(".canvas-view"),n.canvasViewModel),n.UserSideBarView=new a["default"](n.elementFor(".user-sidebar-view"),p.appViewModel.userSideBar),n.toolBoxView=new c["default"](n.elementFor(".palette-view"),n.canvasViewModel),n.infoButtonsView=new h["default"](n.elementFor(".info-buttons-view")),n.loginDialog=new l["default"](n.elementFor(".login-dialog")),n}return o(e,t),e}(s["default"]);d.template="\n    <div>\n      <div class='canvas-view'></div>\n      <div class='user-sidebar-view'></div>\n      <div class='palette-view'></div>\n      <div class='info-buttons-view'></div>\n      <div class='login-dialog'></div>\n    </div>\n  ",Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=d},{"../lib/ui/Component":16,"../viewmodel/AppViewModel":40,"../viewmodel/CanvasViewModel":41,"./CanvasView":33,"./InfoButtonsView":34,"./LoginDialog":35,"./ToolBoxView":37,"./userSideBar/UserSideBarView":39}],37:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=t("../lib/ui/Component"),u=t("./ButtonView"),a=t("../model/Tool"),c=function(t){function e(t,n){r(this,e);var o=i(this,Object.getPrototypeOf(e).call(this,t));return o.canvasViewModel=n,o.penButton=new u["default"](o.elementFor(".pen-button"),"pen"),o.eraserButton=new u["default"](o.elementFor(".eraser-button"),"eraser"),o.disposables.add(o.penButton.clicked.subscribe(function(){n.tool.value=a["default"].Pen}),o.eraserButton.clicked.subscribe(function(){n.tool.value=a["default"].Eraser}),n.tool.changed.map(function(t){return t==a["default"].Pen}).subscribe(o.penButton.isChecked),n.tool.changed.map(function(t){return t==a["default"].Eraser}).subscribe(o.eraserButton.isChecked)),o}return o(e,t),e}(s["default"]);c.template='\n    <div class="sg-palette">\n      <div class="pen-button"></div>\n      <div class="eraser-button"></div>\n    </div>\n  ',Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=c},{"../lib/ui/Component":16,"../model/Tool":23,"./ButtonView":32}],38:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=t("../../lib/ui/Component"),u=t("../../lib/rx/Variable"),a=t("moment"),c=function(t){function e(t,n){r(this,e);var o=i(this,Object.getPrototypeOf(e).call(this,t));return o.canvasFile=n,o.selected=new u["default"](!1),o.thumbnailSlot=o.slotFor(".thumbnail"),o.titleSlot=o.slotFor(".title"),o.updatedAtSlot=o.slotFor(".updated-at"),o.selected.changed.subscribe(o.slot.toggleClass("selected")),o.titleSlot.text()(n.name),o.updatedAtSlot.text()(a(n.modifiedTime).fromNow()),o}return o(e,t),e}(s["default"]);c.template='\n    <div class="sg-canvas-cell">\n      <div class="thumbnail"></div>\n      <div class="info">\n        <p class="title">Design sketch</p>\n        <p class="updated-at">2 days ago</p>\n      </div>\n    </div>\n  ',Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=c},{"../../lib/rx/Variable":15,"../../lib/ui/Component":16,moment:49}],39:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=t("../../lib/ui/Component"),u=t("../../lib/rx/Variable"),a=t("../ButtonView"),c=t("../../lib/ui/ListView"),h=t("./CanvasFileCell"),l=t("rx"),f=function(t){function e(t,n){r(this,e);var o=i(this,Object.getPrototypeOf(e).call(this,t));return o.viewModel=n,o.open=new u["default"](!1),o.sidebarButton=new a["default"](o.elementFor(".sidebar-button"),"sidebar"),o.avatarSlot=o.slotFor(".avatar"),o.userNameSlot=o.slotFor(".userName"),o.canvasListView=new c["default"](o.elementFor(".canvas-list"),o.viewModel.files,function(t){return new h["default"](null,t)}),o.addCanvasClicked=l.Observable.fromEvent(o.elementFor(".add-canvas"),"click"),o.disposables.add(o.open.changed.subscribe(o.slot.toggleClass("open")),o.open.changed.subscribe(o.sidebarButton.isChecked),o.sidebarButton.clicked.subscribe(function(){o.open.value=!o.open.value}),n.user.changed.subscribe(function(t){o.userNameSlot.text()(t.displayName),o.avatarSlot.attribute("src")(t.photoLink)}),o.addCanvasClicked.subscribe(function(){n.addFile()})),o}return o(e,t),e}(s["default"]);f.template='\n    <div class="sg-sidebar">\n      <div class="sg-sidebar-clip">\n        <aside class="sg-sidebar-content">\n          <div class="user-header">\n            <img class="avatar">\n            <h1 class="userName"></h1>\n          </div>\n          <div class="canvases-header">\n            <h2>Canvases</h2>\n            <button class="add-canvas">+</button>\n          </div>\n          <input placeholder="Search" class="sg-search">\n          <div class="canvas-list"></div>\n        </aside>\n      </div>\n      <div class="sidebar-button"></div>\n    </div>\n  ',Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=f},{"../../lib/rx/Variable":15,"../../lib/ui/Component":16,"../../lib/ui/ListView":17,"../ButtonView":32,"./CanvasFileCell":38,rx:52}],40:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{a(r.next(t))}catch(e){o(e)}}function u(t){try{a(r["throw"](t))}catch(e){o(e)}}function a(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}a((r=r.apply(t,e)).next())})},o=t("../lib/rx/Variable"),s=t("../Auth"),u=t("./UserSideBarViewModel"),a=function c(){var t=this;r(this,c),this.canvas=new o["default"](null),this.userSideBar=new u["default"],s.isAuthenticated.changed.filter(function(t){return t}).forEach(function(){return i(t,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.userSideBar.init();case 1:case"end":return t.stop()}},e,this)}))})};Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a,n.appViewModel=new a},{"../Auth":1,"../lib/rx/Variable":15,
"./UserSideBarViewModel":42}],41:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=t("../lib/geometry/Transform"),o=t("../lib/rx/Variable"),s=t("../lib/geometry/Color"),u=t("../model/Canvas"),a=t("../model/Tool"),c=function h(){r(this,h),this.transform=new o["default"](i["default"].identity()),this.tool=new o["default"](a["default"].Pen),this.penWidth=new o["default"](3),this.eraserWidth=new o["default"](30),this.color=new o["default"](s["default"].black),this.canvas=new u["default"]};Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=c},{"../lib/geometry/Color":8,"../lib/geometry/Transform":11,"../lib/rx/Variable":15,"../model/Canvas":20,"../model/Tool":23}],42:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{a(r.next(t))}catch(e){o(e)}}function u(t){try{a(r["throw"](t))}catch(e){o(e)}}function a(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}a((r=r.apply(t,e)).next())})},s=t("../lib/rx/Variable"),u=t("../lib/rx/ObservableArray"),a=t("../model/User"),c=t("../model/CanvasFile"),h=function(){function t(){r(this,t),this.user=new s["default"](a["default"].empty()),this.files=new u["default"]}return i(t,[{key:"init",value:function(){return o(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.fetchUser(),this.fetchFiles()]);case 2:case"end":return t.stop()}},t,this)}))}},{key:"fetchUser",value:function(){return o(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a["default"].current();case 2:this.user.value=t.sent;case 3:case"end":return t.stop()}},t,this)}))}},{key:"fetchFiles",value:function(){return o(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c["default"].list();case 2:this.files.values=t.sent;case 3:case"end":return t.stop()}},t,this)}))}},{key:"addFile",value:function(){return o(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c["default"].create();case 2:e=t.sent,this.files.unshift(e);case 4:case"end":return t.stop()}},t,this)}))}}]),t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=h},{"../lib/rx/ObservableArray":14,"../lib/rx/Variable":15,"../model/CanvasFile":21,"../model/User":24}],43:[function(t,e,n){(function(t,n){!function(n){"use strict";function r(t,e,n,r){var i=Object.create((e||o).prototype),s=new d(r||[]);return i._invoke=l(t,n,s),i}function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function o(){}function s(){}function u(){}function a(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function c(t){this.arg=t}function h(e){function n(t,n){var r=e[t](n),i=r.value;return i instanceof c?Promise.resolve(i.arg).then(o,s):Promise.resolve(i).then(function(t){return r.value=t,r})}function r(t,e){function r(){return n(t,e)}return i=i?i.then(r,r):new Promise(function(t){t(r())})}"object"==typeof t&&t.domain&&(n=t.domain.bind(n));var i,o=n.bind(e,"next"),s=n.bind(e,"throw");n.bind(e,"return");this._invoke=r}function l(t,e,n){var r=x;return function(o,s){if(r===k)throw new Error("Generator is already running");if(r===C){if("throw"===o)throw s;return y()}for(;;){var u=n.delegate;if(u){if("return"===o||"throw"===o&&u.iterator[o]===b){n.delegate=null;var a=u.iterator["return"];if(a){var c=i(a,u.iterator,s);if("throw"===c.type){o="throw",s=c.arg;continue}}if("return"===o)continue}var c=i(u.iterator[o],u.iterator,s);if("throw"===c.type){n.delegate=null,o="throw",s=c.arg;continue}o="next",s=b;var h=c.arg;if(!h.done)return r=E,h;n[u.resultName]=h.value,n.next=u.nextLoc,n.delegate=null}if("next"===o)n._sent=s,r===E?n.sent=s:n.sent=b;else if("throw"===o){if(r===x)throw r=C,s;n.dispatchException(s)&&(o="next",s=b)}else"return"===o&&n.abrupt("return",s);r=k;var c=i(t,e,n);if("normal"===c.type){r=n.done?C:E;var h={value:c.arg,done:n.done};if(c.arg!==S)return h;n.delegate&&"next"===o&&(s=b)}else"throw"===c.type&&(r=C,o="throw",s=c.arg)}}}function f(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function p(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)}function v(t){if(t){var e=t[_];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function i(){for(;++n<t.length;)if(m.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=b,i.done=!0,i};return r.next=r}}return{next:y}}function y(){return{value:b,done:!0}}var b,m=Object.prototype.hasOwnProperty,_="function"==typeof Symbol&&Symbol.iterator||"@@iterator",w="object"==typeof e,g=n.regeneratorRuntime;if(g)return void(w&&(e.exports=g));g=n.regeneratorRuntime=w?e.exports:{},g.wrap=r;var x="suspendedStart",E="suspendedYield",k="executing",C="completed",S={},O=u.prototype=o.prototype;s.prototype=O.constructor=u,u.constructor=s,s.displayName="GeneratorFunction",g.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return e?e===s||"GeneratorFunction"===(e.displayName||e.name):!1},g.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):t.__proto__=u,t.prototype=Object.create(O),t},g.awrap=function(t){return new c(t)},a(h.prototype),g.async=function(t,e,n,i){var o=new h(r(t,e,n,i));return g.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},a(O),O[_]=function(){return this},O.toString=function(){return"[object Generator]"},g.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},g.values=v,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=b,this.done=!1,this.delegate=null,this.tryEntries.forEach(p),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=b)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var s=m.call(i,"catchLoc"),u=m.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?this.next=i.finallyLoc:this.complete(o),S},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),p(n),S}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;p(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:v(t),resultName:e,nextLoc:n},S}}}("object"==typeof n?n:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:51}],44:[function(t,e,n){e.exports=t("./lib/bezier")},{"./lib/bezier":45}],45:[function(e,n,r){!function(){"use strict";function r(t,e,n,r,i){"undefined"==typeof i&&(i=.5);var o=l.projectionratio(i,t),s=1-o,u={x:o*e.x+s*r.x,y:o*e.y+s*r.y},a=l.abcratio(i,t),c={x:n.x+(n.x-u.x)/a,y:n.y+(n.y-u.y)/a};return{A:c,B:n,C:u}}var i=Math.abs,o=Math.min,s=Math.max,u=Math.acos,a=Math.sqrt,c=Math.PI,h={x:0,y:0,z:0},l=e("./utils.js"),f=e("./poly-bezier.js"),p=function(t){var e=t&&t.forEach?t:[].slice.call(arguments),n=!1;if("object"==typeof e[0]){n=e.length;var r=[];e.forEach(function(t){["x","y","z"].forEach(function(e){"undefined"!=typeof t[e]&&r.push(t[e])})}),e=r}var o=!1,s=e.length;if(n){if(n>4){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");o=!0}}else if(6!==s&&8!==s&&9!==s&&12!==s&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");var u=!o&&(9===s||12===s)||t&&t[0]&&"undefined"!=typeof t[0].z;this._3d=u;for(var a=[],c=0,h=u?3:2;s>c;c+=h){var f={x:e[c],y:e[c+1]};u&&(f.z=e[c+2]),a.push(f)}this.order=a.length-1,this.points=a;var p=["x","y"];u&&p.push("z"),this.dims=p,this.dimlen=p.length,function(t){for(var e=l.align(a,{p1:a[0],p2:a[t.order]}),n=0;n<e.length;n++)if(i(e[n].y)>1e-4)return void(t._linear=!1);t._linear=!0}(this),this._t1=0,this._t2=1,this.update()};p.fromSVG=function(t){var e=t.match(/[-+]?\d*\.?\d+(?:[eE][-+]?\d+)?/g).map(parseFloat),n=/[cq]/.test(t);return n?(e=e.map(function(t,n){return 2>n?t:t+e[n%2]}),new p(e)):new p(e)},p.quadraticFromPoints=function(t,e,n,i){if("undefined"==typeof i&&(i=.5),0===i)return new p(e,e,n);if(1===i)return new p(t,e,e);var o=r(2,t,e,n,i);return new p(t,o.A,n)},p.cubicFromPoints=function(t,e,n,i,o){"undefined"==typeof i&&(i=.5);var s=r(3,t,e,n,i);"undefined"==typeof o&&(o=l.dist(e,s.C));var u=o*(1-i)/i,a=l.dist(t,n),c=(n.x-t.x)/a,h=(n.y-t.y)/a,f=o*c,d=o*h,v=u*c,y=u*h,b={x:e.x-f,y:e.y-d},m={x:e.x+v,y:e.y+y},_=s.A,w={x:_.x+(b.x-_.x)/(1-i),y:_.y+(b.y-_.y)/(1-i)},g={x:_.x+(m.x-_.x)/i,y:_.y+(m.y-_.y)/i},x={x:t.x+(w.x-t.x)/i,y:t.y+(w.y-t.y)/i},E={x:n.x+(g.x-n.x)/(1-i),y:n.y+(g.y-n.y)/(1-i)};return new p(t,x,E,n)};var d=function(){return l};p.getUtils=d,p.prototype={getUtils:d,valueOf:function(){return this.toString()},toString:function(){return l.pointsToString(this.points)},toSVG:function(t){if(this._3d)return!1;for(var e=this.points,n=e[0].x,r=e[0].y,i=["M",n,r,2===this.order?"Q":"C"],o=1,s=e.length;s>o;o++)i.push(e[o].x),i.push(e[o].y);return i.join(" ")},update:function(){this.dpoints=[];for(var t=this.points,e=t.length,n=e-1;e>1;e--,n--){for(var r,i=[],o=0;n>o;o++)r={x:n*(t[o+1].x-t[o].x),y:n*(t[o+1].y-t[o].y)},this._3d&&(r.z=n*(t[o+1].z-t[o].z)),i.push(r);this.dpoints.push(i),t=i}this.computedirection()},computedirection:function(){var t=this.points,e=l.angle(t[0],t[this.order],t[1]);this.clockwise=e>0},length:function(){return l.length(this.derivative.bind(this))},_lut:[],getLUT:function(t){if(t=t||100,this._lut.length===t)return this._lut;this._lut=[];for(var e=0;t>=e;e++)this._lut.push(this.compute(e/t));return this._lut},on:function(t,e){e=e||5;for(var n,r=this.getLUT(),i=[],o=0,s=0;s<r.length;s++)n=r[s],l.dist(n,t)<e&&(i.push(n),o+=s/r.length);return i.length?o/=i.length:!1},project:function(t){var e=this.getLUT(),n=e.length-1,r=l.closest(e,t),i=r.mdist,o=r.mpos;if(0===o||o===n){var s=o/n,u=this.compute(s);return u.t=s,u.d=i,u}var a,s,c,h,f=(o-1)/n,p=(o+1)/n,d=.1/n;for(i+=1,s=f,a=s;p+d>s;s+=d)c=this.compute(s),h=l.dist(t,c),i>h&&(i=h,a=s);return c=this.compute(a),c.t=a,c.d=i,c},get:function(t){return this.compute(t)},point:function(t){return this.points[t]},compute:function(t){if(0===t)return this.points[0];if(1===t)return this.points[this.order];var e=this.points,n=1-t;if(1===this.order)return c={x:n*e[0].x+t*e[1].x,y:n*e[0].y+t*e[1].y},this._3d&&(c.z=n*e[0].z+t*e[1].z),c;if(this.order<4){var r,i,o,s=n*n,u=t*t,a=0;2===this.order?(e=[e[0],e[1],e[2],h],r=s,i=n*t*2,o=u):3===this.order&&(r=s*n,i=s*t*3,o=n*u*3,a=t*u);var c={x:r*e[0].x+i*e[1].x+o*e[2].x+a*e[3].x,y:r*e[0].y+i*e[1].y+o*e[2].y+a*e[3].y};return this._3d&&(c.z=r*e[0].z+i*e[1].z+o*e[2].z+a*e[3].z),c}for(var l=JSON.parse(JSON.stringify(this.points));l.length>1;){for(var f=0;f<l.length-1;f++)l[f]={x:l[f].x+(l[f+1].x-l[f].x)*t,y:l[f].y+(l[f+1].y-l[f].y)*t},"undefined"!=typeof l[f].z&&(l[f]=l[f].z+(l[f+1].z-l[f].z)*t);l.splice(l.length-1,1)}return l[0]},raise:function(){for(var t,e,n,r=this.points,i=[r[0]],o=r.length,t=1;o>t;t++)e=r[t],n=r[t-1],i[t]={x:(o-t)/o*e.x+t/o*n.x,y:(o-t)/o*e.y+t/o*n.y};return i[o]=r[o-1],new p(i)},derivative:function(t){var e,n,r=1-t,i=0,o=this.dpoints[0];2===this.order&&(o=[o[0],o[1],h],e=r,n=t),3===this.order&&(e=r*r,n=r*t*2,i=t*t);var s={x:e*o[0].x+n*o[1].x+i*o[2].x,y:e*o[0].y+n*o[1].y+i*o[2].y};return this._3d&&(s.z=e*o[0].z+n*o[1].z+i*o[2].z),s},inflections:function(){return l.inflections(this.points)},normal:function(t){return this._3d?this.__normal3(t):this.__normal2(t)},__normal2:function(t){var e=this.derivative(t),n=a(e.x*e.x+e.y*e.y);return{x:-e.y/n,y:e.x/n}},__normal3:function(){var e=this.derivative(t),n=this.derivative(t+.01),r=a(e.x*e.x+e.y*e.y+e.z*e.z),i=a(n.x*n.x+n.y*n.y+n.z*n.z);e.x/=r,e.y/=r,e.z/=r,n.x/=i,n.y/=i,n.z/=i;var o={x:n.y*e.z-n.z*e.y,y:n.z*e.x-n.x*e.z,z:n.x*e.y-n.y*e.x},s=a(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=s,o.y/=s,o.z/=s;var u=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z],c={x:u[0]*e.x+u[1]*e.y+u[2]*e.z,y:u[3]*e.x+u[4]*e.y+u[5]*e.z,z:u[6]*e.x+u[7]*e.y+u[8]*e.z};return c},hull:function(t){var e,n=this.points,r=[],i=[],o=0,s=0,u=0;for(i[o++]=n[0],i[o++]=n[1],i[o++]=n[2],3===this.order&&(i[o++]=n[3]);n.length>1;){for(r=[],s=0,u=n.length-1;u>s;s++)e=l.lerp(t,n[s],n[s+1]),i[o++]=e,r.push(e);n=r}return i},split:function(t,e){if(0===t&&e)return this.split(e).left;if(1===e)return this.split(t).right;var n=this.hull(t),r={left:new p(2===this.order?[n[0],n[3],n[5]]:[n[0],n[4],n[7],n[9]]),right:new p(2===this.order?[n[5],n[4],n[2]]:[n[9],n[8],n[6],n[3]]),span:n};if(r.left._t1=l.map(0,0,1,this._t1,this._t2),r.left._t2=l.map(t,0,1,this._t1,this._t2),r.right._t1=l.map(t,0,1,this._t1,this._t2),r.right._t2=l.map(1,0,1,this._t1,this._t2),!e)return r;e=l.map(e,t,1,0,1);var i=r.right.split(e);return i.left},extrema:function(){var t,e,n=this.dims,r={},i=[];return n.forEach(function(n){e=function(t){return t[n]},t=this.dpoints[0].map(e),r[n]=l.droots(t),3===this.order&&(t=this.dpoints[1].map(e),r[n]=r[n].concat(l.droots(t))),r[n]=r[n].filter(function(t){return t>=0&&1>=t}),i=i.concat(r[n].sort())}.bind(this)),i.sort(),r.values=i,r},bbox:function(){var t=this.extrema(),e={};return this.dims.forEach(function(n){e[n]=l.getminmax(this,n,t[n])}.bind(this)),e},overlaps:function(t){var e=this.bbox(),n=t.bbox();return l.bboxoverlap(e,n)},offset:function(t,e){if("undefined"!=typeof e){var n=this.get(t),r=this.normal(t),i={c:n,n:r,x:n.x+r.x*e,y:n.y+r.y*e};return this._3d&&(i.z=n.z+r.z*e),i}if(this._linear){var o=this.normal(0),s=this.points.map(function(e){var n={x:e.x+t*o.x,y:e.y+t*o.y};return e.z&&r.z&&(n.z=e.z+t*o.z),n});return[new p(s)]}var u=this.reduce();return u.map(function(e){return e.scale(t)})},simple:function(){if(3===this.order){var t=l.angle(this.points[0],this.points[3],this.points[1]),e=l.angle(this.points[0],this.points[3],this.points[2]);if(t>0&&0>e||0>t&&e>0)return!1}var n=this.normal(0),r=this.normal(1),o=n.x*r.x+n.y*r.y;this._3d&&(o+=n.z*r.z);var s=i(u(o));return c/3>s},reduce:function(){var t,e,n=0,r=0,o=.01,s=[],u=[],a=this.extrema().values;for(-1===a.indexOf(0)&&(a=[0].concat(a)),-1===a.indexOf(1)&&a.push(1),n=a[0],t=1;t<a.length;t++)r=a[t],e=this.split(n,r),e._t1=n,e._t2=r,s.push(e),n=r;return s.forEach(function(t){for(n=0,r=0;1>=r;)for(r=n+o;1+o>=r;r+=o)if(e=t.split(n,r),!e.simple()){if(r-=o,i(n-r)<o)return[];e=t.split(n,r),e._t1=l.map(n,0,1,t._t1,t._t2),e._t2=l.map(r,0,1,t._t1,t._t2),u.push(e),n=r;break}1>n&&(e=t.split(n,1),e._t1=l.map(n,0,1,t._t1,t._t2),e._t2=t._t2,u.push(e))}),u},scale:function(t){var e=this.order,n=!1;if("function"==typeof t&&(n=t),n&&2===e)return this.raise().scale(n);var r=this.clockwise,i=n?n(0):t,o=n?n(1):t,s=[this.offset(0,10),this.offset(1,10)],u=l.lli4(s[0],s[0].c,s[1],s[1].c);if(!u)throw"cannot scale this curve. Try reducing it first.";var c=this.points,h=[];return[0,1].forEach(function(t){var n=h[t*e]=l.copy(c[t*e]);n.x+=(t?o:i)*s[t].n.x,n.y+=(t?o:i)*s[t].n.y}.bind(this)),n?([0,1].forEach(function(i){if(2!==this.order||!i){var o=c[i+1],s={x:o.x-u.x,y:o.y-u.y},l=n?n((i+1)/e):t;n&&!r&&(l=-l);var f=a(s.x*s.x+s.y*s.y);s.x/=f,s.y/=f,h[i+1]={x:o.x+l*s.x,y:o.y+l*s.y}}}.bind(this)),new p(h)):([0,1].forEach(function(t){if(2!==this.order||!t){var n=h[t*e],r=this.derivative(t),i={x:n.x+r.x,y:n.y+r.y};h[t+1]=l.lli4(n,i,u,c[t+1])}}.bind(this)),new p(h))},outline:function(t,e,n,r){function i(t,e,n,r,i){return function(o){var s=r/n,u=(r+i)/n,a=e-t;return l.map(o,0,1,t+s*a,t+u*a)}}e="undefined"==typeof e?t:e;var o,s=this.reduce(),u=s.length,a=[],c=[],h=0,p=this.length(),d="undefined"!=typeof n&&"undefined"!=typeof r;s.forEach(function(o){x=o.length(),d?(a.push(o.scale(i(t,n,p,h,x))),c.push(o.scale(i(-e,-r,p,h,x)))):(a.push(o.scale(t)),c.push(o.scale(-e))),h+=x}),c=c.map(function(t){return o=t.points,o[3]?t.points=[o[3],o[2],o[1],o[0]]:t.points=[o[2],o[1],o[0]],t}).reverse();var v=a[0].points[0],y=a[u-1].points[a[u-1].points.length-1],b=c[u-1].points[c[u-1].points.length-1],m=c[0].points[0],_=l.makeline(b,v),w=l.makeline(y,m),g=[_].concat(a).concat([w]).concat(c),x=g.length;return new f(g)},outlineshapes:function(t,e){e=e||t;for(var n=this.outline(t,e).curves,r=[],i=1,o=n.length;o/2>i;i++){var s=l.makeshape(n[i],n[o-i]);s.startcap.virtual=i>1,s.endcap.virtual=o/2-1>i,r.push(s)}return r},intersects:function(t){return t?t.p1&&t.p2?this.lineIntersects(t):(t instanceof p&&(t=t.reduce()),this.curveintersects(this.reduce(),t)):this.selfintersects()},lineIntersects:function(t){var e=o(t.p1.x,t.p2.x),n=o(t.p1.y,t.p2.y),r=s(t.p1.x,t.p2.x),i=s(t.p1.y,t.p2.y),u=this;return l.roots(this.points,t).filter(function(t){var o=u.get(t);return l.between(o.x,e,r)&&l.between(o.y,n,i)})},selfintersects:function(){var t,e,n,r,i=this.reduce(),o=i.length-2,s=[];for(t=0;o>t;t++)n=i.slice(t,t+1),r=i.slice(t+2),e=this.curveintersects(n,r),s=s.concat(e);return s},curveintersects:function(t,e){var n=[];t.forEach(function(t){e.forEach(function(e){t.overlaps(e)&&n.push({left:t,right:e})})});var r=[];return n.forEach(function(t){var e=l.pairiteration(t.left,t.right);e.length>0&&(r=r.concat(e))}),r},arcs:function(t){t=t||.5;var e=[];return this._iterate(t,e)},_error:function(t,e,n,r){var o=(r-n)/4,s=this.get(n+o),u=this.get(r-o),a=l.dist(t,e),c=l.dist(t,s),h=l.dist(t,u);return i(c-a)+i(h-a)},_iterate:function(t,e){var n,r=0,i=1;do{n=0,i=1;var o,s,u,a,c,h=this.get(r),f=!1,p=!1,d=i,v=1,y=0;do{p=f,a=u,d=(r+i)/2,y++,o=this.get(d),s=this.get(i),u=l.getccenter(h,o,s);var b=this._error(u,h,r,i);if(f=t>=b,c=p&&!f,c||(v=i),f){if(i>=1){v=1,a=u;break}i+=(i-r)/2}else i=d}while(!c&&n++<100);if(n>=100){console.error("arc abstraction somehow failed...");break}a=a?a:u,e.push(a),r=v}while(1>i);return e}},n.exports=p}()},{"./poly-bezier.js":46,"./utils.js":47}],46:[function(t,e,n){!function(){"use strict";var n=t("./utils.js"),r=function(t){this.curves=[],this._3d=!1,t&&(this.curves=t,this._3d=this.curves[0]._3d)};r.prototype={valueOf:function(){return this.toString()},toString:function(){return n.pointsToString(this.points)},addCurve:function(t){this.curves.push(t),this._3d=this._3d||t._3d},length:function(){return this.curves.map(function(t){return t.length()}).reduce(function(t,e){return t+e})},curve:function(t){return this.curves[t]},bbox:function(){for(var t=this.curves,e=t[0].bbox(),r=1;r<t.length;r++)n.expandbox(e,t[r].bbox());return e},offset:function(t){var e=[];return this.curves.forEach(function(n){e=e.concat(n.offset(t))}),new r(e)}},e.exports=r}()},{"./utils.js":47}],47:[function(t,e,n){!function(){"use strict";var n=Math.abs,r=Math.cos,i=Math.sin,o=Math.acos,s=Math.atan2,u=Math.sqrt,a=Math.pow,c=function(t){return 0>t?-a(-t,1/3):a(t,1/3)},h=Math.PI,l=2*h,f=h/2,p=1e-6,d={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(t,e){var n=e(t),r=n.x*n.x+n.y*n.y;return"undefined"!=typeof n.z&&(r+=n.z*n.z),u(r)},between:function(t,e,n){return t>=e&&n>=t||d.approximately(t,e)||d.approximately(t,n)},approximately:function(t,e,r){return n(t-e)<=(r||p)},length:function(t){var e,n,r=.5,i=0,o=d.Tvalues.length;for(e=0;o>e;e++)n=r*d.Tvalues[e]+r,i+=d.Cvalues[e]*d.arcfn(n,t);return r*i},map:function(t,e,n,r,i){var o=n-e,s=i-r,u=t-e,a=u/o;return r+s*a},lerp:function(t,e,n){var r={x:e.x+t*(n.x-e.x),y:e.y+t*(n.y-e.y)};return e.z&&n.z&&(r.z=e.z+t*(n.z-e.z)),r},pointToString:function(t){var e=t.x+"/"+t.y;return"undefined"!=typeof t.z&&(e+="/"+t.z),e},pointsToString:function(t){return"["+t.map(d.pointToString).join(", ")+"]"},copy:function(t){return JSON.parse(JSON.stringify(t))},angle:function(t,e,n){var r,i=e.x-t.x,o=e.y-t.y,a=n.x-t.x,c=n.y-t.y,h=i*c-o*a,l=u(i*i+o*o),f=u(a*a+c*c);return i/=l,o/=l,a/=f,c/=f,r=i*a+o*c,s(h,r)},round:function(t,e){var n=""+t,r=n.indexOf(".");return parseFloat(n.substring(0,r+1+e))},dist:function(t,e){var n=t.x-e.x,r=t.y-e.y;return u(n*n+r*r)},closest:function(t,e){var n,r,i=a(2,63);return t.forEach(function(t,o){r=d.dist(e,t),i>r&&(i=r,n=o)}),{mdist:i,mpos:n}},abcratio:function(t,e){if(2!==e&&3!==e)return!1;if("undefined"==typeof t)t=.5;else if(0===t||1===t)return t;var r=a(t,e)+a(1-t,e),i=r-1;return n(i/r)},projectionratio:function(t,e){if(2!==e&&3!==e)return!1;if("undefined"==typeof t)t=.5;else if(0===t||1===t)return t;var n=a(1-t,e),r=a(t,e)+n;return n/r},lli8:function(t,e,n,r,i,o,s,u){var a=(t*r-e*n)*(i-s)-(t-n)*(i*u-o*s),c=(t*r-e*n)*(o-u)-(e-r)*(i*u-o*s),h=(t-n)*(o-u)-(e-r)*(i-s);return 0==h?!1:{x:a/h,y:c/h}},lli4:function(t,e,n,r){var i=t.x,o=t.y,s=e.x,u=e.y,a=n.x,c=n.y,h=r.x,l=r.y;return d.lli8(i,o,s,u,a,c,h,l)},lli:function(t,e){return d.lli4(t,t.c,e,e.c)},makeline:function(e,n){var r=t("./bezier"),i=e.x,o=e.y,s=n.x,u=n.y,a=(s-i)/3,c=(u-o)/3;return new r(i,o,i+a,o+c,i+2*a,o+2*c,s,u)},findbbox:function(t){var e=99999999,n=e,r=-e,i=r;return t.forEach(function(t){var o=t.bbox();e>o.x.min&&(e=o.x.min),n>o.y.min&&(n=o.y.min),r<o.x.max&&(r=o.x.max),i<o.y.max&&(i=o.y.max)}),{x:{min:e,mid:(e+r)/2,max:r,size:r-e},y:{min:n,mid:(n+i)/2,max:i,size:i-n}}},shapeintersections:function(t,e,n,r){if(!d.bboxoverlap(e,r))return[];var i=[],o=[t.startcap,t.forward,t.back,t.endcap],s=[n.startcap,n.forward,n.back,n.endcap];return o.forEach(function(e){e.virtual||s.forEach(function(r){if(!r.virtual){var o=e.intersects(r);o.length>0&&(o.c1=e,o.c2=r,o.s1=t,o.s2=n,i.push(o))}})}),i},makeshape:function(t,e){var n=e.points.length,r=t.points.length,i=d.makeline(e.points[n-1],t.points[0]),o=d.makeline(t.points[r-1],e.points[0]),s={startcap:i,forward:t,back:e,endcap:o,bbox:d.findbbox([i,t,e,o])},u=d;return s.intersections=function(t){return u.shapeintersections(s,s.bbox,t,t.bbox)},s},getminmax:function(t,e,n){if(!n)return{min:0,max:0};var r,i,o=0x10000000000000000,s=-o;-1===n.indexOf(0)&&(n=[0].concat(n)),-1===n.indexOf(1)&&n.push(1);for(var u=0,a=n.length;a>u;u++)r=n[u],i=t.get(r),i[e]<o&&(o=i[e]),i[e]>s&&(s=i[e]);return{min:o,mid:(o+s)/2,max:s,size:s-o}},align:function(t,e){var n=e.p1.x,o=e.p1.y,u=-s(e.p2.y-o,e.p2.x-n),a=function(t){return{x:(t.x-n)*r(u)-(t.y-o)*i(u),y:(t.x-n)*i(u)+(t.y-o)*r(u)}};return t.map(a)},roots:function(t,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};var n=t.length-1,i=d.align(t,e),s=function(t){return t>=0&&1>=t};if(2===n){var a=i[0].y,h=i[1].y,f=i[2].y,p=a-2*h+f;if(0!==p){var v=-u(h*h-a*f),y=-a+h,b=-(v+y)/p,m=-(-v+y)/p;return[b,m].filter(s)}return h!==f&&0===p?[(2*h-f)/2*(h-f)].filter(s):[]}var _,b,w,g,x,E=i[0].y,k=i[1].y,C=i[2].y,S=i[3].y,p=-E+3*k-3*C+S,a=(3*E-6*k+3*C)/p,h=(-3*E+3*k)/p,f=E/p,i=(3*h-a*a)/3,O=i/3,D=(2*a*a*a-9*a*h+27*f)/27,M=D/2,P=M*M+O*O*O;if(0>P){var N=-i/3,A=N*N*N,T=u(A),j=-D/(2*T),R=-1>j?-1:j>1?1:j,F=o(R),z=c(T),L=2*z;return w=L*r(F/3)-a/3,g=L*r((F+l)/3)-a/3,x=L*r((F+2*l)/3)-a/3,[w,g,x].filter(s)}if(0===P)return _=0>M?c(-M):-c(M),w=2*_-a/3,g=-_-a/3,[w,g].filter(s);var Y=u(P);return _=c(-M+Y),b=c(M+Y),[_-b-a/3].filter(s)},droots:function(t){if(3===t.length){var e=t[0],n=t[1],r=t[2],i=e-2*n+r;if(0!==i){var o=-u(n*n-e*r),s=-e+n,a=-(o+s)/i,c=-(-o+s)/i;return[a,c]}return n!==r&&0===i?[(2*n-r)/(2*(n-r))]:[]}if(2===t.length){var e=t[0],n=t[1];return e!==n?[e/(e-n)]:[]}},inflections:function(t){var e=d.align(t,{p1:t[0],p2:t[3]}),n=e[2].x*e[1].y,r=e[3].x*e[1].y,i=e[1].x*e[2].y,o=e[3].x*e[2].y,s=18*(-3*n+2*r+3*i-o),u=18*(3*n-r-3*i),a=18*(i-n);if(d.approximately(s,0))return[];var c=u*u-4*s*a,h=Math.sqrt(c),o=2*s;return d.approximately(o,0)?[]:[(h-u)/o,-(u+h)/o].filter(function(t){return t>=0&&1>=t})},bboxoverlap:function(t,e){var r,i,o,s,u,a=["x","y"],c=a.length;for(r=0;c>r;r++)if(i=a[r],o=t[i].mid,s=e[i].mid,u=(t[i].size+e[i].size)/2,n(o-s)>=u)return!1;return!0},expandbox:function(t,e){e.x.min<t.x.min&&(t.x.min=e.x.min),e.y.min<t.y.min&&(t.y.min=e.y.min),e.z&&e.z.min<t.z.min&&(t.z.min=e.z.min),e.x.max>t.x.max&&(t.x.max=e.x.max),e.y.max>t.y.max&&(t.y.max=e.y.max),e.z&&e.z.max>t.z.max&&(t.z.max=e.z.max),t.x.mid=(t.x.min+t.x.max)/2,t.y.mid=(t.y.min+t.y.max)/2,t.z&&(t.z.mid=(t.z.min+t.z.max)/2),t.x.size=t.x.max-t.x.min,t.y.size=t.y.max-t.y.min,t.z&&(t.z.size=t.z.max-t.z.min)},pairiteration:function(t,e){var n=t.bbox(),r=e.bbox(),i=1e5,o=.5;if(n.x.size+n.y.size<o&&r.x.size+r.y.size<o)return[(i*(t._t1+t._t2)/2|0)/i+"/"+(i*(e._t1+e._t2)/2|0)/i];var s=t.split(.5),u=e.split(.5),a=[{left:s.left,right:u.left},{left:s.left,right:u.right},{left:s.right,right:u.right},{left:s.right,right:u.left}];a=a.filter(function(t){return d.bboxoverlap(t.left.bbox(),t.right.bbox())});var c=[];return 0===a.length?c:(a.forEach(function(t){c=c.concat(d.pairiteration(t.left,t.right))}),c=c.filter(function(t,e){return c.indexOf(t)===e}))},getccenter:function(t,e,n){var o,u=e.x-t.x,a=e.y-t.y,c=n.x-e.x,h=n.y-e.y,p=u*r(f)-a*i(f),v=u*i(f)+a*r(f),y=c*r(f)-h*i(f),b=c*i(f)+h*r(f),m=(t.x+e.x)/2,_=(t.y+e.y)/2,w=(e.x+n.x)/2,g=(e.y+n.y)/2,x=m+p,E=_+v,k=w+y,C=g+b,S=d.lli8(m,_,x,E,w,g,k,C),O=d.dist(S,t),D=s(t.y-S.y,t.x-S.x),M=s(e.y-S.y,e.x-S.x),P=s(n.y-S.y,n.x-S.x);return P>D?((D>M||M>P)&&(D+=l),D>P&&(o=P,P=D,D=o)):M>P&&D>M?(o=P,P=D,D=o):P+=l,S.s=D,S.e=P,S.r=O,S}};e.exports=d}()},{"./bezier":45}],48:[function(t,e,n){"use strict";function r(t,e,n,r){var i=n-t,o=r-e;return i*i+o*o}function i(t,e){var n=t[0][0],r=t[0][1],i=t[1][0],s=t[1][1],u=t[2][0],a=t[2][1],c=t[3][0],h=t[3][1],l={approximationScale:1,angleTolerance:0,cuspLimit:0};o(l,e),this.points=[],this.approximation_scale=l.approximationScale,this.angle_tolerance=l.angleTolerance,this.cusp_limit=l.cuspLimit,this.distance_tolerance_square=.5/this.approximation_scale,this.distance_tolerance_square*=this.distance_tolerance_square,this.bezier(n,r,i,s,u,a,c,h)}var o=t("object-assign"),s=32,u=.01,a=1e-30;i.prototype.bezier=function(t,e,n,r,i,o,s,u){this.points.push([t,e]),this.recursive_bezier(t,e,n,r,i,o,s,u,0),this.points.push([s,u])},i.prototype.recursive_bezier=function(t,e,n,i,o,c,h,l,f){if(!(f>s)){var p,d,v,y=(t+n)/2,b=(e+i)/2,m=(n+o)/2,_=(i+c)/2,w=(o+h)/2,g=(c+l)/2,x=(y+m)/2,E=(b+_)/2,k=(m+w)/2,C=(_+g)/2,S=(x+k)/2,O=(E+C)/2,D=h-t,M=l-e,P=Math.abs((n-h)*M-(i-l)*D),N=Math.abs((o-h)*M-(c-l)*D);switch(((P>a)<<1)+(N>a)){case 0:if(v=D*D+M*M,0==v)P=r(t,e,n,i),N=r(h,l,o,c);else{if(v=1/v,p=n-t,d=i-e,P=v*(p*D+d*M),p=o-t,d=c-e,N=v*(p*D+d*M),P>0&&1>P&&N>0&&1>N)return;P=0>=P?r(n,i,t,e):P>=1?r(n,i,h,l):r(n,i,t+P*D,e+P*M),N=0>=N?r(o,c,t,e):N>=1?r(o,c,h,l):r(o,c,t+N*D,e+N*M)}if(P>N){if(P<this.distance_tolerance_square)return void this.points.push([n,i])}else if(N<this.distance_tolerance_square)return void this.points.push([o,c]);break;case 1:if(N*N<=this.distance_tolerance_square*(D*D+M*M)){if(this.angle_tolerance<u)return void this.points.push([m,_]);if(p=Math.abs(Math.atan2(l-c,h-o)-Math.atan2(c-i,o-n)),p>=Math.PI&&(p=2*Math.PI-p),p<this.angle_tolerance)return this.points.push([n,i]),void this.points.push([o,c]);if(0!=this.cusp_limit&&p>this.cusp_limit)return void this.points.push([o,c])}break;case 2:if(P*P<=this.distance_tolerance_square*(D*D+M*M)){if(this.angle_tolerance<u)return void this.points.push([m,_]);if(p=Math.abs(Math.atan2(c-i,o-n)-Math.atan2(i-e,n-t)),p>=Math.PI&&(p=2*Math.PI-p),p<this.angle_tolerance)return this.points.push([n,i]),void this.points.push([o,c]);if(0!=this.cusp_limit&&p>this.cusp_limit)return void this.points.push([n,i])}break;case 3:if((P+N)*(P+N)<=this.distance_tolerance_square*(D*D+M*M)){if(this.angle_tolerance<u)return void this.points.push([m,_]);if(v=Math.atan2(c-i,o-n),p=Math.abs(v-Math.atan2(i-e,n-t)),d=Math.abs(Math.atan2(l-c,h-o)-v),p>=Math.PI&&(p=2*Math.PI-p),d>=Math.PI&&(d=2*Math.PI-d),p+d<this.angle_tolerance)return void this.points.push([m,_]);if(0!=this.cusp_limit){if(p>this.cusp_limit)return void this.points.push([n,i]);if(d>this.cusp_limit)return void this.points.push([o,c])}}}this.recursive_bezier(t,e,y,b,x,E,S,O,f+1),this.recursive_bezier(S,O,k,C,w,g,h,l,f+1)}},e.exports=function(t,e){return new i(t,e).points}},{"object-assign":50}],49:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?e.exports=r():"function"==typeof define&&define.amd?define(r):t.moment=r()}(this,function(){"use strict";function n(){return ar.apply(null,arguments)}function r(t){ar=t}function i(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function o(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function s(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function u(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t,e){for(var n in e)u(e,n)&&(t[n]=e[n]);return u(e,"toString")&&(t.toString=e.toString),u(e,"valueOf")&&(t.valueOf=e.valueOf),t}function c(t,e,n,r){return zt(t,e,n,r,!0).utc()}function h(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function l(t){return null==t._pf&&(t._pf=h()),t._pf}function f(t){if(null==t._isValid){var e=l(t),n=cr.call(e.parsedDateParts,function(t){return null!=t});t._isValid=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),
t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function p(t){var e=c(NaN);return null!=t?a(l(e),t):l(e).userInvalidated=!0,e}function d(t){return void 0===t}function v(t,e){var n,r,i;if(d(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),d(e._i)||(t._i=e._i),d(e._f)||(t._f=e._f),d(e._l)||(t._l=e._l),d(e._strict)||(t._strict=e._strict),d(e._tzm)||(t._tzm=e._tzm),d(e._isUTC)||(t._isUTC=e._isUTC),d(e._offset)||(t._offset=e._offset),d(e._pf)||(t._pf=l(e)),d(e._locale)||(t._locale=e._locale),hr.length>0)for(n in hr)r=hr[n],i=e[r],d(i)||(t[r]=i);return t}function y(t){v(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),lr===!1&&(lr=!0,n.updateOffset(this),lr=!1)}function b(t){return t instanceof y||null!=t&&null!=t._isAMomentObject}function m(t){return 0>t?Math.ceil(t):Math.floor(t)}function _(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=m(e)),n}function w(t,e,n){var r,i=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),s=0;for(r=0;i>r;r++)(n&&t[r]!==e[r]||!n&&_(t[r])!==_(e[r]))&&s++;return s+o}function g(t){n.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function x(t,e){var r=!0;return a(function(){return null!=n.deprecationHandler&&n.deprecationHandler(null,t),r&&(g(t+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),r=!1),e.apply(this,arguments)},e)}function E(t,e){null!=n.deprecationHandler&&n.deprecationHandler(t,e),fr[t]||(g(e),fr[t]=!0)}function k(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function C(t){return"[object Object]"===Object.prototype.toString.call(t)}function S(t){var e,n;for(n in t)e=t[n],k(e)?this[n]=e:this["_"+n]=e;this._config=t,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function O(t,e){var n,r=a({},t);for(n in e)u(e,n)&&(C(t[n])&&C(e[n])?(r[n]={},a(r[n],t[n]),a(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);return r}function D(t){null!=t&&this.set(t)}function M(t){return t?t.toLowerCase().replace("_","-"):t}function P(t){for(var e,n,r,i,o=0;o<t.length;){for(i=M(t[o]).split("-"),e=i.length,n=M(t[o+1]),n=n?n.split("-"):null;e>0;){if(r=N(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&w(i,n,!0)>=e-1)break;e--}o++}return null}function N(n){var r=null;if(!yr[n]&&"undefined"!=typeof e&&e&&e.exports)try{r=dr._abbr,t("./locale/"+n),A(r)}catch(i){}return yr[n]}function A(t,e){var n;return t&&(n=d(e)?R(t):T(t,e),n&&(dr=n)),dr._abbr}function T(t,e){return null!==e?(e.abbr=t,null!=yr[t]?(E("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),e=O(yr[t]._config,e)):null!=e.parentLocale&&(null!=yr[e.parentLocale]?e=O(yr[e.parentLocale]._config,e):E("parentLocaleUndefined","specified parentLocale is not defined yet")),yr[t]=new D(e),A(t),yr[t]):(delete yr[t],null)}function j(t,e){if(null!=e){var n;null!=yr[t]&&(e=O(yr[t]._config,e)),n=new D(e),n.parentLocale=yr[t],yr[t]=n,A(t)}else null!=yr[t]&&(null!=yr[t].parentLocale?yr[t]=yr[t].parentLocale:null!=yr[t]&&delete yr[t]);return yr[t]}function R(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return dr;if(!i(t)){if(e=N(t))return e;t=[t]}return P(t)}function F(){return pr(yr)}function z(t,e){var n=t.toLowerCase();br[n]=br[n+"s"]=br[e]=t}function L(t){return"string"==typeof t?br[t]||br[t.toLowerCase()]:void 0}function Y(t){var e,n,r={};for(n in t)u(t,n)&&(e=L(n),e&&(r[e]=t[n]));return r}function q(t,e){return function(r){return null!=r?(W(this,t,r),n.updateOffset(this,e),this):V(this,t)}}function V(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function W(t,e,n){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](n)}function I(t,e){var n;if("object"==typeof t)for(n in t)this.set(n,t[n]);else if(t=L(t),k(this[t]))return this[t](e);return this}function U(t,e,n){var r=""+Math.abs(t),i=e-r.length,o=t>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function B(t,e,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),t&&(gr[t]=i),e&&(gr[e[0]]=function(){return U(i.apply(this,arguments),e[1],e[2])}),n&&(gr[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function H(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function G(t){var e,n,r=t.match(mr);for(e=0,n=r.length;n>e;e++)gr[r[e]]?r[e]=gr[r[e]]:r[e]=H(r[e]);return function(e){var i,o="";for(i=0;n>i;i++)o+=r[i]instanceof Function?r[i].call(e,t):r[i];return o}}function Z(t,e){return t.isValid()?(e=$(e,t.localeData()),wr[e]=wr[e]||G(e),wr[e](t)):t.localeData().invalidDate()}function $(t,e){function n(t){return e.longDateFormat(t)||t}var r=5;for(_r.lastIndex=0;r>=0&&_r.test(t);)t=t.replace(_r,n),_r.lastIndex=0,r-=1;return t}function J(t,e,n){Yr[t]=k(e)?e:function(t,r){return t&&n?n:e}}function Q(t,e){return u(Yr,t)?Yr[t](e._strict,e._locale):new RegExp(X(t))}function X(t){return K(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,r,i){return e||n||r||i}))}function K(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function tt(t,e){var n,r=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(r=function(t,n){n[e]=_(t)}),n=0;n<t.length;n++)qr[t[n]]=r}function et(t,e){tt(t,function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)})}function nt(t,e,n){null!=e&&u(qr,t)&&qr[t](e,n._a,n,t)}function rt(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function it(t,e){return i(this._months)?this._months[t.month()]:this._months[Jr.test(e)?"format":"standalone"][t.month()]}function ot(t,e){return i(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Jr.test(e)?"format":"standalone"][t.month()]}function st(t,e,n){var r,i,o,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;12>r;++r)o=c([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?(i=vr.call(this._shortMonthsParse,s),-1!==i?i:null):(i=vr.call(this._longMonthsParse,s),-1!==i?i:null):"MMM"===e?(i=vr.call(this._shortMonthsParse,s),-1!==i?i:(i=vr.call(this._longMonthsParse,s),-1!==i?i:null)):(i=vr.call(this._longMonthsParse,s),-1!==i?i:(i=vr.call(this._shortMonthsParse,s),-1!==i?i:null))}function ut(t,e,n){var r,i,o;if(this._monthsParseExact)return st.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++){if(i=c([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function at(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=_(e);else if(e=t.localeData().monthsParse(e),"number"!=typeof e)return t;return n=Math.min(t.date(),rt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function ct(t){return null!=t?(at(this,t),n.updateOffset(this,!0),this):V(this,"Month")}function ht(){return rt(this.year(),this.month())}function lt(t){return this._monthsParseExact?(u(this,"_monthsRegex")||pt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex}function ft(t){return this._monthsParseExact?(u(this,"_monthsRegex")||pt.call(this),t?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex}function pt(){function t(t,e){return e.length-t.length}var e,n,r=[],i=[],o=[];for(e=0;12>e;e++)n=c([2e3,e]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(t),i.sort(t),o.sort(t),e=0;12>e;e++)r[e]=K(r[e]),i[e]=K(i[e]),o[e]=K(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function dt(t){var e,n=t._a;return n&&-2===l(t).overflow&&(e=n[Wr]<0||n[Wr]>11?Wr:n[Ir]<1||n[Ir]>rt(n[Vr],n[Wr])?Ir:n[Ur]<0||n[Ur]>24||24===n[Ur]&&(0!==n[Br]||0!==n[Hr]||0!==n[Gr])?Ur:n[Br]<0||n[Br]>59?Br:n[Hr]<0||n[Hr]>59?Hr:n[Gr]<0||n[Gr]>999?Gr:-1,l(t)._overflowDayOfYear&&(Vr>e||e>Ir)&&(e=Ir),l(t)._overflowWeeks&&-1===e&&(e=Zr),l(t)._overflowWeekday&&-1===e&&(e=$r),l(t).overflow=e),t}function vt(t){var e,n,r,i,o,s,u=t._i,a=ei.exec(u)||ni.exec(u);if(a){for(l(t).iso=!0,e=0,n=ii.length;n>e;e++)if(ii[e][1].exec(a[1])){i=ii[e][0],r=ii[e][2]!==!1;break}if(null==i)return void(t._isValid=!1);if(a[3]){for(e=0,n=oi.length;n>e;e++)if(oi[e][1].exec(a[3])){o=(a[2]||" ")+oi[e][0];break}if(null==o)return void(t._isValid=!1)}if(!r&&null!=o)return void(t._isValid=!1);if(a[4]){if(!ri.exec(a[4]))return void(t._isValid=!1);s="Z"}t._f=i+(o||"")+(s||""),Pt(t)}else t._isValid=!1}function yt(t){var e=si.exec(t._i);return null!==e?void(t._d=new Date(+e[1])):(vt(t),void(t._isValid===!1&&(delete t._isValid,n.createFromInputFallback(t))))}function bt(t,e,n,r,i,o,s){var u=new Date(t,e,n,r,i,o,s);return 100>t&&t>=0&&isFinite(u.getFullYear())&&u.setFullYear(t),u}function mt(t){var e=new Date(Date.UTC.apply(null,arguments));return 100>t&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function _t(t){return wt(t)?366:365}function wt(t){return t%4===0&&t%100!==0||t%400===0}function gt(){return wt(this.year())}function xt(t,e,n){var r=7+e-n,i=(7+mt(t,0,r).getUTCDay()-e)%7;return-i+r-1}function Et(t,e,n,r,i){var o,s,u=(7+n-r)%7,a=xt(t,r,i),c=1+7*(e-1)+u+a;return 0>=c?(o=t-1,s=_t(o)+c):c>_t(t)?(o=t+1,s=c-_t(t)):(o=t,s=c),{year:o,dayOfYear:s}}function kt(t,e,n){var r,i,o=xt(t.year(),e,n),s=Math.floor((t.dayOfYear()-o-1)/7)+1;return 1>s?(i=t.year()-1,r=s+Ct(i,e,n)):s>Ct(t.year(),e,n)?(r=s-Ct(t.year(),e,n),i=t.year()+1):(i=t.year(),r=s),{week:r,year:i}}function Ct(t,e,n){var r=xt(t,e,n),i=xt(t+1,e,n);return(_t(t)-r+i)/7}function St(t,e,n){return null!=t?t:null!=e?e:n}function Ot(t){var e=new Date(n.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Dt(t){var e,n,r,i,o=[];if(!t._d){for(r=Ot(t),t._w&&null==t._a[Ir]&&null==t._a[Wr]&&Mt(t),t._dayOfYear&&(i=St(t._a[Vr],r[Vr]),t._dayOfYear>_t(i)&&(l(t)._overflowDayOfYear=!0),n=mt(i,0,t._dayOfYear),t._a[Wr]=n.getUTCMonth(),t._a[Ir]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=o[e]=r[e];for(;7>e;e++)t._a[e]=o[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Ur]&&0===t._a[Br]&&0===t._a[Hr]&&0===t._a[Gr]&&(t._nextDay=!0,t._a[Ur]=0),t._d=(t._useUTC?mt:bt).apply(null,o),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Ur]=24)}}function Mt(t){var e,n,r,i,o,s,u,a;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(o=1,s=4,n=St(e.GG,t._a[Vr],kt(Lt(),1,4).year),r=St(e.W,1),i=St(e.E,1),(1>i||i>7)&&(a=!0)):(o=t._locale._week.dow,s=t._locale._week.doy,n=St(e.gg,t._a[Vr],kt(Lt(),o,s).year),r=St(e.w,1),null!=e.d?(i=e.d,(0>i||i>6)&&(a=!0)):null!=e.e?(i=e.e+o,(e.e<0||e.e>6)&&(a=!0)):i=o),1>r||r>Ct(n,o,s)?l(t)._overflowWeeks=!0:null!=a?l(t)._overflowWeekday=!0:(u=Et(n,r,i,o,s),t._a[Vr]=u.year,t._dayOfYear=u.dayOfYear)}function Pt(t){if(t._f===n.ISO_8601)return void vt(t);t._a=[],l(t).empty=!0;var e,r,i,o,s,u=""+t._i,a=u.length,c=0;for(i=$(t._f,t._locale).match(mr)||[],e=0;e<i.length;e++)o=i[e],r=(u.match(Q(o,t))||[])[0],r&&(s=u.substr(0,u.indexOf(r)),s.length>0&&l(t).unusedInput.push(s),u=u.slice(u.indexOf(r)+r.length),c+=r.length),gr[o]?(r?l(t).empty=!1:l(t).unusedTokens.push(o),nt(o,r,t)):t._strict&&!r&&l(t).unusedTokens.push(o);l(t).charsLeftOver=a-c,u.length>0&&l(t).unusedInput.push(u),l(t).bigHour===!0&&t._a[Ur]<=12&&t._a[Ur]>0&&(l(t).bigHour=void 0),l(t).parsedDateParts=t._a.slice(0),l(t).meridiem=t._meridiem,t._a[Ur]=Nt(t._locale,t._a[Ur],t._meridiem),Dt(t),dt(t)}function Nt(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(r=t.isPM(n),r&&12>e&&(e+=12),r||12!==e||(e=0),e):e}function At(t){var e,n,r,i,o;if(0===t._f.length)return l(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<t._f.length;i++)o=0,e=v({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],Pt(e),f(e)&&(o+=l(e).charsLeftOver,o+=10*l(e).unusedTokens.length,l(e).score=o,(null==r||r>o)&&(r=o,n=e));a(t,n||e)}function Tt(t){if(!t._d){var e=Y(t._i);t._a=s([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),Dt(t)}}function jt(t){var e=new y(dt(Rt(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Rt(t){var e=t._i,n=t._f;return t._locale=t._locale||R(t._l),null===e||void 0===n&&""===e?p({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),b(e)?new y(dt(e)):(i(n)?At(t):n?Pt(t):o(e)?t._d=e:Ft(t),f(t)||(t._d=null),t))}function Ft(t){var e=t._i;void 0===e?t._d=new Date(n.now()):o(e)?t._d=new Date(e.valueOf()):"string"==typeof e?yt(t):i(e)?(t._a=s(e.slice(0),function(t){return parseInt(t,10)}),Dt(t)):"object"==typeof e?Tt(t):"number"==typeof e?t._d=new Date(e):n.createFromInputFallback(t)}function zt(t,e,n,r,i){var o={};return"boolean"==typeof n&&(r=n,n=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=t,o._f=e,o._strict=r,jt(o)}function Lt(t,e,n,r){return zt(t,e,n,r,!1)}function Yt(t,e){var n,r;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return Lt();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}function qt(){var t=[].slice.call(arguments,0);return Yt("isBefore",t)}function Vt(){var t=[].slice.call(arguments,0);return Yt("isAfter",t)}function Wt(t){var e=Y(t),n=e.year||0,r=e.quarter||0,i=e.month||0,o=e.week||0,s=e.day||0,u=e.hour||0,a=e.minute||0,c=e.second||0,h=e.millisecond||0;this._milliseconds=+h+1e3*c+6e4*a+1e3*u*60*60,this._days=+s+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=R(),this._bubble()}function It(t){return t instanceof Wt}function Ut(t,e){B(t,0,0,function(){var t=this.utcOffset(),n="+";return 0>t&&(t=-t,n="-"),n+U(~~(t/60),2)+e+U(~~t%60,2)})}function Bt(t,e){var n=(e||"").match(t)||[],r=n[n.length-1]||[],i=(r+"").match(li)||["-",0,0],o=+(60*i[1])+_(i[2]);return"+"===i[0]?o:-o}function Ht(t,e){var r,i;return e._isUTC?(r=e.clone(),i=(b(t)||o(t)?t.valueOf():Lt(t).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),n.updateOffset(r,!1),r):Lt(t).local()}function Gt(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Zt(t,e){var r,i=this._offset||0;return this.isValid()?null!=t?("string"==typeof t?t=Bt(Fr,t):Math.abs(t)<16&&(t=60*t),!this._isUTC&&e&&(r=Gt(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==t&&(!e||this._changeInProgress?le(this,oe(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:Gt(this):null!=t?this:NaN}function $t(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Jt(t){return this.utcOffset(0,t)}function Qt(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Gt(this),"m")),this}function Xt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Bt(Rr,this._i)),this}function Kt(t){return this.isValid()?(t=t?Lt(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function te(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function ee(){if(!d(this._isDSTShifted))return this._isDSTShifted;var t={};if(v(t,this),t=Rt(t),t._a){var e=t._isUTC?c(t._a):Lt(t._a);this._isDSTShifted=this.isValid()&&w(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function ne(){return this.isValid()?!this._isUTC:!1}function re(){return this.isValid()?this._isUTC:!1}function ie(){return this.isValid()?this._isUTC&&0===this._offset:!1}function oe(t,e){var n,r,i,o=t,s=null;return It(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(o={},e?o[e]=t:o.milliseconds=t):(s=fi.exec(t))?(n="-"===s[1]?-1:1,o={y:0,d:_(s[Ir])*n,h:_(s[Ur])*n,m:_(s[Br])*n,s:_(s[Hr])*n,ms:_(s[Gr])*n}):(s=pi.exec(t))?(n="-"===s[1]?-1:1,o={y:se(s[2],n),M:se(s[3],n),w:se(s[4],n),d:se(s[5],n),h:se(s[6],n),m:se(s[7],n),s:se(s[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(i=ae(Lt(o.from),Lt(o.to)),o={},o.ms=i.milliseconds,o.M=i.months),r=new Wt(o),It(t)&&u(t,"_locale")&&(r._locale=t._locale),r}function se(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function ue(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function ae(t,e){var n;return t.isValid()&&e.isValid()?(e=Ht(e,t),t.isBefore(e)?n=ue(t,e):(n=ue(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function ce(t){return 0>t?-1*Math.round(-1*t):Math.round(t)}function he(t,e){return function(n,r){var i,o;return null===r||isNaN(+r)||(E(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),o=n,n=r,r=o),n="string"==typeof n?+n:n,i=oe(n,r),le(this,i,t),this}}function le(t,e,r,i){var o=e._milliseconds,s=ce(e._days),u=ce(e._months);t.isValid()&&(i=null==i?!0:i,o&&t._d.setTime(t._d.valueOf()+o*r),s&&W(t,"Date",V(t,"Date")+s*r),u&&at(t,V(t,"Month")+u*r),i&&n.updateOffset(t,s||u))}function fe(t,e){var n=t||Lt(),r=Ht(n,this).startOf("day"),i=this.diff(r,"days",!0),o=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse",s=e&&(k(e[o])?e[o]():e[o]);return this.format(s||this.localeData().calendar(o,this,Lt(n)))}function pe(){return new y(this)}function de(t,e){var n=b(t)?t:Lt(t);return this.isValid()&&n.isValid()?(e=L(d(e)?"millisecond":e),"millisecond"===e?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function ve(t,e){var n=b(t)?t:Lt(t);return this.isValid()&&n.isValid()?(e=L(d(e)?"millisecond":e),"millisecond"===e?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function ye(t,e,n,r){return r=r||"()",("("===r[0]?this.isAfter(t,n):!this.isBefore(t,n))&&(")"===r[1]?this.isBefore(e,n):!this.isAfter(e,n))}function be(t,e){var n,r=b(t)?t:Lt(t);return this.isValid()&&r.isValid()?(e=L(e||"millisecond"),"millisecond"===e?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf())):!1}function me(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function _e(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function we(t,e,n){var r,i,o,s;return this.isValid()?(r=Ht(t,this),r.isValid()?(i=6e4*(r.utcOffset()-this.utcOffset()),e=L(e),"year"===e||"month"===e||"quarter"===e?(s=ge(this,r),"quarter"===e?s/=3:"year"===e&&(s/=12)):(o=this-r,s="second"===e?o/1e3:"minute"===e?o/6e4:"hour"===e?o/36e5:"day"===e?(o-i)/864e5:"week"===e?(o-i)/6048e5:o),n?s:m(s)):NaN):NaN}function ge(t,e){var n,r,i=12*(e.year()-t.year())+(e.month()-t.month()),o=t.clone().add(i,"months");return 0>e-o?(n=t.clone().add(i-1,"months"),r=(e-o)/(o-n)):(n=t.clone().add(i+1,"months"),r=(e-o)/(n-o)),-(i+r)||0}function xe(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Ee(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?k(Date.prototype.toISOString)?this.toDate().toISOString():Z(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Z(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ke(t){t||(t=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var e=Z(this,t);return this.localeData().postformat(e)}function Ce(t,e){return this.isValid()&&(b(t)&&t.isValid()||Lt(t).isValid())?oe({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Se(t){return this.from(Lt(),t)}function Oe(t,e){return this.isValid()&&(b(t)&&t.isValid()||Lt(t).isValid())?oe({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function De(t){return this.to(Lt(),t)}function Me(t){var e;return void 0===t?this._locale._abbr:(e=R(t),null!=e&&(this._locale=e),this)}function Pe(){return this._locale}function Ne(t){switch(t=L(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function Ae(t){return t=L(t),void 0===t||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function Te(){return this._d.valueOf()-6e4*(this._offset||0)}function je(){return Math.floor(this.valueOf()/1e3)}function Re(){return this._offset?new Date(this.valueOf()):this._d}function Fe(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function ze(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Le(){return this.isValid()?this.toISOString():null}function Ye(){return f(this)}function qe(){return a({},l(this))}function Ve(){return l(this).overflow}function We(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ie(t,e){B(0,[t,t.length],0,e)}function Ue(t){return Ze.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Be(t){return Ze.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function He(){return Ct(this.year(),1,4)}function Ge(){var t=this.localeData()._week;return Ct(this.year(),t.dow,t.doy)}function Ze(t,e,n,r,i){var o;return null==t?kt(this,r,i).year:(o=Ct(t,r,i),e>o&&(e=o),$e.call(this,t,e,n,r,i))}function $e(t,e,n,r,i){var o=Et(t,e,n,r,i),s=mt(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Je(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Qe(t){return kt(t,this._week.dow,this._week.doy).week}function Xe(){return this._week.dow}function Ke(){return this._week.doy}function tn(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function en(t){var e=kt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function nn(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function rn(t,e){return i(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]}function on(t){return this._weekdaysShort[t.day()]}function sn(t){return this._weekdaysMin[t.day()]}function un(t,e,n){var r,i,o,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;7>r;++r)o=c([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?(i=vr.call(this._weekdaysParse,s),-1!==i?i:null):"ddd"===e?(i=vr.call(this._shortWeekdaysParse,s),-1!==i?i:null):(i=vr.call(this._minWeekdaysParse,s),-1!==i?i:null):"dddd"===e?(i=vr.call(this._weekdaysParse,s),-1!==i?i:(i=vr.call(this._shortWeekdaysParse,s),-1!==i?i:(i=vr.call(this._minWeekdaysParse,s),-1!==i?i:null))):"ddd"===e?(i=vr.call(this._shortWeekdaysParse,s),-1!==i?i:(i=vr.call(this._weekdaysParse,s),-1!==i?i:(i=vr.call(this._minWeekdaysParse,s),-1!==i?i:null))):(i=vr.call(this._minWeekdaysParse,s),-1!==i?i:(i=vr.call(this._weekdaysParse,s),-1!==i?i:(i=vr.call(this._shortWeekdaysParse,s),-1!==i?i:null)))}function an(t,e,n){var r,i,o;if(this._weekdaysParseExact)return un.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;7>r;r++){if(i=c([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}}function cn(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=nn(t,this.localeData()),this.add(t-e,"d")):e}function hn(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function ln(t){return this.isValid()?null==t?this.day()||7:this.day(this.day()%7?t:t-7):null!=t?this:NaN}function fn(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||vn.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex}function pn(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||vn.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}function dn(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||vn.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}function vn(){function t(t,e){return e.length-t.length}var e,n,r,i,o,s=[],u=[],a=[],h=[];for(e=0;7>e;e++)n=c([2e3,1]).day(e),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),s.push(r),u.push(i),a.push(o),h.push(r),h.push(i),h.push(o);for(s.sort(t),u.sort(t),a.sort(t),h.sort(t),e=0;7>e;e++)u[e]=K(u[e]),a[e]=K(a[e]),h[e]=K(h[e]);this._weekdaysRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function yn(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function bn(){return this.hours()%12||12}function mn(){return this.hours()||24}function _n(t,e){B(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function wn(t,e){return e._meridiemParse}function gn(t){return"p"===(t+"").toLowerCase().charAt(0)}function xn(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function En(t,e){e[Gr]=_(1e3*("0."+t))}function kn(){return this._isUTC?"UTC":""}function Cn(){return this._isUTC?"Coordinated Universal Time":""}function Sn(t){return Lt(1e3*t)}function On(){return Lt.apply(null,arguments).parseZone()}function Dn(t,e,n){var r=this._calendar[t];return k(r)?r.call(e,n):r}function Mn(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function Pn(){return this._invalidDate}function Nn(t){return this._ordinal.replace("%d",t)}function An(t){return t}function Tn(t,e,n,r){var i=this._relativeTime[n];return k(i)?i(t,e,n,r):i.replace(/%d/i,t)}function jn(t,e){var n=this._relativeTime[t>0?"future":"past"];return k(n)?n(e):n.replace(/%s/i,e)}function Rn(t,e,n,r){var i=R(),o=c().set(r,e);return i[n](o,t)}function Fn(t,e,n){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return Rn(t,e,n,"month");var r,i=[];for(r=0;12>r;r++)i[r]=Rn(t,r,n,"month");return i}function zn(t,e,n,r){"boolean"==typeof t?("number"==typeof e&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,"number"==typeof e&&(n=e,e=void 0),e=e||"");var i=R(),o=t?i._week.dow:0;if(null!=n)return Rn(e,(n+o)%7,r,"day");var s,u=[];for(s=0;7>s;s++)u[s]=Rn(e,(s+o)%7,r,"day");return u}function Ln(t,e){return Fn(t,e,"months")}function Yn(t,e){return Fn(t,e,"monthsShort")}function qn(t,e,n){return zn(t,e,n,"weekdays")}function Vn(t,e,n){return zn(t,e,n,"weekdaysShort")}function Wn(t,e,n){return zn(t,e,n,"weekdaysMin")}function In(){var t=this._data;return this._milliseconds=qi(this._milliseconds),this._days=qi(this._days),this._months=qi(this._months),t.milliseconds=qi(t.milliseconds),t.seconds=qi(t.seconds),t.minutes=qi(t.minutes),t.hours=qi(t.hours),t.months=qi(t.months),t.years=qi(t.years),this}function Un(t,e,n,r){var i=oe(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function Bn(t,e){return Un(this,t,e,1)}function Hn(t,e){return Un(this,t,e,-1)}function Gn(t){return 0>t?Math.floor(t):Math.ceil(t)}function Zn(){var t,e,n,r,i,o=this._milliseconds,s=this._days,u=this._months,a=this._data;return o>=0&&s>=0&&u>=0||0>=o&&0>=s&&0>=u||(o+=864e5*Gn(Jn(u)+s),s=0,u=0),a.milliseconds=o%1e3,t=m(o/1e3),a.seconds=t%60,e=m(t/60),a.minutes=e%60,n=m(e/60),a.hours=n%24,s+=m(n/24),i=m($n(s)),u+=i,s-=Gn(Jn(i)),r=m(u/12),u%=12,a.days=s,a.months=u,a.years=r,this}function $n(t){return 4800*t/146097}function Jn(t){return 146097*t/4800}function Qn(t){var e,n,r=this._milliseconds;if(t=L(t),"month"===t||"year"===t)return e=this._days+r/864e5,n=this._months+$n(e),"month"===t?n:n/12;switch(e=this._days+Math.round(Jn(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}}function Xn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*_(this._months/12)}function Kn(t){return function(){return this.as(t)}}function tr(t){return t=L(t),this[t+"s"]()}function er(t){return function(){return this._data[t]}}function nr(){return m(this.days()/7)}function rr(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}function ir(t,e,n){var r=oe(t).abs(),i=no(r.as("s")),o=no(r.as("m")),s=no(r.as("h")),u=no(r.as("d")),a=no(r.as("M")),c=no(r.as("y")),h=i<ro.s&&["s",i]||1>=o&&["m"]||o<ro.m&&["mm",o]||1>=s&&["h"]||s<ro.h&&["hh",s]||1>=u&&["d"]||u<ro.d&&["dd",u]||1>=a&&["M"]||a<ro.M&&["MM",a]||1>=c&&["y"]||["yy",c];return h[2]=e,h[3]=+t>0,h[4]=n,rr.apply(null,h)}function or(t,e){return void 0===ro[t]?!1:void 0===e?ro[t]:(ro[t]=e,!0)}function sr(t){var e=this.localeData(),n=ir(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function ur(){var t,e,n,r=io(this._milliseconds)/1e3,i=io(this._days),o=io(this._months);t=m(r/60),e=m(t/60),r%=60,t%=60,n=m(o/12),o%=12;var s=n,u=o,a=i,c=e,h=t,l=r,f=this.asSeconds();return f?(0>f?"-":"")+"P"+(s?s+"Y":"")+(u?u+"M":"")+(a?a+"D":"")+(c||h||l?"T":"")+(c?c+"H":"")+(h?h+"M":"")+(l?l+"S":""):"P0D"}var ar,cr;cr=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,r=0;n>r;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};var hr=n.momentProperties=[],lr=!1,fr={};n.suppressDeprecationWarnings=!1,n.deprecationHandler=null;var pr;pr=Object.keys?Object.keys:function(t){
var e,n=[];for(e in t)u(t,e)&&n.push(e);return n};var dr,vr,yr={},br={},mr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,_r=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,wr={},gr={},xr=/\d/,Er=/\d\d/,kr=/\d{3}/,Cr=/\d{4}/,Sr=/[+-]?\d{6}/,Or=/\d\d?/,Dr=/\d\d\d\d?/,Mr=/\d\d\d\d\d\d?/,Pr=/\d{1,3}/,Nr=/\d{1,4}/,Ar=/[+-]?\d{1,6}/,Tr=/\d+/,jr=/[+-]?\d+/,Rr=/Z|[+-]\d\d:?\d\d/gi,Fr=/Z|[+-]\d\d(?::?\d\d)?/gi,zr=/[+-]?\d+(\.\d{1,3})?/,Lr=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Yr={},qr={},Vr=0,Wr=1,Ir=2,Ur=3,Br=4,Hr=5,Gr=6,Zr=7,$r=8;vr=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},B("M",["MM",2],"Mo",function(){return this.month()+1}),B("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),B("MMMM",0,0,function(t){return this.localeData().months(this,t)}),z("month","M"),J("M",Or),J("MM",Or,Er),J("MMM",function(t,e){return e.monthsShortRegex(t)}),J("MMMM",function(t,e){return e.monthsRegex(t)}),tt(["M","MM"],function(t,e){e[Wr]=_(t)-1}),tt(["MMM","MMMM"],function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[Wr]=i:l(n).invalidMonth=t});var Jr=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Qr="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Xr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Kr=Lr,ti=Lr,ei=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ni=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ri=/Z|[+-]\d\d(?::?\d\d)?/,ii=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],oi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],si=/^\/?Date\((\-?\d+)/i;n.createFromInputFallback=x("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),B("Y",0,0,function(){var t=this.year();return 9999>=t?""+t:"+"+t}),B(0,["YY",2],0,function(){return this.year()%100}),B(0,["YYYY",4],0,"year"),B(0,["YYYYY",5],0,"year"),B(0,["YYYYYY",6,!0],0,"year"),z("year","y"),J("Y",jr),J("YY",Or,Er),J("YYYY",Nr,Cr),J("YYYYY",Ar,Sr),J("YYYYYY",Ar,Sr),tt(["YYYYY","YYYYYY"],Vr),tt("YYYY",function(t,e){e[Vr]=2===t.length?n.parseTwoDigitYear(t):_(t)}),tt("YY",function(t,e){e[Vr]=n.parseTwoDigitYear(t)}),tt("Y",function(t,e){e[Vr]=parseInt(t,10)}),n.parseTwoDigitYear=function(t){return _(t)+(_(t)>68?1900:2e3)};var ui=q("FullYear",!0);n.ISO_8601=function(){};var ai=x("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Lt.apply(null,arguments);return this.isValid()&&t.isValid()?this>t?this:t:p()}),ci=x("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Lt.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:p()}),hi=function(){return Date.now?Date.now():+new Date};Ut("Z",":"),Ut("ZZ",""),J("Z",Fr),J("ZZ",Fr),tt(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Bt(Fr,t)});var li=/([\+\-]|\d\d)/gi;n.updateOffset=function(){};var fi=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,pi=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;oe.fn=Wt.prototype;var di=he(1,"add"),vi=he(-1,"subtract");n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var yi=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});B(0,["gg",2],0,function(){return this.weekYear()%100}),B(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ie("gggg","weekYear"),Ie("ggggg","weekYear"),Ie("GGGG","isoWeekYear"),Ie("GGGGG","isoWeekYear"),z("weekYear","gg"),z("isoWeekYear","GG"),J("G",jr),J("g",jr),J("GG",Or,Er),J("gg",Or,Er),J("GGGG",Nr,Cr),J("gggg",Nr,Cr),J("GGGGG",Ar,Sr),J("ggggg",Ar,Sr),et(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,r){e[r.substr(0,2)]=_(t)}),et(["gg","GG"],function(t,e,r,i){e[i]=n.parseTwoDigitYear(t)}),B("Q",0,"Qo","quarter"),z("quarter","Q"),J("Q",xr),tt("Q",function(t,e){e[Wr]=3*(_(t)-1)}),B("w",["ww",2],"wo","week"),B("W",["WW",2],"Wo","isoWeek"),z("week","w"),z("isoWeek","W"),J("w",Or),J("ww",Or,Er),J("W",Or),J("WW",Or,Er),et(["w","ww","W","WW"],function(t,e,n,r){e[r.substr(0,1)]=_(t)});var bi={dow:0,doy:6};B("D",["DD",2],"Do","date"),z("date","D"),J("D",Or),J("DD",Or,Er),J("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),tt(["D","DD"],Ir),tt("Do",function(t,e){e[Ir]=_(t.match(Or)[0],10)});var mi=q("Date",!0);B("d",0,"do","day"),B("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),B("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),B("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),B("e",0,0,"weekday"),B("E",0,0,"isoWeekday"),z("day","d"),z("weekday","e"),z("isoWeekday","E"),J("d",Or),J("e",Or),J("E",Or),J("dd",function(t,e){return e.weekdaysMinRegex(t)}),J("ddd",function(t,e){return e.weekdaysShortRegex(t)}),J("dddd",function(t,e){return e.weekdaysRegex(t)}),et(["dd","ddd","dddd"],function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);null!=i?e.d=i:l(n).invalidWeekday=t}),et(["d","e","E"],function(t,e,n,r){e[r]=_(t)});var _i="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),wi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),gi="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),xi=Lr,Ei=Lr,ki=Lr;B("DDD",["DDDD",3],"DDDo","dayOfYear"),z("dayOfYear","DDD"),J("DDD",Pr),J("DDDD",kr),tt(["DDD","DDDD"],function(t,e,n){n._dayOfYear=_(t)}),B("H",["HH",2],0,"hour"),B("h",["hh",2],0,bn),B("k",["kk",2],0,mn),B("hmm",0,0,function(){return""+bn.apply(this)+U(this.minutes(),2)}),B("hmmss",0,0,function(){return""+bn.apply(this)+U(this.minutes(),2)+U(this.seconds(),2)}),B("Hmm",0,0,function(){return""+this.hours()+U(this.minutes(),2)}),B("Hmmss",0,0,function(){return""+this.hours()+U(this.minutes(),2)+U(this.seconds(),2)}),_n("a",!0),_n("A",!1),z("hour","h"),J("a",wn),J("A",wn),J("H",Or),J("h",Or),J("HH",Or,Er),J("hh",Or,Er),J("hmm",Dr),J("hmmss",Mr),J("Hmm",Dr),J("Hmmss",Mr),tt(["H","HH"],Ur),tt(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),tt(["h","hh"],function(t,e,n){e[Ur]=_(t),l(n).bigHour=!0}),tt("hmm",function(t,e,n){var r=t.length-2;e[Ur]=_(t.substr(0,r)),e[Br]=_(t.substr(r)),l(n).bigHour=!0}),tt("hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[Ur]=_(t.substr(0,r)),e[Br]=_(t.substr(r,2)),e[Hr]=_(t.substr(i)),l(n).bigHour=!0}),tt("Hmm",function(t,e,n){var r=t.length-2;e[Ur]=_(t.substr(0,r)),e[Br]=_(t.substr(r))}),tt("Hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[Ur]=_(t.substr(0,r)),e[Br]=_(t.substr(r,2)),e[Hr]=_(t.substr(i))});var Ci=/[ap]\.?m?\.?/i,Si=q("Hours",!0);B("m",["mm",2],0,"minute"),z("minute","m"),J("m",Or),J("mm",Or,Er),tt(["m","mm"],Br);var Oi=q("Minutes",!1);B("s",["ss",2],0,"second"),z("second","s"),J("s",Or),J("ss",Or,Er),tt(["s","ss"],Hr);var Di=q("Seconds",!1);B("S",0,0,function(){return~~(this.millisecond()/100)}),B(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),B(0,["SSS",3],0,"millisecond"),B(0,["SSSS",4],0,function(){return 10*this.millisecond()}),B(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),B(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),B(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),B(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),B(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),z("millisecond","ms"),J("S",Pr,xr),J("SS",Pr,Er),J("SSS",Pr,kr);var Mi;for(Mi="SSSS";Mi.length<=9;Mi+="S")J(Mi,Tr);for(Mi="S";Mi.length<=9;Mi+="S")tt(Mi,En);var Pi=q("Milliseconds",!1);B("z",0,0,"zoneAbbr"),B("zz",0,0,"zoneName");var Ni=y.prototype;Ni.add=di,Ni.calendar=fe,Ni.clone=pe,Ni.diff=we,Ni.endOf=Ae,Ni.format=ke,Ni.from=Ce,Ni.fromNow=Se,Ni.to=Oe,Ni.toNow=De,Ni.get=I,Ni.invalidAt=Ve,Ni.isAfter=de,Ni.isBefore=ve,Ni.isBetween=ye,Ni.isSame=be,Ni.isSameOrAfter=me,Ni.isSameOrBefore=_e,Ni.isValid=Ye,Ni.lang=yi,Ni.locale=Me,Ni.localeData=Pe,Ni.max=ci,Ni.min=ai,Ni.parsingFlags=qe,Ni.set=I,Ni.startOf=Ne,Ni.subtract=vi,Ni.toArray=Fe,Ni.toObject=ze,Ni.toDate=Re,Ni.toISOString=Ee,Ni.toJSON=Le,Ni.toString=xe,Ni.unix=je,Ni.valueOf=Te,Ni.creationData=We,Ni.year=ui,Ni.isLeapYear=gt,Ni.weekYear=Ue,Ni.isoWeekYear=Be,Ni.quarter=Ni.quarters=Je,Ni.month=ct,Ni.daysInMonth=ht,Ni.week=Ni.weeks=tn,Ni.isoWeek=Ni.isoWeeks=en,Ni.weeksInYear=Ge,Ni.isoWeeksInYear=He,Ni.date=mi,Ni.day=Ni.days=cn,Ni.weekday=hn,Ni.isoWeekday=ln,Ni.dayOfYear=yn,Ni.hour=Ni.hours=Si,Ni.minute=Ni.minutes=Oi,Ni.second=Ni.seconds=Di,Ni.millisecond=Ni.milliseconds=Pi,Ni.utcOffset=Zt,Ni.utc=Jt,Ni.local=Qt,Ni.parseZone=Xt,Ni.hasAlignedHourOffset=Kt,Ni.isDST=te,Ni.isDSTShifted=ee,Ni.isLocal=ne,Ni.isUtcOffset=re,Ni.isUtc=ie,Ni.isUTC=ie,Ni.zoneAbbr=kn,Ni.zoneName=Cn,Ni.dates=x("dates accessor is deprecated. Use date instead.",mi),Ni.months=x("months accessor is deprecated. Use month instead",ct),Ni.years=x("years accessor is deprecated. Use year instead",ui),Ni.zone=x("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",$t);var Ai=Ni,Ti={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},ji={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Ri="Invalid date",Fi="%d",zi=/\d{1,2}/,Li={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Yi=D.prototype;Yi._calendar=Ti,Yi.calendar=Dn,Yi._longDateFormat=ji,Yi.longDateFormat=Mn,Yi._invalidDate=Ri,Yi.invalidDate=Pn,Yi._ordinal=Fi,Yi.ordinal=Nn,Yi._ordinalParse=zi,Yi.preparse=An,Yi.postformat=An,Yi._relativeTime=Li,Yi.relativeTime=Tn,Yi.pastFuture=jn,Yi.set=S,Yi.months=it,Yi._months=Qr,Yi.monthsShort=ot,Yi._monthsShort=Xr,Yi.monthsParse=ut,Yi._monthsRegex=ti,Yi.monthsRegex=ft,Yi._monthsShortRegex=Kr,Yi.monthsShortRegex=lt,Yi.week=Qe,Yi._week=bi,Yi.firstDayOfYear=Ke,Yi.firstDayOfWeek=Xe,Yi.weekdays=rn,Yi._weekdays=_i,Yi.weekdaysMin=sn,Yi._weekdaysMin=gi,Yi.weekdaysShort=on,Yi._weekdaysShort=wi,Yi.weekdaysParse=an,Yi._weekdaysRegex=xi,Yi.weekdaysRegex=fn,Yi._weekdaysShortRegex=Ei,Yi.weekdaysShortRegex=pn,Yi._weekdaysMinRegex=ki,Yi.weekdaysMinRegex=dn,Yi.isPM=gn,Yi._meridiemParse=Ci,Yi.meridiem=xn,A("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===_(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),n.lang=x("moment.lang is deprecated. Use moment.locale instead.",A),n.langData=x("moment.langData is deprecated. Use moment.localeData instead.",R);var qi=Math.abs,Vi=Kn("ms"),Wi=Kn("s"),Ii=Kn("m"),Ui=Kn("h"),Bi=Kn("d"),Hi=Kn("w"),Gi=Kn("M"),Zi=Kn("y"),$i=er("milliseconds"),Ji=er("seconds"),Qi=er("minutes"),Xi=er("hours"),Ki=er("days"),to=er("months"),eo=er("years"),no=Math.round,ro={s:45,m:45,h:22,d:26,M:11},io=Math.abs,oo=Wt.prototype;oo.abs=In,oo.add=Bn,oo.subtract=Hn,oo.as=Qn,oo.asMilliseconds=Vi,oo.asSeconds=Wi,oo.asMinutes=Ii,oo.asHours=Ui,oo.asDays=Bi,oo.asWeeks=Hi,oo.asMonths=Gi,oo.asYears=Zi,oo.valueOf=Xn,oo._bubble=Zn,oo.get=tr,oo.milliseconds=$i,oo.seconds=Ji,oo.minutes=Qi,oo.hours=Xi,oo.days=Ki,oo.weeks=nr,oo.months=to,oo.years=eo,oo.humanize=sr,oo.toISOString=ur,oo.toString=ur,oo.toJSON=ur,oo.locale=Me,oo.localeData=Pe,oo.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ur),oo.lang=yi,B("X",0,0,"unix"),B("x",0,0,"valueOf"),J("x",jr),J("X",zr),tt("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),tt("x",function(t,e,n){n._d=new Date(_(t))}),n.version="2.13.0",r(Lt),n.fn=Ai,n.min=qt,n.max=Vt,n.now=hi,n.utc=c,n.unix=Sn,n.months=Ln,n.isDate=o,n.locale=A,n.invalid=p,n.duration=oe,n.isMoment=b,n.weekdays=qn,n.parseZone=On,n.localeData=R,n.isDuration=It,n.monthsShort=Yn,n.weekdaysMin=Wn,n.defineLocale=T,n.updateLocale=j,n.locales=F,n.weekdaysShort=Vn,n.normalizeUnits=L,n.relativeTimeThreshold=or,n.prototype=Ai;var so=n;return so})},{}],50:[function(t,e,n){"use strict";function r(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}e.exports=Object.assign||function(t,e){for(var n,i,o=r(t),s=1;s<arguments.length;s++){n=arguments[s],i=Object.keys(Object(n));for(var u=0;u<i.length;u++)o[i[u]]=n[i[u]]}return o}},{}],51:[function(t,e,n){function r(){h=!1,u.length?c=u.concat(c):l=-1,c.length&&i()}function i(){if(!h){var t=setTimeout(r);h=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,h=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function s(){}var u,a=e.exports={},c=[],h=!1,l=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new o(t,e)),1!==c.length||h||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=s,a.addListener=s,a.once=s,a.off=s,a.removeListener=s,a.removeAllListeners=s,a.emit=s,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],52:[function(t,e,n){(function(t,r){(function(i){function o(t){return t&&t.Object===Object?t:null}function s(t){for(var e=[],n=0,r=t.length;r>n;n++)e.push(t[n]);return e}function u(t){return function(){try{return t.apply(this,arguments)}catch(e){return ee.e=e,ee}}}function a(t){throw t}function c(t,e){if(re&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(ue)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+ue+"\n");t.stack=h(i)}}function h(t){for(var e=t.split("\n"),n=[],r=0,i=e.length;i>r;r++){var o=e[r];l(o)||f(o)||!o||n.push(o)}return n.join("\n")}function l(t){var e=d(t);if(!e)return!1;var n=e[0],r=e[1];return n===oe&&r>=se&&zs>=r}function f(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function p(){if(re)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=d(n);if(!r)return;return oe=r[0],r[1]}}function d(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function v(t,e,n,r,o,s){var u=Ze(t),a=u.length,c=Ze(e),h=c.length;if(a!==h&&!r)return!1;for(var l,f=a;f--;)if(l=u[f],!(r?l in e:Be.call(e,l)))return!1;for(var p=r;++f<a;){l=u[f];var d,v=t[l],y=e[l];if(!(d===i?n(v,y,r,o,s):d))return!1;p||(p="constructor"===l)}if(!p){var b=t.constructor,m=e.constructor;if(b!==m&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m))return!1}return!0}function y(t,e,n){switch(n){case xe:case Ee:return+t===+e;case ke:return t.name===e.name&&t.message===e.message;case Oe:return t!==+t?e!==+e:t===+e;case Me:case Ne:return t===e+""}return!1}function b(t){return!!t&&"object"==typeof t}function m(t){return"number"==typeof t&&t>-1&&t%1===0&&Ge>=t}function _(t){return b(t)&&m(t.length)&&!!Ie[He.call(t)]}function w(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function g(t,e,n,r,o,s){var u=-1,a=t.length,c=e.length;if(a!==c&&!(r&&c>a))return!1;for(;++u<a;){var h,l=t[u],f=e[u];if(h!==i){if(h)continue;return!1}if(r){if(!w(e,function(t){return l===t||n(l,t,r,o,s)}))return!1}else if(l!==f&&!n(l,f,r,o,s))return!1}return!0}function x(t,e,n,r,i,o){var s=Je(t),u=Je(e),a=ge,c=ge;s||(a=He.call(t),a===we?a=De:a!==De&&(s=_(t))),u||(c=He.call(e),c===we&&(c=De));var h=a===De&&!$e(t),l=c===De&&!$e(e),f=a===c;if(f&&!s&&!h)return y(t,e,a);if(!r){var p=h&&Be.call(t,"__wrapped__"),d=l&&Be.call(e,"__wrapped__");if(p||d)return n(p?t.value():t,d?e.value():e,r,i,o)}if(!f)return!1;i||(i=[]),o||(o=[]);for(var b=i.length;b--;)if(i[b]===t)return o[b]===e;i.push(t),o.push(e);var m=(s?g:v)(t,e,n,r,i,o);return i.pop(),o.pop(),m}function E(t,e,n,r,i){return t===e?!0:null==t||null==e||!ot(t)&&!b(e)?t!==t&&e!==e:x(t,e,E,n,r,i)}function k(t,e){for(var n=new Array(t),r=0;t>r;r++)n[r]=e();return n}function C(t,e){this.id=t,this.value=e}function S(t,e){this.scheduler=t,this.disposable=e,this.isDisposed=!1}function O(t,e){e.isDisposed||(e.isDisposed=!0,e.disposable.dispose())}function D(t){this._s=t,this.isDisposed=!1}function M(t){this._s=t}function P(t){this._s=t,this._l=t.length,this._i=0}function N(t){this._a=t}function A(t){this._a=t,this._l=F(t),this._i=0}function T(t){return"number"==typeof t&&Bt.isFinite(t)}function j(t){var e,n=t[de];if(!n&&"string"==typeof t)return e=new M(t),e[de]();if(!n&&t.length!==i)return e=new N(t),e[de]();if(!n)throw new TypeError("Object is not iterable");return t[de]()}function R(t){var e=+t;return 0===e?e:isNaN(e)?e:0>e?-1:1}function F(t){var e=+t.length;return isNaN(e)?0:0!==e&&T(e)?(e=R(e)*Math.floor(Math.abs(e)),0>=e?0:e>yr?yr:e):e}function z(t,e){return wn(t)||(t=On),new mr(e,t)}function L(t,e){this.observer=t,this.parent=e}function Y(t,e){return t.amb(e)}function q(){return!1}function V(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function q(){return!1}function V(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function q(){return!1}function W(){return[]}function q(){return!1}function W(){return[]}function V(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function I(t){return function(e){return t.subscribe(e)}}function U(t){return t.toArray()}function B(t){return t.length>0}function H(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function H(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function G(t,e,n){var r=me(e,n,3);return t.map(function(e,n){var i=r(e,n,t);return Kt(i)&&(i=ar(i)),(be(i)||ye(i))&&(i=br(i)),i}).concatAll()}function Z(t,e,n){for(var r=0,i=t.length;i>r;r++)if(n(t[r],e))return r;return-1}function $(t){this.comparer=t,this.set=[]}function J(t,e){return function(n){for(var r=n,o=0;e>o;o++){var s=r[t[o]];if("undefined"==typeof s)return i;r=s}return r}}function Q(t){if(0===t.length)throw new ae;return t[0]}function X(t,e,n,r){var i=me(e,n,3);return new Ds(function(e){return t.subscribe(new lo(e,t,i,r))},t)}function K(t){return t?$n.isObservable(t)?t:Kt(t)?$n.fromPromise(t):it(t)||rt(t)?go.call(this,t):te(t)?nt.call(this,t):be(t)||ye(t)?tt.call(this,t):ot(t)?et.call(this,t):t:t}function tt(t){return $n.from(t).concatMap(function(t){return $n.isObservable(t)||ot(t)?K.call(null,t):Ht.Observable.just(t)}).toArray()}function et(t){function e(t,e){n[e]=i,o.push(t.map(function(t){n[e]=t}))}for(var n=new t.constructor,r=Object.keys(t),o=[],s=0,u=r.length;u>s;s++){var a=r[s],c=K.call(this,t[a]);c&&$n.isObservable(c)?e(c,a):n[a]=t[a]}return $n.forkJoin.apply($n,o).map(function(){return n})}function nt(t){var e=this;return new Ds(function(n){t.call(e,function(){var t=arguments[0],e=arguments[1];if(t)return n.onError(t);if(arguments.length>2){for(var r=[],i=1,o=arguments.length;o>i;i++)r.push(arguments[i]);e=r}n.onNext(e),n.onCompleted()})})}function rt(t){return te(t.next)&&te(t["throw"])}function it(t){var e=t.constructor;return e?"GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName?!0:rt(e.prototype):!1}function ot(t){return Object==t.constructor}function st(t,e,n,r){var i=new Ts;return r.push(ut(i,e,n)),t.apply(e,r),i.asObservable()}function ut(t,e,n){return function(){for(var r=arguments.length,i=new Array(r),o=0;r>o;o++)i[o]=arguments[o];if(te(n)){if(i=ne(n).apply(e,i),i===ee)return t.onError(i.e);t.onNext(i)}else i.length<=1?t.onNext(i[0]):t.onNext(i);t.onCompleted()}}function at(t,e,n,r){var i=new Ts;return r.push(ct(i,e,n)),t.apply(e,r),i.asObservable()}function ct(t,e,n){return function(){var r=arguments[0];if(r)return t.onError(r);for(var i=arguments.length,o=[],s=1;i>s;s++)o[s-1]=arguments[s];if(te(n)){var o=ne(n).apply(e,o);if(o===ee)return t.onError(o.e);t.onNext(o)}else o.length<=1?t.onNext(o[0]):t.onNext(o);t.onCompleted()}}function ht(t){return Bt.StaticNodeList?t instanceof Bt.StaticNodeList||t instanceof Bt.NodeList:"[object NodeList]"===Object.prototype.toString.call(t)}function lt(t,e,n){this._e=t,this._n=e,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function ft(t,e,n){var r=new rn,i=Object.prototype.toString.call(t);if(ht(t)||"[object HTMLCollection]"===i)for(var o=0,s=t.length;s>o;o++)r.add(ft(t.item(o),e,n));else t&&r.add(new lt(t,e,n));return r}function pt(t,e,n){return new Ds(function(r){function i(t,e){if(c[e]=t,s[e]=!0,u||(u=s.every(Zt))){if(o)return r.onError(o);var i=ne(n).apply(null,c);if(i===ee)return r.onError(i.e);r.onNext(i)}a&&c[1]&&r.onCompleted()}var o,s=[!1,!1],u=!1,a=!1,c=new Array(2);return new dn(t.subscribe(function(t){i(t,0)},function(t){c[1]?r.onError(t):o=t},function(){a=!0,c[1]&&r.onCompleted()}),e.subscribe(function(t){i(t,1)},function(t){r.onError(t)},function(){a=!0,i(!0,1)}))},t)}function U(t){return t.toArray()}function dt(t,e){return t.groupJoin(this,e,dr,function(t,e){return e})}function vt(t){var e=this;return new Ds(function(n){var r=new As,i=new rn,o=new yn(i);return n.onNext(tn(r,o)),i.add(e.subscribe(function(t){r.onNext(t)},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),Kt(t)&&(t=ar(t)),i.add(t.subscribe(function(t){r.onCompleted(),r=new As,n.onNext(tn(r,o))},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),o},e)}function yt(t){var e=this;return new Ds(function(n){function r(){var e;try{e=t()}catch(o){return void n.onError(o)}Kt(e)&&(e=ar(e));var a=new fn;i.setDisposable(a),a.setDisposable(e.take(1).subscribe(Gt,function(t){u.onError(t),n.onError(t)},function(){u.onCompleted(),u=new As,n.onNext(tn(u,s)),r()}))}var i=new pn,o=new rn(i),s=new yn(o),u=new As;return n.onNext(tn(u,s)),o.add(e.subscribe(function(t){u.onNext(t)},function(t){u.onError(t),n.onError(t)},function(){u.onCompleted(),n.onCompleted()})),r(),s},e)}function bt(t,e){return new Lo(t,e)}function V(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function mt(t){this.patterns=t}function _t(t,e){this.expression=t,this.selector=e}function wt(t){return function(e){t.onError(e)}}function gt(t,e){return function(){var n=ne(t.selector).apply(t,arguments);return n===ee?e.onError(n.e):void e.onNext(n)}}function xt(t,e,n){var r=t.get(e);if(!r){var i=new Ho(e,n);return t.set(e,i),i}return r}function Et(t,e,n){this.joinObserverArray=t,this.onNext=e,this.onCompleted=n,this.joinObservers=new Bo;for(var r=0,i=this.joinObserverArray.length;i>r;r++){var o=this.joinObserverArray[r];this.joinObservers.set(o,o)}}function kt(t,e){return new Go(t,e)}function Ct(t,e,n){return new Ds(function(r){var i=t,o=_n(e);return n.scheduleRecursiveFuture(0,i,function(t,e){if(o>0){var s=n.now();i=new Date(i.getTime()+o),i.getTime()<=s&&(i=new Date(s+o))}r.onNext(t),e(t+1,new Date(i))})})}function St(t,e,n){return t===e?new Ds(function(t){return n.schedulePeriodic(0,e,function(e){return t.onNext(e),e+1})}):lr(function(){return Ct(new Date(n.now()+t),e,n)})}function Ot(t,e,n){return new Ds(function(r){var i,o=!1,s=new pn,u=null,a=[],c=!1;return i=t.materialize().timestamp(n).subscribe(function(t){var i,h;"E"===t.value.kind?(a=[],a.push(t),u=t.value.error,h=!c):(a.push({value:t.value,timestamp:t.timestamp+e}),h=!o,o=!0),h&&(null!==u?r.onError(u):(i=new fn,s.setDisposable(i),i.setDisposable(n.scheduleRecursiveFuture(null,e,function(t,e){var i,s,h,l;if(null===u){c=!0;do h=null,a.length>0&&a[0].timestamp-n.now()<=0&&(h=a.shift().value),null!==h&&h.accept(r);while(null!==h);l=!1,s=0,a.length>0?(l=!0,s=Math.max(0,a[0].timestamp-n.now())):o=!1,i=u,c=!1,null!==i?r.onError(i):l&&e(null,s)}}))))}),new dn(i,s)},t)}function Dt(t,e,n){return lr(function(){return Ot(t,e-n.now(),n)})}function Mt(t,e,n){var r,i;return te(e)?i=e:(r=e,i=n),new Ds(function(e){function n(){a.setDisposable(t.subscribe(function(t){var n=ne(i)(t);if(n===ee)return e.onError(n.e);var r=new fn;s.add(r),r.setDisposable(n.subscribe(function(){e.onNext(t),s.remove(r),o()},function(t){e.onError(t)},function(){e.onNext(t),s.remove(r),o()}))},function(t){e.onError(t)},function(){u=!0,a.dispose(),o()}))}function o(){u&&0===s.length&&e.onCompleted()}var s=new rn,u=!1,a=new pn;return r?a.setDisposable(r.subscribe(n,function(t){e.onError(t)},n)):n(),new dn(a,s)},t)}function Pt(t,e){return new Ds(function(n){var r,i=!1,o=new pn,s=0,u=t.subscribe(function(t){var u=ne(e)(t);if(u===ee)return n.onError(u.e);Kt(u)&&(u=ar(u)),i=!0,r=t,s++;var a=s,c=new fn;o.setDisposable(c),c.setDisposable(u.subscribe(function(){i&&s===a&&n.onNext(r),i=!1,c.dispose()},function(t){n.onError(t)},function(){i&&s===a&&n.onNext(r),i=!1,c.dispose()}))},function(t){o.dispose(),n.onError(t),i=!1,s++},function(){o.dispose(),i&&n.onNext(r),n.onCompleted(),i=!1,s++});return new dn(u,o)},t)}function U(t){return t.toArray()}function U(t){return t.toArray()}function Nt(t,e,n,r){return te(e)&&(r=n,n=e,e=Er()),$n.isObservable(r)||(r=Mr(new is)),new Ds(function(i){function o(t){function e(){return l=n===h}var n=h,o=new fn;a.setDisposable(o),o.setDisposable(t.subscribe(function(){e()&&u.setDisposable(r.subscribe(i)),o.dispose()},function(t){e()&&i.onError(t)},function(){e()&&u.setDisposable(r.subscribe(i))}))}function s(){var t=!l;return t&&h++,t}var u=new pn,a=new pn,c=new fn;u.setDisposable(c);var h=0,l=!1;return o(e),c.setDisposable(t.subscribe(function(t){if(s()){i.onNext(t);var e=ne(n)(t);if(e===ee)return i.onError(e.e);o(Kt(e)?ar(e):e)}},function(t){s()&&i.onError(t)},function(){s()&&i.onCompleted()})),new dn(u,a)},t)}function At(t,e,n,r){return wn(n)&&(r=n,n=Mr(new is)),n instanceof Error&&(n=Mr(n)),wn(r)||(r=An),$n.isObservable(n)||(n=Mr(new is)),new Ds(function(i){function o(){var t=s;h.setDisposable(r.scheduleFuture(null,e,function(){c=s===t,c&&(Kt(n)&&(n=ar(n)),a.setDisposable(n.subscribe(i)))}))}var s=0,u=new fn,a=new pn,c=!1,h=new pn;return a.setDisposable(u),o(),u.setDisposable(t.subscribe(function(t){c||(s++,i.onNext(t),o())},function(t){c||(s++,i.onError(t))},function(){c||(s++,i.onCompleted())})),new dn(a,h)},t)}function Tt(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,e){return t.onNext(e)},"@@transducer/result":function(t){return t.onCompleted()}}}function jt(t){this.predicate=t}function Rt(t){this.predicate=t}function Ft(t,e){var n=this;this.scheduler=t,this.messages=e,this.subscriptions=[],this.observers=[];for(var r=0,i=this.messages.length;i>r;r++){var o=this.messages[r],s=o.value;!function(e){t.scheduleAbsolute(null,o.time,function(){for(var t=n.observers.slice(0),r=0,i=t.length;i>r;r++)e.accept(t[r]);return an})}(s)}}var zt={"function":!0,object:!0},Lt=zt[typeof n]&&n&&!n.nodeType?n:null,Yt=zt[typeof e]&&e&&!e.nodeType?e:null,qt=o(Lt&&Yt&&"object"==typeof r&&r),Vt=o(zt[typeof self]&&self),Wt=o(zt[typeof window]&&window),It=Yt&&Yt.exports===Lt?Lt:null,Ut=o(zt[typeof this]&&this),Bt=qt||Wt!==(Ut&&Ut.window)&&Wt||Vt||Ut||Function("return this")(),Ht={internals:{},config:{Promise:Bt.Promise},helpers:{}},Gt=Ht.helpers.noop=function(){},Zt=Ht.helpers.identity=function(t){return t},$t=Ht.helpers.defaultNow=Date.now,Jt=Ht.helpers.defaultComparer=function(t,e){return Qe(t,e)},Qt=Ht.helpers.defaultSubComparer=function(t,e){return t>e?1:e>t?-1:0},Xt=(Ht.helpers.defaultKeySerializer=function(t){return t.toString()},Ht.helpers.defaultError=function(t){throw t}),Kt=Ht.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},te=Ht.helpers.isFunction=function(){var t=function(t){return"function"==typeof t||!1};return t(/x/)&&(t=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),t}(),ee={e:{}},ne=Ht.internals.tryCatch=function(t){if(!te(t))throw new TypeError("fn must be a function");return u(t)};Ht.config.longStackSupport=!1;var re=!1,ie=ne(function(){throw new Error})();re=!!ie.e&&!!ie.e.stack;var oe,se=p(),ue="From previous event:",ae=Ht.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};ae.prototype=Object.create(Error.prototype),ae.prototype.name="EmptyError";var ce=Ht.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};ce.prototype=Object.create(Error.prototype),ce.prototype.name="ObjectDisposedError";var he=Ht.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};he.prototype=Object.create(Error.prototype),he.prototype.name="ArgumentOutOfRangeError";var le=Ht.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};le.prototype=Object.create(Error.prototype),le.prototype.name="NotSupportedError";var fe=Ht.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};fe.prototype=Object.create(Error.prototype),fe.prototype.name="NotImplementedError";var pe=Ht.helpers.notImplemented=function(){throw new fe},de=(Ht.helpers.notSupported=function(){throw new le},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");Bt.Set&&"function"==typeof(new Bt.Set)["@@iterator"]&&(de="@@iterator");var ve=Ht.doneEnumerator={done:!0,value:i},ye=Ht.helpers.isIterable=function(t){return t&&t[de]!==i},be=Ht.helpers.isArrayLike=function(t){return t&&t.length!==i};Ht.helpers.iterator=de;var me=Ht.internals.bindCallback=function(t,e,n){if("undefined"==typeof e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},_e=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],we=(_e.length,"[object Arguments]"),ge="[object Array]",xe="[object Boolean]",Ee="[object Date]",ke="[object Error]",Ce="[object Function]",Se="[object Map]",Oe="[object Number]",De="[object Object]",Me="[object RegExp]",Pe="[object Set]",Ne="[object String]",Ae="[object WeakMap]",Te="[object ArrayBuffer]",je="[object Float32Array]",Re="[object Float64Array]",Fe="[object Int8Array]",ze="[object Int16Array]",Le="[object Int32Array]",Ye="[object Uint8Array]",qe="[object Uint8ClampedArray]",Ve="[object Uint16Array]",We="[object Uint32Array]",Ie={};Ie[je]=Ie[Re]=Ie[Fe]=Ie[ze]=Ie[Le]=Ie[Ye]=Ie[qe]=Ie[Ve]=Ie[We]=!0,Ie[we]=Ie[ge]=Ie[Te]=Ie[xe]=Ie[Ee]=Ie[ke]=Ie[Ce]=Ie[Se]=Ie[Oe]=Ie[De]=Ie[Me]=Ie[Pe]=Ie[Ne]=Ie[Ae]=!1;var Ue=Object.prototype,Be=Ue.hasOwnProperty,He=Ue.toString,Ge=Math.pow(2,53)-1,Ze=Object.keys||function(){
var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,s,u=[];for(o in i)t.call(i,o)&&u.push(o);if(e)for(s=0;r>s;s++)t.call(i,n[s])&&u.push(n[s]);return u}}(),ot=Ht.internals.isObject=function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)},$e=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}(),Je=Array.isArray||function(t){return b(t)&&m(t.length)&&He.call(t)===ge},Qe=Ht.internals.isEqual=function(t,e){return E(t,e)},Xe=({}.hasOwnProperty,Array.prototype.slice,Ht.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}),Ke=Ht.internals.addProperties=function(t){for(var e=[],n=1,r=arguments.length;r>n;n++)e.push(arguments[n]);for(var i=0,o=e.length;o>i;i++){var s=e[i];for(var u in s)t[u]=s[u]}},tn=Ht.internals.addRef=function(t,e){return new Ds(function(n){return new dn(e.getDisposable(),t.subscribe(n))})};C.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e};var en=Ht.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},nn=en.prototype;nn.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},nn.percolate=function(t){if(!(t>=this.length||0>t)){var e=t-1>>1;if(!(0>e||e===t)&&this.isHigherPriority(t,e)){var n=this.items[t];this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)}}},nn.heapify=function(t){if(+t||(t=0),!(t>=this.length||0>t)){var e=2*t+1,n=2*t+2,r=t;if(e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t){var i=this.items[t];this.items[t]=this.items[r],this.items[r]=i,this.heapify(r)}}},nn.peek=function(){return this.items[0].value},nn.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=i,this.heapify()},nn.dequeue=function(){var t=this.peek();return this.removeAt(0),t},nn.enqueue=function(t){var e=this.length++;this.items[e]=new C(en.count++,t),this.percolate(e)},nn.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},en.count=0;var rn=Ht.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(e=arguments.length,n=new Array(e),t=0;e>t;t++)n[t]=arguments[t];this.disposables=n,this.isDisposed=!1,this.length=n.length},on=rn.prototype;on.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},on.remove=function(t){var e=!1;if(!this.isDisposed){var n=this.disposables.indexOf(t);-1!==n&&(e=!0,this.disposables.splice(n,1),this.length--,t.dispose())}return e},on.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,e=new Array(t),n=0;t>n;n++)e[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;t>n;n++)e[n].dispose()}};var sn=Ht.Disposable=function(t){this.isDisposed=!1,this.action=t||Gt};sn.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var un=sn.create=function(t){return new sn(t)},an=sn.empty={dispose:Gt},cn=sn.isDisposable=function(t){return t&&te(t.dispose)},hn=sn.checkDisposed=function(t){if(t.isDisposed)throw new ce},ln=sn._fixup=function(t){return cn(t)?t:an},fn=Ht.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};fn.prototype.getDisposable=function(){return this.current},fn.prototype.setDisposable=function(t){if(this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},fn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}};var pn=Ht.SerialDisposable=function(){this.isDisposed=!1,this.current=null};pn.prototype.getDisposable=function(){return this.current},pn.prototype.setDisposable=function(t){var e=this.isDisposed;if(!e){var n=this.current;this.current=t}n&&n.dispose(),e&&t&&t.dispose()},pn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var dn=Ht.BinaryDisposable=function(t,e){this._first=t,this._second=e,this.isDisposed=!1};dn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this._first;this._first=null,t&&t.dispose();var e=this._second;this._second=null,e&&e.dispose()}};var vn=Ht.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1};vn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=0,e=this._disposables.length;e>t;t++)this._disposables[t].dispose();this._disposables.length=0}};var yn=Ht.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?an:new t(this)},e}();S.prototype.dispose=function(){this.scheduler.schedule(this,O)};var bn=Ht.internals.ScheduledItem=function(t,e,n,r,i){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=i||Qt,this.disposable=new fn};bn.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},bn.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},bn.prototype.isCancelled=function(){return this.disposable.isDisposed},bn.prototype.invokeCore=function(){return ln(this.action(this.scheduler,this.state))};var mn=Ht.Scheduler=function(){function t(){}t.isScheduler=function(e){return e instanceof t};var e=t.prototype;return e.schedule=function(t,e){throw new fe},e.scheduleFuture=function(e,n,r){var i=n;return i instanceof Date&&(i-=this.now()),i=t.normalize(i),0===i?this.schedule(e,r):this._scheduleFuture(e,i,r)},e._scheduleFuture=function(t,e,n){throw new fe},t.now=$t,t.prototype.now=$t,t.normalize=function(t){return 0>t&&(t=0),t},t}(),_n=mn.normalize,wn=mn.isScheduler;!function(t){function e(t,e){function n(e){function r(t,e){return s?o.remove(a):u=!0,i(e,n),an}var s=!1,u=!1,a=t.schedule(e,r);u||(o.add(a),s=!0)}var r=e[0],i=e[1],o=new rn;return i(r,n),o}function n(t,e){function n(e,r){function s(t,e){return u?o.remove(c):a=!0,i(e,n),an}var u=!1,a=!1,c=t.scheduleFuture(e,r,s);a||(o.add(c),u=!0)}var r=e[0],i=e[1],o=new rn;return i(r,n),o}t.scheduleRecursive=function(t,n){return this.schedule([t,n],e)},t.scheduleRecursiveFuture=function(t,e,r){return this.scheduleFuture([t,r],e,n)}}(mn.prototype),function(t){t.schedulePeriodic=function(t,e,n){if("undefined"==typeof Bt.setInterval)throw new le;e=_n(e);var r=t,i=Bt.setInterval(function(){r=n(r)},e);return un(function(){Bt.clearInterval(i)})}}(mn.prototype),function(t){t.catchError=t["catch"]=function(t){return new Tn(this,t)}}(mn.prototype);var gn,xn,En=Ht.internals.SchedulePeriodicRecursive=function(){function t(t){return function(e,n){n(0,t._period);var r=ne(t._action)(t._state);r===ee&&(t._cancel.dispose(),a(r.e)),t._state=r}}function e(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return e.prototype.start=function(){var e=new fn;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,t(this))),e},e}(),kn=function(t){function e(){t.call(this)}return Xe(e,t),e.prototype.schedule=function(t,e){return ln(e(this,t))},e}(mn),Cn=mn.immediate=new kn,Sn=function(t){function e(){for(;r.length>0;){var t=r.dequeue();!t.isCancelled()&&t.invoke()}}function n(){t.call(this)}var r;return Xe(n,t),n.prototype.schedule=function(t,n){var i=new bn(this,t,n,this.now());if(r)r.enqueue(i);else{r=new en(4),r.enqueue(i);var o=ne(e)();r=null,o===ee&&a(o.e)}return i.disposable},n.prototype.scheduleRequired=function(){return!r},n}(mn),On=mn.currentThread=new Sn,Dn=function(){var t,e=Gt;if(Bt.setTimeout)t=Bt.setTimeout,e=Bt.clearTimeout;else{if(!Bt.WScript)throw new le;t=function(t,e){Bt.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}(),Mn=Dn.setTimeout,Pn=Dn.clearTimeout;!function(){function e(t){if(o)Mn(function(){e(t)},0);else{var n=i[t];if(n){o=!0;var r=ne(n)();xn(t),o=!1,r===ee&&a(r.e)}}}function n(){if(!Bt.postMessage||Bt.importScripts)return!1;var t=!1,e=Bt.onmessage;return Bt.onmessage=function(){t=!0},Bt.postMessage("","*"),Bt.onmessage=e,t}var r=1,i={},o=!1;xn=function(t){delete i[t]};var s=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),u="function"==typeof(u=qt&&It&&qt.setImmediate)&&!s.test(u)&&u;if(te(u))gn=function(t){var n=r++;return i[n]=t,u(function(){e(n)}),n};else if("undefined"!=typeof t&&"[object process]"==={}.toString.call(t))gn=function(n){var o=r++;return i[o]=n,t.nextTick(function(){e(o)}),o};else if(n()){var c="ms.rx.schedule"+Math.random(),h=function(t){"string"==typeof t.data&&t.data.substring(0,c.length)===c&&e(t.data.substring(c.length))};Bt.addEventListener("message",h,!1),gn=function(t){var e=r++;return i[e]=t,Bt.postMessage(c+e,"*"),e}}else if(Bt.MessageChannel){var l=new Bt.MessageChannel;l.port1.onmessage=function(t){e(t.data)},gn=function(t){var e=r++;return i[e]=t,l.port2.postMessage(e),e}}else gn="document"in Bt&&"onreadystatechange"in Bt.document.createElement("script")?function(t){var n=Bt.document.createElement("script"),o=r++;return i[o]=t,n.onreadystatechange=function(){e(o),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},Bt.document.documentElement.appendChild(n),o}:function(t){var n=r++;return i[n]=t,Mn(function(){e(n)},0),n}}();var Nn=function(t){function e(){t.call(this)}function n(t,e,n,r){return function(){t.setDisposable(sn._fixup(e(n,r)))}}function r(t){this._id=t,this.isDisposed=!1}function i(t){this._id=t,this.isDisposed=!1}function o(t,e,n){return function(){e(t,n)}}return Xe(e,t),r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,xn(this._id))},i.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Pn(this._id))},e.prototype.schedule=function(t,e){var i=new fn,o=gn(n(i,e,this,t));return new dn(i,new r(o))},e.prototype._scheduleFuture=function(t,e,r){if(0===e)return this.schedule(t,r);var o=new fn,s=Mn(n(o,r,this,t),e);return new dn(o,new i(s))},e.prototype.scheduleLongRunning=function(t,e){var n=un(Gt);return gn(o(t,e,n)),n},e}(mn),An=mn["default"]=mn.async=new Nn,Tn=function(t){function e(e,n){this._scheduler=e,this._handler=n,this._recursiveOriginal=null,this._recursiveWrapper=null,t.call(this)}return Xe(e,t),e.prototype.schedule=function(t,e){return this._scheduler.schedule(t,this._wrap(e))},e.prototype._scheduleFuture=function(t,e,n){return this._scheduler.schedule(t,e,this._wrap(n))},e.prototype.now=function(){return this._scheduler.now()},e.prototype._clone=function(t){return new e(t,this._handler)},e.prototype._wrap=function(t){var e=this;return function(n,r){var i=ne(t)(e._getRecursiveWrapper(n),r);return i===ee?(e._handler(i.e)||a(i.e),an):ln(i)}},e.prototype._getRecursiveWrapper=function(t){if(this._recursiveOriginal!==t){this._recursiveOriginal=t;var e=this._clone(t);e._recursiveOriginal=t,e._recursiveWrapper=e,this._recursiveWrapper=e}return this._recursiveWrapper},e.prototype.schedulePeriodic=function(t,e,n){var r=this,i=!1,o=new fn;return o.setDisposable(this._scheduler.schedulePeriodic(t,e,function(t){if(i)return null;var e=ne(n)(t);return e===ee?(i=!0,r._handler(e.e)||a(e.e),o.dispose(),null):e})),o},e}(mn),jn=Ht.Notification=function(){function t(){}return t.prototype._accept=function(t,e,n){throw new fe},t.prototype._acceptObserver=function(t,e,n){throw new fe},t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObserver(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return wn(t)||(t=Cn),new Ds(function(n){return t.schedule(e,function(t,e){e._acceptObserver(n),"N"===e.kind&&n.onCompleted()})})},t}(),Rn=function(t){function e(t){this.value=t,this.kind="N"}return Xe(e,t),e.prototype._accept=function(t){return t(this.value)},e.prototype._acceptObserver=function(t){return t.onNext(this.value)},e.prototype.toString=function(){return"OnNext("+this.value+")"},e}(jn),Fn=function(t){function e(t){this.error=t,this.kind="E"}return Xe(e,t),e.prototype._accept=function(t,e){return e(this.error)},e.prototype._acceptObserver=function(t){return t.onError(this.error)},e.prototype.toString=function(){return"OnError("+this.error+")"},e}(jn),zn=function(t){function e(){this.kind="C"}return Xe(e,t),e.prototype._accept=function(t,e,n){return n()},e.prototype._acceptObserver=function(t){return t.onCompleted()},e.prototype.toString=function(){return"OnCompleted()"},e}(jn),Ln=jn.createOnNext=function(t){return new Rn(t)},Yn=jn.createOnError=function(t){return new Fn(t)},qn=jn.createOnCompleted=function(){return new zn},Vn=Ht.Observer=function(){};Vn.prototype.toNotifier=function(){var t=this;return function(e){return e.accept(t)}},Vn.prototype.asObserver=function(){var t=this;return new Bn(function(e){t.onNext(e)},function(e){t.onError(e)},function(){t.onCompleted()})},Vn.prototype.checked=function(){return new Hn(this)};var Wn=Vn.create=function(t,e,n){return t||(t=Gt),e||(e=Xt),n||(n=Gt),new Bn(t,e,n)};Vn.fromNotifier=function(t,e){var n=me(t,e,1);return new Bn(function(t){return n(Ln(t))},function(t){return n(Yn(t))},function(){return n(qn())})},Vn.prototype.notifyOn=function(t){return new Zn(t,this)},Vn.prototype.makeSafe=function(t){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,t)};var In,Un=Ht.internals.AbstractObserver=function(t){function e(){this.isStopped=!1}return Xe(e,t),e.prototype.next=pe,e.prototype.error=pe,e.prototype.completed=pe,e.prototype.onNext=function(t){!this.isStopped&&this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.error(t),!0)},e}(Vn),Bn=Ht.AnonymousObserver=function(t){function e(e,n,r){t.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return Xe(e,t),e.prototype.next=function(t){this._onNext(t)},e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(Un),Hn=function(t){function e(e){t.call(this),this._observer=e,this._state=0}Xe(e,t);var n=e.prototype;return n.onNext=function(t){this.checkAccess();var e=ne(this._observer.onNext).call(this._observer,t);this._state=0,e===ee&&a(e.e)},n.onError=function(t){this.checkAccess();var e=ne(this._observer.onError).call(this._observer,t);this._state=2,e===ee&&a(e.e)},n.onCompleted=function(){this.checkAccess();var t=ne(this._observer.onCompleted).call(this._observer);this._state=2,t===ee&&a(t.e)},n.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},e}(Vn),Gn=Ht.internals.ScheduledObserver=function(t){function e(e,n){t.call(this),this.scheduler=e,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new pn}function n(t,e){return function(){t.onNext(e)}}function r(t,e){return function(){t.onError(e)}}function i(t){return function(){t.onCompleted()}}function o(t,e){var n;if(!(t.queue.length>0))return void(t.isAcquired=!1);n=t.queue.shift();var r=ne(n)();return r===ee?(t.queue=[],t.hasFaulted=!0,a(r.e)):void e(t)}return Xe(e,t),e.prototype.next=function(t){this.queue.push(n(this.observer,t))},e.prototype.error=function(t){this.queue.push(r(this.observer,t))},e.prototype.completed=function(){this.queue.push(i(this.observer))},e.prototype.ensureActive=function(){var t=!1;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,o))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},e}(Un),Zn=function(t){function e(e,n,r){t.call(this,e,n),this._cancel=r}return Xe(e,t),e.prototype.next=function(e){t.prototype.next.call(this,e),this.ensureActive()},e.prototype.error=function(e){t.prototype.error.call(this,e),this.ensureActive()},e.prototype.completed=function(){t.prototype.completed.call(this),this.ensureActive()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},e}(Gn),$n=Ht.Observable=function(){function t(t,e){return function(n){var r=n.onError;return n.onError=function(e){c(e,t),r.call(n,e)},e.call(t,n)}}function e(){if(Ht.config.longStackSupport&&re){var e=this._subscribe,n=ne(a)(new Error).e;this.stack=n.stack.substring(n.stack.indexOf("\n")+1),this._subscribe=t(this,e)}}return In=e.prototype,e.isObservable=function(t){return t&&te(t.subscribe)},In.subscribe=In.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:Wn(t,e,n))},In.subscribeOnNext=function(t,e){return this._subscribe(Wn("undefined"!=typeof e?function(n){t.call(e,n)}:t))},In.subscribeOnError=function(t,e){return this._subscribe(Wn(null,"undefined"!=typeof e?function(n){t.call(e,n)}:t))},In.subscribeOnCompleted=function(t,e){return this._subscribe(Wn(null,null,"undefined"!=typeof e?function(){t.call(e)}:t))},e}(),Jn=Ht.ObservableBase=function(t){function e(t){return t&&te(t.dispose)?t:te(t)?un(t):an}function n(t,n){var r=n[0],i=n[1],o=ne(i.subscribeCore).call(i,r);o!==ee||r.fail(ee.e)||a(ee.e),r.setDisposable(e(o))}function r(){t.call(this)}return Xe(r,t),r.prototype._subscribe=function(t){var e=new Ms(t),r=[e,this];return On.scheduleRequired()?On.schedule(r,n):n(null,r),e},r.prototype.subscribeCore=pe,r}($n),Qn=Ht.FlatMapObservable=function(t){function e(e,n,r,i){this.resultSelector=te(r)?r:null,this.selector=me(te(n)?n:function(){return n},i,3),this.source=e,t.call(this)}function n(t,e,n,r){this.i=0,this.selector=e,this.resultSelector=n,this.source=r,this.o=t,Un.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.selector,this.resultSelector,this))},Xe(n,Un),n.prototype._wrapResult=function(t,e,n){return this.resultSelector?t.map(function(t,r){return this.resultSelector(e,t,n,r)},this):t},n.prototype.next=function(t){var e=this.i++,n=ne(this.selector)(t,e,this.source);return n===ee?this.o.onError(n.e):(Kt(n)&&(n=ar(n)),(be(n)||ye(n))&&(n=$n.from(n)),void this.o.onNext(this._wrapResult(n,t,e)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(Jn),Xn=Ht.internals.Enumerable=function(){};D.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var Kn=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=ne(t.e.next).call(t.e);if(n===ee)return t.o.onError(n.e);if(n.done)return t.o.onCompleted();var i=n.value;Kt(i)&&(i=ar(i));var o=new fn;t.subscription.setDisposable(o),o.setDisposable(i.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,Un.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new pn,r={isDisposed:!1,o:t,subscription:e,e:this.sources[de]()},i=On.scheduleRecursive(r,n);return new vn([e,i,new D(r)])},Xe(r,Un),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.o.onError(t)},r.prototype.completed=function(){this._recurse(this._state)},e}(Jn);Xn.prototype.concat=function(){return new Kn(this)};var tr=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=ne(t.e.next).call(t.e);if(n===ee)return t.o.onError(n.e);if(n.done)return null!==t.lastError?t.o.onError(t.lastError):t.o.onCompleted();var i=n.value;Kt(i)&&(i=ar(i));var o=new fn;t.subscription.setDisposable(o),o.setDisposable(i.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,Un.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new pn,r={isDisposed:!1,e:this.sources[de](),subscription:e,lastError:null,o:t},i=On.scheduleRecursive(r,n);return new vn([e,i,new D(r)])},Xe(r,Un),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.lastError=t,this._recurse(this._state)},r.prototype.completed=function(){this._state.o.onCompleted()},e}(Jn);Xn.prototype.catchError=function(){return new tr(this)};var er=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return Xe(e,t),e.prototype[de]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?ve:(this.l>0&&this.l--,{done:!1,value:this.v})},e}(Xn),nr=Xn.repeat=function(t,e){return new er(t,e)},rr=function(t){function e(t,e,n){this.s=t,this.fn=e?me(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return Xe(e,t),e.prototype[de]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:ve},e}(Xn),ir=Xn.of=function(t,e,n){return new rr(t,e,n)},or=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Zn(this._s,t))},e}(Jn);In.observeOn=function(t){return new or(this,t)};var sr=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1],i=e[2];r.setDisposable(new S(t,n.subscribe(i)))}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new fn,r=new pn;return r.setDisposable(e),e.setDisposable(this._s.schedule([this.source,r,t],n)),r},e}(Jn);In.subscribeOn=function(t){return new sr(this,t)};var ur=function(t){function e(e,n){this._p=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];n.onNext(r),n.onCompleted()}function r(t,e){var n=e[0],r=e[1];n.onError(r)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new fn,i=this,o=this._p;return te(o)&&(o=ne(o)(),o===ee)?(t.onError(o.e),e):(o.then(function(r){e.setDisposable(i._s.schedule([t,r],n))},function(n){e.setDisposable(i._s.schedule([t,n],r))}),e)},e}(Jn),ar=$n.fromPromise=function(t,e){return e||(e=An),new ur(t,e)};In.toPromise=function(t){if(t||(t=Ht.config.Promise),!t)throw new le("Promise type not provided nor in Rx.config.Promise");var e=this;return new t(function(t,n){var r;e.subscribe(function(t){r=t},n,function(){t(r)})})};var cr=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.a=[],Un.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},Xe(n,Un),n.prototype.next=function(t){this.a.push(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},e}(Jn);In.toArray=function(){return new cr(this)},$n.create=function(t,e){return new Ds(t,e)};var hr=function(t){function e(e){this._f=e,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=ne(this._f)();return e===ee?Mr(e.e).subscribe(t):(Kt(e)&&(e=ar(e)),e.subscribe(t))},e}(Jn),lr=$n.defer=function(t){return new hr(t)},fr=function(t){function e(e){this.scheduler=e,t.call(this)}function n(t,e){this.observer=t,this.scheduler=e}function r(t,e){return e.onCompleted(),an}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new n(t,this.scheduler);return e.run()},n.prototype.run=function(){var t=this.observer;return this.scheduler===Cn?r(null,t):this.scheduler.schedule(t,r)},e}(Jn),pr=new fr(Cn),dr=$n.empty=function(t){return wn(t)||(t=Cn),t===Cn?pr:new fr(t)},vr=function(t){function e(e,n,r){this._iterable=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e,n){return function(r,i){var o=ne(e.next).call(e);if(o===ee)return t.onError(o.e);if(o.done)return t.onCompleted();var s=o.value;return te(n)&&(s=ne(n)(s,r),s===ee)?t.onError(s.e):(t.onNext(s),void i(r+1))}}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=Object(this._iterable),r=j(e);return this._scheduler.scheduleRecursive(0,n(t,r,this._fn))},e}(Jn),yr=Math.pow(2,53)-1;M.prototype[de]=function(){return new P(this._s)},P.prototype[de]=function(){return this},P.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:ve},N.prototype[de]=function(){return new A(this._a)},A.prototype[de]=function(){return this},A.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:ve};var br=$n.from=function(t,e,n,r){if(null==t)throw new Error("iterable cannot be null.");if(e&&!te(e))throw new Error("mapFn when provided must be a function");if(e)var i=me(e,n,2);return wn(r)||(r=On),new vr(t,i,r)},mr=function(t){function e(e,n){this._args=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e.length;return function(r,i){n>r?(t.onNext(e[r]),i(r+1)):t.onCompleted()}}return Xe(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._args))},e}(Jn),_r=$n.fromArray=function(t,e){return wn(e)||(e=On),new mr(t,e)},wr=function(t){function e(e,n,r,i,o){this._initialState=e,this._cndFn=n,this._itrFn=r,this._resFn=i,this._s=o,t.call(this)}function n(t,e){if(t.first)t.first=!1;else if(t.newState=ne(t.self._itrFn)(t.newState),t.newState===ee)return t.o.onError(t.newState.e);var n=ne(t.self._cndFn)(t.newState);if(n===ee)return t.o.onError(n.e);if(n){var r=ne(t.self._resFn)(t.newState);if(r===ee)return t.o.onError(r.e);t.o.onNext(r),e(t)}else t.o.onCompleted()}return Xe(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,first:!0,newState:this._initialState};return this._s.scheduleRecursive(e,n)},e}(Jn);$n.generate=function(t,e,n,r,i){return wn(i)||(i=On),new wr(t,e,n,r,i)},$n.of=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return new mr(e,On)},$n.ofWithScheduler=function(t){for(var e=arguments.length,n=new Array(e-1),r=1;e>r;r++)n[r-1]=arguments[r];return new mr(n,t)},$n.ofArrayChanges=function(t){if(!Array.isArray(t))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new Ds(function(e){function n(t){for(var n=0,r=t.length;r>n;n++)e.onNext(t[n])}return Array.observe(t,n),function(){Array.unobserve(t,n)}})},$n.ofObjectChanges=function(t){if(null==t)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new Ds(function(e){function n(t){for(var n=0,r=t.length;r>n;n++)e.onNext(t[n])}return Object.observe(t,n),function(){Object.unobserve(t,n)}})};var gr=function(t){function e(){t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return an},e}(Jn),xr=new gr,Er=$n.never=function(){return xr},kr=function(t){function e(e,n){this._o=e,this._keys=Object.keys(e),this._scheduler=n,t.call(this)}function n(t,e,n){return function(r,i){if(r<n.length){var o=n[r];t.onNext([o,e[o]]),i(r+1)}else t.onCompleted()}}return Xe(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._o,this._keys))},e}(Jn);$n.pairs=function(t,e){return e||(e=On),new kr(t,e)};var Cr=function(t){function e(e,n,r){this.start=e,this.rangeCount=n,this.scheduler=r,t.call(this)}function n(t,e,n){return function(r,i){e>r?(n.onNext(t+r),i(r+1)):n.onCompleted()}}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.scheduler.scheduleRecursive(0,n(this.start,this.rangeCount,t))},e}(Jn);$n.range=function(t,e,n){return wn(n)||(n=On),new Cr(t,e,n)};var Sr=function(t){function e(e,n,r){this.value=e,this.repeatCount=null==n?-1:n,this.scheduler=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new L(t,this);return e.run()},e}(Jn);L.prototype.run=function(){function t(t,r){return(-1===t||t>0)&&(e.onNext(n),t>0&&t--),0===t?e.onCompleted():void r(t)}var e=this.observer,n=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,t)},$n.repeat=function(t,e,n){return wn(n)||(n=On),new Sr(t,e,n)};var Or=function(t){function e(e,n){this._value=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onNext(n),r.onCompleted(),an}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=[this._value,t];return this._scheduler===Cn?n(null,e):this._scheduler.schedule(e,n)},e}(Jn),Dr=($n["return"]=$n.just=function(t,e){return wn(e)||(e=Cn),new Or(t,e)},function(t){function e(e,n){this._error=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onError(n),an}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=[this._error,t];return this._scheduler===Cn?n(null,e):this._scheduler.schedule(e,n)},e}(Jn)),Mr=$n["throw"]=function(t,e){return wn(e)||(e=Cn),new Dr(t,e)},Pr=function(t){function e(e,n){this._resFn=e,this._obsFn=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=an,n=ne(this._resFn)();if(n===ee)return new dn(Mr(n.e).subscribe(t),e);n&&(e=n);var r=ne(this._obsFn)(n);return r===ee?new dn(Mr(r.e).subscribe(t),e):new dn(r.subscribe(t),e)},e}(Jn);$n.using=function(t,e){return new Pr(t,e)},In.amb=function(t){var e=this;return new Ds(function(n){function r(){o||(o=s,c.dispose())}function i(){o||(o=u,a.dispose())}var o,s="L",u="R",a=new fn,c=new fn;Kt(t)&&(t=ar(t));var h=Wn(function(t){r(),o===s&&n.onNext(t)},function(t){r(),o===s&&n.onError(t)},function(){r(),o===s&&n.onCompleted()}),l=Wn(function(t){i(),o===u&&n.onNext(t)},function(t){i(),o===u&&n.onError(t)},function(){i(),o===u&&n.onCompleted()});return a.setDisposable(e.subscribe(h)),c.setDisposable(t.subscribe(l)),new dn(a,c)})},$n.amb=function(){var t,e=Er();if(Array.isArray(arguments[0]))t=arguments[0];else{var n=arguments.length;t=new Array(t);for(var r=0;n>r;r++)t[r]=arguments[r]}for(var r=0,n=t.length;n>r;r++)e=Y(e,t[r]);return e};var Nr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new fn,n=new pn;return n.setDisposable(e),e.setDisposable(this.source.subscribe(new Ar(t,n,this._fn))),n},e}(Jn),Ar=function(t){function e(e,n,r){this._o=e,this._s=n,this._fn=r,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._o.onNext(t)},e.prototype.completed=function(){return this._o.onCompleted()},e.prototype.error=function(t){var e=ne(this._fn)(t);if(e===ee)return this._o.onError(e.e);Kt(e)&&(e=ar(e));var n=new fn;this._s.setDisposable(n),n.setDisposable(e.subscribe(this._o))},e}(Un);In["catch"]=function(t){return te(t)?new Nr(this,t):Tr([this,t])};var Tr=$n["catch"]=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return ir(t).catchError()};In.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Fr.apply(this,e)};var jr=function(t){function e(e,n){this._params=e,this._cb=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){for(var e=this._params.length,n=new Array(e),r={hasValue:k(e,q),hasValueAll:!1,isDone:k(e,q),values:new Array(e)},i=0;e>i;i++){var o=this._params[i],s=new fn;
n[i]=s,Kt(o)&&(o=ar(o)),s.setDisposable(o.subscribe(new Rr(t,i,this._cb,r)))}return new vn(n)},e}(Jn),Rr=function(t){function e(e,n,r,i){this._o=e,this._i=n,this._cb=r,this._state=i,t.call(this)}function n(t){return function(e,n){return n!==t}}return Xe(e,t),e.prototype.next=function(t){if(this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(Zt))){var e=ne(this._cb).apply(null,this._state.values);if(e===ee)return this._o.onError(e.e);this._o.onNext(e)}else this._state.isDone.filter(n(this._i)).every(Zt)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(Zt)&&this._o.onCompleted()},e}(Un),Fr=$n.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=te(e[t-1])?e.pop():V;return Array.isArray(e[0])&&(e=e[0]),new jr(e,r)};In.concat=function(){for(var t=[],e=0,n=arguments.length;n>e;e++)t.push(arguments[e]);return t.unshift(this),Yr.apply(null,t)};var zr=function(t){function e(e,n){this._s=e,this._fn=n,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._s.o.onNext(t)},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.i++,this._fn(this._s)},e}(Un),Lr=function(t){function e(e){this._sources=e,t.call(this)}function n(t,e){if(!t.disposable.isDisposed){if(t.i===t.sources.length)return t.o.onCompleted();var n=t.sources[t.i];Kt(n)&&(n=ar(n));var r=new fn;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new zr(t,e)))}}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new pn,r=un(Gt),i={o:t,i:0,subscription:e,disposable:r,sources:this._sources},o=Cn.scheduleRecursive(i,n);return new vn([e,r,o])},e}(Jn),Yr=$n.concat=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(arguments.length);for(var e=0,n=arguments.length;n>e;e++)t[e]=arguments[e]}return new Lr(t)};In.concatAll=function(){return this.merge(1)};var qr=function(t){function e(e,n){this.source=e,this.maxConcurrent=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new rn;return e.add(this.source.subscribe(new Vr(t,this.maxConcurrent,e))),e},e}(Jn),Vr=function(t){function e(e,n,r){this.o=e,this.max=n,this.g=r,this.done=!1,this.q=[],this.activeCount=0,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return Xe(e,t),e.prototype.handleSubscribe=function(t){var e=new fn;this.g.add(e),Kt(t)&&(t=ar(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.next=function(t){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},Xe(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},e}(Un);In.merge=function(t){return"number"!=typeof t?Wr(this,t):new qr(this,t)};var Wr=$n.merge=function(){var t,e,n=[],r=arguments.length;if(arguments[0])if(wn(arguments[0]))for(t=arguments[0],e=1;r>e;e++)n.push(arguments[e]);else for(t=Cn,e=0;r>e;e++)n.push(arguments[e]);else for(t=Cn,e=1;r>e;e++)n.push(arguments[e]);return Array.isArray(n[0])&&(n=n[0]),z(t,n).mergeAll()},Ir=function(t){function e(e){this.source=e,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new rn,n=new fn;return e.add(n),n.setDisposable(this.source.subscribe(new Ur(t,e))),e},e}(Jn),Ur=function(t){function e(e,n){this.o=e,this.g=n,this.done=!1,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=new fn;this.g.add(e),Kt(t)&&(t=ar(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},Xe(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},e}(Un);In.mergeAll=function(){return new Ir(this)};var Br=Ht.CompositeError=function(t){this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};Br.prototype=Object.create(Error.prototype),Br.prototype.name="CompositeError";var Hr=function(t){function e(e){this.source=e,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new rn,n=new fn,r={isStopped:!1,errors:[],o:t};return e.add(n),n.setDisposable(this.source.subscribe(new Gr(e,r))),e},e}(Jn),Gr=function(t){function e(e,n){this._group=e,this._state=n,t.call(this)}function n(t,e){0===e.length?t.onCompleted():1===e.length?t.onError(e[0]):t.onError(new Br(e))}function r(e,n,r){this._inner=e,this._group=n,this._state=r,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=new fn;this._group.add(e),Kt(t)&&(t=ar(t)),e.setDisposable(t.subscribe(new r(e,this._group,this._state)))},e.prototype.error=function(t){this._state.errors.push(t),this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},e.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},Xe(r,t),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.errors.push(t),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},r.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},e}(Un);$n.mergeDelayError=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}var r=z(null,t);return new Hr(r)},In.onErrorResumeNext=function(t){if(!t)throw new Error("Second observable is required");return Jr([this,t])};var Zr=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(t.pos<t.sources.length){var n=t.sources[t.pos++];Kt(n)&&(n=ar(n));var r=new fn;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new $r(t,e)))}else t.o.onCompleted()}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new pn,r={pos:0,subscription:e,o:t,sources:this.sources},i=Cn.scheduleRecursive(r,n);return new dn(e,i)},e}(Jn),$r=function(t){function e(e,n){this._state=e,this._recurse=n,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._state.o.onNext(t)},e.prototype.error=function(){this._recurse(this._state)},e.prototype.completed=function(){this._recurse(this._state)},e}(Un),Jr=$n.onErrorResumeNext=function(){var t=[];if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new Zr(t)},Qr=function(t){function e(e,n){this._s=e,this._o=Kt(n)?ar(n):n,this._open=!1,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new fn;e.setDisposable(this._s.subscribe(new Xr(t,this))),Kt(this._o)&&(this._o=ar(this._o));var n=new fn;return n.setDisposable(this._o.subscribe(new Kr(t,this,n))),new dn(e,n)},e}(Jn),Xr=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},e}(Un),Kr=function(t){function e(e,n,r){this._o=e,this._p=n,this._r=r,t.call(this)}return Xe(e,t),e.prototype.next=function(){this._p._open=!0,this._r.dispose()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._r.dispose()},e}(Un);In.skipUntil=function(t){return new Qr(this,t)};var ti=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.inner=e,this.stopped=!1,this.latest=0,this.hasLatest=!1,Un.call(this)}function r(t,e){this.parent=t,this.id=e,Un.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new pn,r=this.source.subscribe(new n(t,e));return new dn(r,e)},Xe(n,Un),n.prototype.next=function(t){var e=new fn,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(e),Kt(t)&&(t=ar(t)),e.setDisposable(t.subscribe(new r(this,n)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},Xe(r,Un),r.prototype.next=function(t){this.parent.latest===this.id&&this.parent.o.onNext(t)},r.prototype.error=function(t){this.parent.latest===this.id&&this.parent.o.onError(t)},r.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},e}(Jn);In["switch"]=In.switchLatest=function(){return new ti(this)};var ei=function(t){function e(e,n){this.source=e,this.other=Kt(n)?ar(n):n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return new dn(this.source.subscribe(t),this.other.subscribe(new ni(t)))},e}(Jn),ni=function(t){function e(e){this._o=e,t.call(this)}return Xe(e,t),e.prototype.next=function(){this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=Gt,e}(Un);In.takeUntil=function(t){return new ei(this,t)};var ri=function(t){function e(e,n,r){this._s=e,this._ss=n,this._cb=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){for(var e=this._ss.length,n={hasValue:k(e,q),hasValueAll:!1,values:new Array(e)},r=this._ss.length,i=new Array(r+1),o=0;r>o;o++){var s=this._ss[o],u=new fn;Kt(s)&&(s=ar(s)),u.setDisposable(s.subscribe(new ii(t,o,n))),i[o]=u}var a=new fn;return a.setDisposable(this._s.subscribe(new oi(t,this._cb,n))),i[r]=a,new vn(i)},e}(Jn),ii=function(t){function e(e,n,r){this._o=e,this._i=n,this._state=r,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(Zt)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=Gt,e}(Un),oi=function(t){function e(e,n,r){this._o=e,this._cb=n,this._state=r,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=[t].concat(this._state.values);if(this._state.hasValueAll){var n=ne(this._cb).apply(null,e);return n===ee?this._o.onError(n.e):void this._o.onNext(n)}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);In.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=te(e[t-1])?e.pop():V;return Array.isArray(e[0])&&(e=e[0]),new ri(this,e,r)};var si=function(t){function e(e,n){this._s=e,this._cb=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){for(var e=this._s.length,n=new Array(e),r=k(e,q),i=k(e,W),o=0;e>o;o++){var s=this._s[o],u=new fn;n[o]=u,Kt(s)&&(s=ar(s)),u.setDisposable(s.subscribe(new ui(t,o,this,i,r)))}return new vn(n)},e}(Jn),ui=function(t){function e(e,n,r,i,o){this._o=e,this._i=n,this._p=r,this._q=i,this._d=o,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function i(t){return function(e,n){return n!==t}}return Xe(e,t),e.prototype.next=function(t){if(this._q[this._i].push(t),this._q.every(n)){var e=this._q.map(r),o=ne(this._p._cb).apply(null,e);if(o===ee)return this._o.onError(o.e);this._o.onNext(o)}else this._d.filter(i(this._i)).every(Zt)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d[this._i]=!0,this._d.every(Zt)&&this._o.onCompleted()},e}(Un);In.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=te(e[t-1])?e.pop():V;Array.isArray(e[0])&&(e=e[0]);var i=this;return e.unshift(i),new si(e,r)},$n.zip=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];Array.isArray(e[0])&&(e=te(e[1])?e[0].concat(e[1]):e[0]);var r=e.shift();return r.zip.apply(r,e)};var ai=function(t){function e(e,n){this.sources=e,this._cb=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){for(var e=this.sources,n=e.length,r=new Array(n),i={q:k(n,W),done:k(n,q),cb:this._cb,o:t},o=0;n>o;o++)!function(t){var n=e[t],o=new fn;(be(n)||ye(n))&&(n=br(n)),r[t]=o,o.setDisposable(n.subscribe(new ci(i,t)))}(o);return new vn(r)},e}(Jn),ci=function(t){function e(e,n){this._s=e,this._i=n,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function i(t){return function(e,n){return n!==t}}return Xe(e,t),e.prototype.next=function(t){if(this._s.q[this._i].push(t),this._s.q.every(n)){var e=this._s.q.map(r),o=ne(this._s.cb).apply(null,e);if(o===ee)return this._s.o.onError(o.e);this._s.o.onNext(o)}else this._s.done.filter(i(this._i)).every(Zt)&&this._s.o.onCompleted()},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(Zt)&&this._s.o.onCompleted()},e}(Un);In.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=te(e[t-1])?e.pop():V,i=this;return e.unshift(i),new ai(e,r)},In.asObservable=function(){return new Ds(I(this),this)},In.bufferWithCount=In.bufferCount=function(t,e){return"number"!=typeof e&&(e=t),this.windowWithCount(t,e).flatMap(U).filter(B)};var hi=function(t){function e(e){this.source=e,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new li(t))},e}(Jn),li=function(t){function e(e){this._o=e,t.call(this)}return Xe(e,t),e.prototype.next=function(t){t.accept(this._o)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);In.dematerialize=function(){return new hi(this)};var fi=function(t){function e(e,n,r){this.source=e,this.keyFn=n,this.comparer=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new pi(t,this.keyFn,this.comparer))},e}(Jn),pi=function(t){function e(e,n,r){this.o=e,this.keyFn=n,this.comparer=r,this.hasCurrentKey=!1,this.currentKey=null,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e,n=t;return te(this.keyFn)&&(n=ne(this.keyFn)(t),n===ee)?this.o.onError(n.e):this.hasCurrentKey&&(e=ne(this.comparer)(this.currentKey,n),e===ee)?this.o.onError(e.e):void(this.hasCurrentKey&&e||(this.hasCurrentKey=!0,this.currentKey=n,this.o.onNext(t)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},e}(Un);In.distinctUntilChanged=function(t,e){return e||(e=Jt),new fi(this,t,e)};var di=function(t){function e(e,n,r,i){this.source=e,this._oN=n,this._oE=r,this._oC=i,t.call(this)}function n(t,e){this.o=t,this.t=!e._oN||te(e._oN)?Wn(e._oN||Gt,e._oE||Gt,e._oC||Gt):e._oN,this.isStopped=!1,Un.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this))},Xe(n,Un),n.prototype.next=function(t){var e=ne(this.t.onNext).call(this.t,t);e===ee&&this.o.onError(e.e),this.o.onNext(t)},n.prototype.error=function(t){var e=ne(this.t.onError).call(this.t,t);return e===ee?this.o.onError(e.e):void this.o.onError(t)},n.prototype.completed=function(){var t=ne(this.t.onCompleted).call(this.t);return t===ee?this.o.onError(t.e):void this.o.onCompleted()},e}(Jn);In["do"]=In.tap=In.doAction=function(t,e,n){return new di(this,t,e,n)},In.doOnNext=In.tapOnNext=function(t,e){return this.tap("undefined"!=typeof e?function(n){t.call(e,n)}:t)},In.doOnError=In.tapOnError=function(t,e){return this.tap(Gt,"undefined"!=typeof e?function(n){t.call(e,n)}:t)},In.doOnCompleted=In.tapOnCompleted=function(t,e){return this.tap(Gt,null,"undefined"!=typeof e?function(){t.call(e)}:t)};var vi=function(t){function e(e,n,r){this.source=e,this._fn=me(n,r,0),t.call(this)}function n(t,e){this.isDisposed=!1,this._s=t,this._fn=e}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=ne(this.source.subscribe).call(this.source,t);return e===ee&&(this._fn(),a(e.e)),new n(e,this._fn)},n.prototype.dispose=function(){if(!this.isDisposed){var t=ne(this._s.dispose).call(this._s);this._fn(),t===ee&&a(t.e)}},e}(Jn);In["finally"]=function(t,e){return new vi(this,t,e)};var yi=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},n.prototype.onNext=Gt,n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(t),!0)},e}(Jn);In.ignoreElements=function(){return new yi(this)};var bi=function(t){function e(e,n){this.source=e,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new mi(t))},e}(Jn),mi=function(t){function e(e){this._o=e,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._o.onNext(Ln(t))},e.prototype.error=function(t){this._o.onNext(Yn(t)),this._o.onCompleted()},e.prototype.completed=function(){this._o.onNext(qn()),this._o.onCompleted()},e}(Un);In.materialize=function(){return new bi(this)},In.repeat=function(t){return nr(this,t).concat()},In.retry=function(t){return nr(this,t).catchError()};var _i=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return Xe(n,t),n.prototype.subscribeCore=function(t){var n,r=new As,i=new As,o=this._notifier(r),s=o.subscribe(i),u=this.source["@@iterator"](),a={isDisposed:!1},c=new pn,h=On.scheduleRecursive(null,function(e,o){if(!a.isDisposed){var s=u.next();if(s.done)return void(n?t.onError(n):t.onCompleted());var h=s.value;Kt(h)&&(h=ar(h));var l=new fn,f=new fn;c.setDisposable(new dn(f,l)),l.setDisposable(h.subscribe(function(e){t.onNext(e)},function(e){f.setDisposable(i.subscribe(o,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(e),l.dispose()},function(){t.onCompleted()}))}});return new vn([s,c,h,e(a)])},n}(Jn);In.retryWhen=function(t){return new _i(H(this),t)};var wi=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return Xe(n,t),n.prototype.subscribeCore=function(t){var n,r=new As,i=new As,o=this._notifier(r),s=o.subscribe(i),u=this.source["@@iterator"](),a={isDisposed:!1},c=new pn,h=On.scheduleRecursive(null,function(e,o){if(!a.isDisposed){var s=u.next();if(s.done)return void(n?t.onError(n):t.onCompleted());var h=s.value;Kt(h)&&(h=ar(h));var l=new fn,f=new fn;c.setDisposable(new dn(f,l)),l.setDisposable(h.subscribe(function(e){t.onNext(e)},function(e){t.onError(e)},function(){f.setDisposable(i.subscribe(o,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(null),l.dispose()}))}});return new vn([s,c,h,e(a)])},n}(Jn);In.repeatWhen=function(t){return new wi(H(this),t)};var gi=function(t){function e(e,n,r,i){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=i,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new xi(t,this))},e}(Jn),xi=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=ne(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?ne(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===ee?this._o.onError(this._a.e):(this._o.onNext(this._a),void this._i++)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},e}(Un);In.scan=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new gi(this,n,e,t)};var Ei=function(t){function e(e,n){this.source=e,this._c=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ki(t,this._c))},e}(Jn),ki=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._o.onNext(this._q.shift())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);In.skipLast=function(t){if(0>t)throw new he;return new Ei(this,t)},In.startWith=function(){var t,e=0;arguments.length&&wn(arguments[0])?(t=arguments[0],e=1):t=Cn;for(var n=[],r=e,i=arguments.length;i>r;r++)n.push(arguments[r]);return Yr.apply(null,[_r(n,t),this])};var Ci=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},e}(Un);In.takeLast=function(t){if(0>t)throw new he;var e=this;return new Ds(function(n){return e.subscribe(new Ci(n,t))},e)};var Si=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._q),this._o.onCompleted()},e}(Un);In.takeLastBuffer=function(t){if(0>t)throw new he;var e=this;return new Ds(function(n){return e.subscribe(new Si(n,t))},e)},In.windowWithCount=In.windowCount=function(t,e){var n=this;if(+t||(t=0),Math.abs(t)===1/0&&(t=0),0>=t)throw new he;if(null==e&&(e=t),+e||(e=0),Math.abs(e)===1/0&&(e=0),0>=e)throw new he;return new Ds(function(r){function i(){var t=new As;a.push(t),r.onNext(tn(t,s))}var o=new fn,s=new yn(o),u=0,a=[];return i(),o.setDisposable(n.subscribe(function(n){for(var r=0,o=a.length;o>r;r++)a[r].onNext(n);var s=u-t+1;s>=0&&s%e===0&&a.shift().onCompleted(),++u%e===0&&i()},function(t){for(;a.length>0;)a.shift().onError(t);r.onError(t)},function(){for(;a.length>0;)a.shift().onCompleted();r.onCompleted()})),s},n)},In.selectConcat=In.concatMap=function(t,e,n){return te(t)&&te(e)?this.concatMap(function(n,r){var i=t(n,r);return Kt(i)&&(i=ar(i)),(be(i)||ye(i))&&(i=br(i)),i.map(function(t,i){return e(n,t,r,i)})}):te(t)?G(this,t,n):G(this,function(){return t})},In.concatMapObserver=In.selectConcatObserver=function(t,e,n,r){var i=this,o=me(t,r,2),s=me(e,r,1),u=me(n,r,0);return new Ds(function(t){var e=0;return i.subscribe(function(n){var r;try{r=o(n,e++)}catch(i){return void t.onError(i)}Kt(r)&&(r=ar(r)),t.onNext(r)},function(e){var n;try{n=s(e)}catch(r){return void t.onError(r)}Kt(n)&&(n=ar(n)),t.onNext(n),t.onCompleted()},function(){var e;try{e=u()}catch(n){return void t.onError(n)}Kt(e)&&(e=ar(e)),t.onNext(e),t.onCompleted()})},this).concatAll()};var Oi=function(t){function e(e,n){this._o=e,this._d=n,this._f=!1,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._f=!0,this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._f&&this._o.onNext(this._d),this._o.onCompleted()},e}(Un);In.defaultIfEmpty=function(t){var e=this;return t===i&&(t=null),new Ds(function(n){return e.subscribe(new Oi(n,t))},e)},$.prototype.push=function(t){var e=-1===Z(this.set,t,this.comparer);return e&&this.set.push(t),e};var Di=function(t){function e(e,n,r){this.source=e,this._keyFn=n,this._cmpFn=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Mi(t,this._keyFn,this._cmpFn))},e}(Jn),Mi=function(t){function e(e,n,r){this._o=e,this._keyFn=n,this._h=new $(r),t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=t;return te(this._keyFn)&&(e=ne(this._keyFn)(t),e===ee)?this._o.onError(e.e):void(this._h.push(e)&&this._o.onNext(t))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);In.distinct=function(t,e){return e||(e=Jt),new Di(this,t,e)},In.groupBy=function(t,e){return this.groupByUntil(t,e,Er)},In.groupByUntil=function(t,e,n){var r=this;return new Ds(function(o){var s=new Bo,u=new rn,a=new yn(u),c=function(t){return function(e){e.onError(t)}};return u.add(r.subscribe(function(r){var h=ne(t)(r);if(h===ee)return s.forEach(c(h.e)),o.onError(h.e);var l=!1,f=s.get(h);if(f===i&&(f=new As,s.set(h,f),l=!0),l){var p=new Ns(h,f,a),d=new Ns(h,f),v=ne(n)(d);if(v===ee)return s.forEach(c(v.e)),o.onError(v.e);o.onNext(p);var y=new fn;u.add(y),y.setDisposable(v.take(1).subscribe(Gt,function(t){s.forEach(c(t)),o.onError(t)},function(){s["delete"](h)&&f.onCompleted(),u.remove(y)}))}var b=r;return te(e)&&(b=ne(e)(r),b===ee)?(s.forEach(c(b.e)),o.onError(b.e)):void f.onNext(b)},function(t){s.forEach(c(t)),o.onError(t)},function(){s.forEach(function(t){t.onCompleted()}),o.onCompleted()})),a},r)};var Pi=function(t){function e(e,n,r){this.source=e,this.selector=me(n,r,3),t.call(this)}function n(t,e){return function(n,r,i){return t.call(this,e.selector(n,r,i),r,i)}}function r(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,Un.call(this)}return Xe(e,t),e.prototype.internalMap=function(t,r){return new e(this.source,n(t,this),r)},e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.selector,this))},Xe(r,Un),r.prototype.next=function(t){var e=ne(this.selector)(t,this.i++,this.source);return e===ee?this.o.onError(e.e):void this.o.onNext(e)},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Jn);In.map=In.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof Pi?this.internalMap(n,e):new Pi(this,n,e)},In.pluck=function(){var t=arguments.length,e=new Array(t);if(0===t)throw new Error("List of properties cannot be empty.");for(var n=0;t>n;n++)e[n]=arguments[n];return this.map(J(e,t))},In.flatMap=In.selectMany=In.mergeMap=function(t,e,n){return new Qn(this,t,e,n).mergeAll()},In.flatMapObserver=In.selectManyObserver=function(t,e,n,r){var i=this;return new Ds(function(o){var s=0;return i.subscribe(function(e){var n;try{n=t.call(r,e,s++)}catch(i){return void o.onError(i)}Kt(n)&&(n=ar(n)),o.onNext(n)},function(t){var n;try{n=e.call(r,t)}catch(i){return void o.onError(i)}Kt(n)&&(n=ar(n)),o.onNext(n),o.onCompleted()},function(){var t;try{t=n.call(r)}catch(e){return void o.onError(e)}Kt(t)&&(t=ar(t)),o.onNext(t),o.onCompleted()})},i).mergeAll()},In.flatMapLatest=In.switchMap=function(t,e,n){return new Qn(this,t,e,n).switchLatest()};var Ni=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._r=e,Un.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},Xe(n,Un),n.prototype.next=function(t){this._r<=0?this._o.onNext(t):this._r--},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Jn);In.skip=function(t){if(0>t)throw new he;return new Ni(this,t)};var Ai=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ti(t,this))},e}(Jn),Ti=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!1,t.call(this)}return Xe(e,t),e.prototype.next=function(t){if(!this._r){var e=ne(this._p._fn)(t,this._i++,this._p);if(e===ee)return this._o.onError(e.e);this._r=!e}this._r&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);In.skipWhile=function(t,e){var n=me(t,e,3);return new Ai(this,n)};var ji=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._c=e,this._r=e,Un.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},Xe(n,Un),n.prototype.next=function(t){this._r-- >0&&(this._o.onNext(t),this._r<=0&&this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Jn);In.take=function(t,e){if(0>t)throw new he;return 0===t?dr(e):new ji(this,t)};var Ri=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Fi(t,this))},e}(Jn),Fi=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){return this._r&&(this._r=ne(this._p._fn)(t,this._i++,this._p),this._r===ee)?this._o.onError(this._r.e):void(this._r?this._o.onNext(t):this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);In.takeWhile=function(t,e){var n=me(t,e,3);return new Ri(this,n)};var zi=function(t){function e(e,n,r){this.source=e,this.predicate=me(n,r,3),t.call(this)}function n(t,e){return function(n,r,i){return e.predicate(n,r,i)&&t.call(this,n,r,i)}}function r(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,Un.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.predicate,this))},e.prototype.internalFilter=function(t,r){return new e(this.source,n(t,this),r)},Xe(r,Un),r.prototype.next=function(t){var e=ne(this.predicate)(t,this.i++,this.source);return e===ee?this.o.onError(e.e):void(e&&this.o.onNext(t))},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Jn);In.filter=In.where=function(t,e){return this instanceof zi?this.internalFilter(t,e):new zi(this,t,e)};var Li=function(t){function e(e,n,r){this.source=e,this._k=n,this._c=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Yi(t,this._k,this._c))},e}(Jn),Yi=function(t){function e(e,n,r){this._o=e,this._k=n,this._c=r,this._v=null,this._hv=!1,this._l=[],t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=ne(this._k)(t);if(e===ee)return this._o.onError(e.e);var n=0;if(this._hv){if(n=ne(this._c)(e,this._v),n===ee)return this._o.onError(n.e)}else this._hv=!0,this._v=e;n>0&&(this._v=e,this._l=[]),n>=0&&this._l.push(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._l),this._o.onCompleted()},e}(Un),qi=function(t){function e(e,n,r,i){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=i,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Vi(t,this))},e}(Jn),Vi=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=ne(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?ne(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===ee?this._o.onError(this._a.e):void this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv&&this._o.onNext(this._a),!this._hv&&this._hs&&this._o.onNext(this._s),!this._hv&&!this._hs&&this._o.onError(new ae),this._o.onCompleted()},e}(Un);
In.reduce=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new qi(this,n,e,t)};var Wi=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ii(t,this._fn,this.source))},e}(Jn),Ii=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=ne(this._fn)(t,this._i++,this._s);return e===ee?this._o.onError(e.e):void(Boolean(e)&&(this._o.onNext(!0),this._o.onCompleted()))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},e}(Un);In.some=function(t,e){var n=me(t,e,3);return new Wi(this,n)};var Ui=function(t){function e(e){this.source=e,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Bi(t))},e}(Jn),Bi=function(t){function e(e){this._o=e,t.call(this)}return Xe(e,t),e.prototype.next=function(){this._o.onNext(!1),this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},e}(Un);In.isEmpty=function(){return new Ui(this)};var Hi=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Gi(t,this._fn,this.source))},e}(Jn),Gi=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=ne(this._fn)(t,this._i++,this._s);return e===ee?this._o.onError(e.e):void(Boolean(e)||(this._o.onNext(!1),this._o.onCompleted()))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},e}(Un);In.every=function(t,e){var n=me(t,e,3);return new Hi(this,n)};var Zi=function(t){function e(e,n,r){var i=+r||0;Math.abs(i)===1/0&&(i=0),this.source=e,this._elem=n,this._n=i,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(!1),t.onCompleted(),an):this.source.subscribe(new $i(t,this._elem,this._n))},e}(Jn),$i=function(t){function e(e,n,r){this._o=e,this._elem=n,this._n=r,this._i=0,t.call(this)}function n(t,e){return 0===t&&0===e||t===e||isNaN(t)&&isNaN(e)}return Xe(e,t),e.prototype.next=function(t){this._i++>=this._n&&n(t,this._elem)&&(this._o.onNext(!0),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},e}(Un);In.includes=function(t,e){return new Zi(this,t,e)};var Ji=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Qi(t,this._fn,this.source))},e}(Jn),Qi=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,this._c=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){if(this._fn){var e=ne(this._fn)(t,this._i++,this._s);if(e===ee)return this._o.onError(e.e);Boolean(e)&&this._c++}else this._c++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},e}(Un);In.count=function(t,e){var n=me(t,e,3);return new Ji(this,n)};var Xi=function(t){function e(e,n,r){this.source=e,this._e=n,this._n=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),an):this.source.subscribe(new Ki(t,this._e,this._n))},e}(Jn),Ki=function(t){function e(e,n,r){this._o=e,this._e=n,this._n=r,this._i=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._o.onNext(this._i),this._o.onCompleted()),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(-1),this._o.onCompleted()},e}(Un);In.indexOf=function(t,e){var n=+e||0;return Math.abs(n)===1/0&&(n=0),new Xi(this,t,n)};var to=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new eo(t,this._fn,this.source))},e}(Jn),eo=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,this._c=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){if(this._fn){var e=ne(this._fn)(t,this._i++,this._s);if(e===ee)return this._o.onError(e.e);this._c+=e}else this._c+=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},e}(Un);In.sum=function(t,e){var n=me(t,e,3);return new to(this,n)},In.minBy=function(t,e){return e||(e=Qt),new Li(this,t,function(t,n){return-1*e(t,n)})},In.min=function(t){return this.minBy(Zt,t).map(Q)},In.maxBy=function(t,e){return e||(e=Qt),new Li(this,t,e)},In.max=function(t){return this.maxBy(Zt,t).map(Q)};var no=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ro(t,this._fn,this.source))},e}(Jn),ro=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._c=0,this._t=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){if(this._fn){var e=ne(this._fn)(t,this._c++,this._s);if(e===ee)return this._o.onError(e.e);this._t+=e}else this._c++,this._t+=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){return 0===this._c?this._o.onError(new ae):(this._o.onNext(this._t/this._c),void this._o.onCompleted())},e}(Un);In.average=function(t,e){var n,r=this;return te(t)&&(n=me(t,e,3)),new no(r,n)},In.sequenceEqual=function(t,e){var n=this;return e||(e=Jt),new Ds(function(r){var i=!1,o=!1,s=[],u=[],a=n.subscribe(function(t){if(u.length>0){var n=u.shift(),i=ne(e)(n,t);if(i===ee)return r.onError(i.e);i||(r.onNext(!1),r.onCompleted())}else o?(r.onNext(!1),r.onCompleted()):s.push(t)},function(t){r.onError(t)},function(){i=!0,0===s.length&&(u.length>0?(r.onNext(!1),r.onCompleted()):o&&(r.onNext(!0),r.onCompleted()))});(be(t)||ye(t))&&(t=br(t)),Kt(t)&&(t=ar(t));var c=t.subscribe(function(t){if(s.length>0){var n=s.shift(),o=ne(e)(n,t);if(o===ee)return r.onError(o.e);o||(r.onNext(!1),r.onCompleted())}else i?(r.onNext(!1),r.onCompleted()):u.push(t)},function(t){r.onError(t)},function(){o=!0,0===u.length&&(s.length>0?(r.onNext(!1),r.onCompleted()):i&&(r.onNext(!0),r.onCompleted()))});return new dn(a,c)},n)};var io=function(t){function e(e,n,r){this.source=e,this._i=n,this._d=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new oo(t,this._i,this._d))},e}(Jn),oo=function(t){function e(e,n,r){this._o=e,this._i=n,this._d=r,t.call(this)}return Xe(e,t),e.prototype.next=function(t){0===this._i--&&(this._o.onNext(t),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d===i?this._o.onError(new he):(this._o.onNext(this._d),this._o.onCompleted())},e}(Un);In.elementAt=function(t,e){if(0>t)throw new he;return new io(this,t,e)};var so=function(t){function e(e,n,r){this._o=e,this._obj=n,this._s=r,this._i=0,this._hv=!1,this._v=null,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=!1;if(this._obj.predicate){var n=ne(this._obj.predicate)(t,this._i++,this._s);if(n===ee)return this._o.onError(n.e);Boolean(n)&&(e=!0)}else this._obj.predicate||(e=!0);if(e){if(this._hv)return this._o.onError(new Error("Sequence contains more than one matching element"));this._hv=!0,this._v=t}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===i?this._o.onError(new ae):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},e}(Un);In.single=function(t,e){var n={},r=this;if(n="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},te(n.predicate)){var i=n.predicate;n.predicate=me(i,n.thisArg,3)}return new Ds(function(t){return r.subscribe(new so(t,n,r))},r)};var uo=function(t){function e(e,n){this.source=e,this._obj=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ao(t,this._obj,this.source))},e}(Jn),ao=function(t){function e(e,n,r){this._o=e,this._obj=n,this._s=r,this._i=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){if(this._obj.predicate){var e=ne(this._obj.predicate)(t,this._i++,this._s);if(e===ee)return this._o.onError(e.e);Boolean(e)&&(this._o.onNext(t),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(t),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._obj.defaultValue===i?this._o.onError(new ae):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},e}(Un);In.first=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},te(t.predicate)){var e=t.predicate;t.predicate=me(e,t.thisArg,3)}return new uo(this,t)};var co=function(t){function e(e,n){this.source=e,this._obj=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ho(t,this._obj,this.source))},e}(Jn),ho=function(t){function e(e,n,r){this._o=e,this._obj=n,this._s=r,this._i=0,this._hv=!1,this._v=null,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=!1;if(this._obj.predicate){var n=ne(this._obj.predicate)(t,this._i++,this._s);if(n===ee)return this._o.onError(n.e);Boolean(n)&&(e=!0)}else this._obj.predicate||(e=!0);e&&(this._hv=!0,this._v=t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===i?this._o.onError(new ae):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},e}(Un);In.last=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},te(t.predicate)){var e=t.predicate;t.predicate=me(e,t.thisArg,3)}return new co(this,t)};var lo=function(t){function e(e,n,r,i){this._o=e,this._s=n,this._cb=r,this._y=i,this._i=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=ne(this._cb)(t,this._i,this._s);return e===ee?this._o.onError(e.e):void(e?(this._o.onNext(this._y?this._i:t),this._o.onCompleted()):this._i++)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._y&&this._o.onNext(-1),this._o.onCompleted()},e}(Un);In.find=function(t,e){return X(this,t,e,!1)},In.findIndex=function(t,e){return X(this,t,e,!0)};var fo=function(t){function e(e){this.source=e,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new po(t))},e}(Jn),po=function(t){function e(e){this._o=e,this._s=new Bt.Set,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._s.add(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._s),this._o.onCompleted()},e}(Un);In.toSet=function(){if("undefined"==typeof Bt.Set)throw new TypeError;return new fo(this)};var vo=function(t){function e(e,n,r){this.source=e,this._k=n,this._e=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new yo(t,this._k,this._e))},e}(Jn),yo=function(t){function e(e,n,r){this._o=e,this._k=n,this._e=r,this._m=new Bt.Map,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=ne(this._k)(t);if(e===ee)return this._o.onError(e.e);var n=t;return this._e&&(n=ne(this._e)(t),n===ee)?this._o.onError(n.e):void this._m.set(e,n)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._m),this._o.onCompleted()},e}(Un);In.toMap=function(t,e){if("undefined"==typeof Bt.Map)throw new TypeError;return new vo(this,t,e)};var bo=function(t){function e(e,n,r){this.source=e,this._b=n,this._e=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new mo(t,this._b,this._e))},e}(Jn),mo=function(t){function e(e,n,r){this._o=e,this._b=n,this._e=r,this._i=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._i>=this._b&&(this._e===this._i?this._o.onCompleted():this._o.onNext(t)),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);In.slice=function(t,e){var n=t||0;if(0>n)throw new Ht.ArgumentOutOfRangeError;if("number"==typeof e&&n>e)throw new Ht.ArgumentOutOfRangeError;return new bo(this,n,e)};var _o=function(t){function e(e,n,r){this.source=e,this._e=n,this._n=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),an):this.source.subscribe(new wo(t,this._e,this._n))},e}(Jn),wo=function(t){function e(e,n,r){this._o=e,this._e=n,this._n=r,this._v=0,this._hv=!1,this._i=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._hv=!0,this._v=this._i),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?this._o.onNext(this._v):this._o.onNext(-1),this._o.onCompleted()},e}(Un);In.lastIndexOf=function(t,e){var n=+e||0;return Math.abs(n)===1/0&&(n=0),new _o(this,t,n)},$n.wrap=function(t){function e(){return $n.spawn.call(this,t.apply(this,arguments))}return e.__generatorFunction__=t,e};var go=$n.spawn=function(){for(var t=arguments[0],e=this,n=[],r=1,i=arguments.length;i>r;r++)n.push(arguments[r]);return new Ds(function(r){function i(e){var n=ne(t.next).call(t,e);return n===ee?r.onError(n.e):void s(n)}function o(e){var n=ne(t.next).call(t,e);return n===ee?r.onError(n.e):void s(n)}function s(t){if(t.done)return r.onNext(t.value),void r.onCompleted();var n=K.call(e,t.value),s=null,a=!1;$n.isObservable(n)?u.add(n.subscribe(function(t){a=!0,s=t},o,function(){a&&i(s)})):o(new TypeError("type not supported"))}var u=new rn;return te(t)&&(t=t.apply(e,n)),t&&te(t.next)?(i(),u):(r.onNext(t),r.onCompleted())})};$n.start=function(t,e,n){return xo(t,e,n)()};var xo=$n.toAsync=function(t,e,n){return wn(n)||(n=An),function(){var r=arguments,i=new Ts;return n.schedule(null,function(){var n;try{n=t.apply(e,r)}catch(o){return void i.onError(o)}i.onNext(n),i.onCompleted()}),i.asObservable()}};$n.fromCallback=function(t,e,n){return function(){"undefined"==typeof e&&(e=this);for(var r=arguments.length,i=new Array(r),o=0;r>o;o++)i[o]=arguments[o];return st(t,e,n,i)}},$n.fromNodeCallback=function(t,e,n){return function(){"undefined"==typeof e&&(e=this);for(var r=arguments.length,i=new Array(r),o=0;r>o;o++)i[o]=arguments[o];return at(t,e,n,i)}},lt.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},Ht.config.useNativeEvents=!1;var Eo=function(t){function e(e,n,r){this._el=e,this._n=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];return te(e)&&(n=ne(e).apply(null,arguments),n===ee)?t.onError(n.e):void t.onNext(n)}}return Xe(e,t),e.prototype.subscribeCore=function(t){return ft(this._el,this._n,n(t,this._fn))},e}(Jn);$n.fromEvent=function(t,e,n){return t.addListener?Co(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},n):Ht.config.useNativeEvents||"function"!=typeof t.on||"function"!=typeof t.off?new Eo(t,e,n).publish().refCount():Co(function(n){t.on(e,n)},function(n){t.off(e,n)},n)};var ko=function(t){function e(e,n,r){this._add=e,this._del=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];return te(e)&&(n=ne(e).apply(null,arguments),n===ee)?t.onError(n.e):void t.onNext(n)}}function r(t,e,n){this._del=t,this._fn=e,this._ret=n,this.isDisposed=!1}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=n(t,this._fn),i=this._add(e);return new r(this._del,e,i)},r.prototype.dispose=function(){this.isDisposed||(te(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},e}(Jn),Co=$n.fromEventPattern=function(t,e,n){return new ko(t,e,n).publish().refCount()};$n.startAsync=function(t){var e=ne(t)();return e===ee?Mr(e.e):ar(e)};var So=function(t){function e(e,n){this.source=e,this.controller=new As,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return Xe(e,t),e.prototype._subscribe=function(t){var e=this.source.publish(),n=e.subscribe(t),r=an,i=this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(t){t?r=e.connect():(r.dispose(),r=an)});return new vn([n,r,i])},e.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},e.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},e}($n);In.pausable=function(t){return new So(this,t)};var Oo=function(t){function e(e,n){this.source=e,this.controller=new As,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return Xe(e,t),e.prototype._subscribe=function(t){function e(){for(;r.length>0;)t.onNext(r.shift())}var n,r=[],o=pt(this.source,this.pauser.startWith(!this.paused).distinctUntilChanged(),function(t,e){return{data:t,shouldFire:e}}).subscribe(function(o){n!==i&&o.shouldFire!==n?(n=o.shouldFire,o.shouldFire&&e()):(n=o.shouldFire,o.shouldFire?t.onNext(o.data):r.push(o.data))},function(n){e(),t.onError(n)},function(){e(),t.onCompleted()});return o},e.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},e.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},e}($n);In.pausableBuffered=function(t){return new Oo(this,t)};var Do=function(t){function e(e,n,r){t.call(this),this.subject=new Mo(n,r),this.source=e.multicast(this.subject).refCount()}return Xe(e,t),e.prototype._subscribe=function(t){return this.source.subscribe(t)},e.prototype.request=function(t){return this.subject.request(null==t?-1:t)},e}($n),Mo=function(t){function e(e,n){null==e&&(e=!0),t.call(this),this.subject=new As,this.enableQueue=e,this.queue=e?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=n||On}return Xe(e,t),Ke(e.prototype,Vn,{_subscribe:function(t){return this.subject.subscribe(t)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(jn.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push(jn.createOnError(t)):(this.subject.onError(t),this.disposeCurrentRequest())},onNext:function(t){this.requestedCount<=0?this.enableQueue&&this.queue.push(jn.createOnNext(t)):(0===this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(t))},_processRequest:function(t){if(this.enableQueue)for(;this.queue.length>0&&(t>0||"N"!==this.queue[0].kind);){var e=this.queue.shift();e.accept(this.subject),"N"===e.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return t},request:function(t){this.disposeCurrentRequest();var e=this;return this.requestedDisposable=this.scheduler.schedule(t,function(t,n){var r=e._processRequest(n),i=e.hasCompleted||e.hasFailed;return!i&&r>0?(e.requestedCount=r,un(function(){e.requestedCount=0})):void 0}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),e}($n);In.controlled=function(t,e){return t&&wn(t)&&(e=t,t=!0),null==t&&(t=!0),new Do(this,t,e)};var Po=function(t){function e(e){t.call(this),this.source=e}function n(t,e){return e.source.request(1)}Xe(e,t),e.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new dn(this.subscription,An.schedule(this,n))};var r=function(t){function e(e,n,r){t.call(this),this.observer=e,this.observable=n,this.cancel=r,this.scheduleDisposable=null}function n(t,e){return e.observable.source.request(1)}return Xe(e,t),e.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},e.prototype.error=function(t){this.observer.onError(t),this.dispose()},e.prototype.next=function(t){this.observer.onNext(t),this.scheduleDisposable=An.schedule(this,n)},e.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},e}(Un);return e}($n);Do.prototype.stopAndWait=function(){return new Po(this)};var No=function(t){function e(e,n){t.call(this),this.source=e,this.windowSize=n}function n(t,e){return e.source.request(e.windowSize)}Xe(e,t),e.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new dn(this.subscription,An.schedule(this,n))};var r=function(t){function e(e,n,r){this.observer=e,this.observable=n,this.cancel=r,this.received=0,this.scheduleDisposable=null,t.call(this)}function n(t,e){return e.observable.source.request(e.observable.windowSize)}return Xe(e,t),e.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},e.prototype.error=function(t){this.observer.onError(t),this.dispose()},e.prototype.next=function(t){this.observer.onNext(t),this.received=++this.received%this.observable.windowSize,0===this.received&&(this.scheduleDisposable=An.schedule(this,n))},e.prototype.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},e}(Un);return e}($n);Do.prototype.windowed=function(t){return new No(this,t)},In.pipe=function(t){function e(){n.resume()}var n=this.pausableBuffered();return t.addListener("drain",e),n.subscribe(function(e){!t.write(e)&&n.pause()},function(e){t.emit("error",e)},function(){!t._isStdio&&t.end(),t.removeListener("drain",e)}),n.resume(),t};var Ao=function(t){function e(e,n,r){this.source=e,this._fn1=n,this._fn2=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=this.source.multicast(this._fn1());return new dn(this._fn2(e).subscribe(t),e.connect())},e}(Jn);In.multicast=function(t,e){return te(t)?new Ao(this,t,e):new Ro(this,t)},In.publish=function(t){return t&&te(t)?this.multicast(function(){return new As},t):this.multicast(new As)},In.share=function(){return this.publish().refCount()},In.publishLast=function(t){return t&&te(t)?this.multicast(function(){return new Ts},t):this.multicast(new Ts)},In.publishValue=function(t,e){return 2===arguments.length?this.multicast(function(){return new js(e)},t):this.multicast(new js(t))},In.shareValue=function(t){return this.publishValue(t).refCount()},In.replay=function(t,e,n,r){return t&&te(t)?this.multicast(function(){return new Rs(e,n,r)},t):this.multicast(new Rs(e,n,r))},In.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()};var To=function(t,e){this._s=t,this._o=e};To.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var t=this._s.observers.indexOf(this._o);this._s.observers.splice(t,1),this._o=null}};var jo=function(t){function e(e){this.source=e,this._count=0,this._connectableSubscription=null,t.call(this)}function n(t,e){this._p=t,this._s=e,this.isDisposed=!1}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=this.source.subscribe(t);return 1===++this._count&&(this._connectableSubscription=this.source.connect()),new n(this,e)},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0===--this._p._count&&this._p._connectableSubscription.dispose())},e}(Jn),Ro=Ht.ConnectableObservable=function(t){function e(e,n){this.source=e,this._connection=null,this._source=e.asObservable(),this._subject=n,t.call(this)}function n(t,e){this._p=t,this._s=e}return Xe(e,t),n.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},e.prototype.connect=function(){if(!this._connection){if(this._subject.isStopped)return an;var t=this._source.subscribe(this._subject);this._connection=new n(this,t)}return this._connection},e.prototype._subscribe=function(t){return this._subject.subscribe(t)},e.prototype.refCount=function(){return new jo(this)},e}($n);In.singleInstance=function(){function t(){return r||(r=!0,e=n["finally"](function(){r=!1}).publish().refCount()),e}var e,n=this,r=!1;return new Ds(function(e){return t().subscribe(e)})},In.join=function(t,e,n,r){var i=this;return new Ds(function(o){var s=new rn,u=!1,a=!1,c=0,h=0,l=new Bo,f=new Bo,p=function(t){o.onError(t)};return s.add(i.subscribe(function(t){var n=c++,i=new fn;l.set(n,t),s.add(i);var a=ne(e)(t);return a===ee?o.onError(a.e):(i.setDisposable(a.take(1).subscribe(Gt,p,function(){l["delete"](n)&&0===l.size&&u&&o.onCompleted(),s.remove(i)})),void f.forEach(function(e){var n=ne(r)(t,e);return n===ee?o.onError(n.e):void o.onNext(n)}))},p,function(){u=!0,(a||0===l.size)&&o.onCompleted()})),s.add(t.subscribe(function(t){var e=h++,i=new fn;f.set(e,t),s.add(i);var u=ne(n)(t);return u===ee?o.onError(u.e):(i.setDisposable(u.take(1).subscribe(Gt,p,function(){f["delete"](e)&&0===f.size&&a&&o.onCompleted(),s.remove(i)})),void l.forEach(function(e){var n=ne(r)(e,t);return n===ee?o.onError(n.e):void o.onNext(n)}))},p,function(){a=!0,(u||0===f.size)&&o.onCompleted()})),s},i)},In.groupJoin=function(t,e,n,r){var i=this;return new Ds(function(o){function s(t){}var u=new rn,a=new yn(u),c=new Bo,h=new Bo,l=0,f=0,s=function(t){return function(e){e.onError(t)}};return u.add(i.subscribe(function(t){var n=new As,i=l++;c.set(i,n);var f=ne(r)(t,tn(n,a));if(f===ee)return c.forEach(s(f.e)),o.onError(f.e);o.onNext(f),h.forEach(function(t){n.onNext(t)});var p=new fn;u.add(p);var d=ne(e)(t);return d===ee?(c.forEach(s(d.e)),o.onError(d.e)):void p.setDisposable(d.take(1).subscribe(Gt,function(t){c.forEach(s(t)),o.onError(t)},function(){c["delete"](i)&&n.onCompleted(),u.remove(p)}))},function(t){c.forEach(s(t)),o.onError(t)},function(){o.onCompleted()})),u.add(t.subscribe(function(t){var e=f++;h.set(e,t);var r=new fn;u.add(r);var i=ne(n)(t);return i===ee?(c.forEach(s(i.e)),o.onError(i.e)):(r.setDisposable(i.take(1).subscribe(Gt,function(t){c.forEach(s(t)),o.onError(t)},function(){h["delete"](e),u.remove(r)})),void c.forEach(function(e){e.onNext(t)}))},function(t){c.forEach(s(t)),o.onError(t)})),a},i)},In.buffer=function(){return this.window.apply(this,arguments).flatMap(U)},In.window=function(t,e){return 1===arguments.length&&"function"!=typeof arguments[0]?vt.call(this,t):"function"==typeof t?yt.call(this,t):dt.call(this,t,e)};var Fo=function(t){function e(e){this.source=e,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new zo(t))},e}(Jn),zo=function(t){function e(e){this._o=e,this._p=null,this._hp=!1,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._hp?this._o.onNext([this._p,t]):this._hp=!0,this._p=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);In.pairwise=function(){return new Fo(this)},In.partition=function(t,e){var n=me(t,e,3);return[this.filter(t,e),this.filter(function(t,e,r){return!n(t,e,r)})]};var Lo=function(t){function e(t,e){this.c=t,this.s=e}return Xe(e,t),e.prototype[de]=function(){var t=this;return{next:function(){return t.c()?{done:!1,value:t.s}:{done:!0,value:void 0}}}},e}(Xn);In.letBind=In.let=function(t){return t(this)},$n["if"]=function(t,e,n){return lr(function(){return n||(n=dr()),Kt(e)&&(e=ar(e)),Kt(n)&&(n=ar(n)),"function"==typeof n.now&&(n=dr(n)),t()?e:n})},$n["for"]=$n.forIn=function(t,e,n){return ir(t,e,n).concat()};var Yo=$n["while"]=$n.whileDo=function(t,e){return Kt(e)&&(e=ar(e)),bt(t,e).concat()};In.doWhile=function(t){return Yr([this,Yo(t,this)])},$n["case"]=function(t,e,n){return lr(function(){Kt(n)&&(n=ar(n)),n||(n=dr()),wn(n)&&(n=dr(n));var r=e[t()];return Kt(r)&&(r=ar(r)),r||n})};var qo=function(t){function e(e,n,r){this.source=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e){var n,r=t[0],i=t[1];if(!(r.q.length>0))return void(r.isAcquired=!1);n=r.q.shift();var o=new fn;r.d.add(o),o.setDisposable(n.subscribe(new Vo(r,i,o))),e([r,i])}return Xe(e,t),e.prototype._ensureActive=function(t){var e=!1;t.q.length>0&&(e=!t.isAcquired,t.isAcquired=!0),e&&t.m.setDisposable(this._scheduler.scheduleRecursive([t,this],n))},e.prototype.subscribeCore=function(t){var e=new pn,n=new rn(e),r={q:[],m:e,d:n,activeCount:0,isAcquired:!1,o:t};return r.q.push(this.source),r.activeCount++,this._ensureActive(r),n},e}(Jn),Vo=function(t){function e(e,n,r){this._s=e,this._p=n,this._m1=r,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._s.o.onNext(t);var e=ne(this._p._fn)(t);return e===ee?this._s.o.onError(e.e):(this._s.q.push(e),this._s.activeCount++,void this._p._ensureActive(this._s))},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.d.remove(this._m1),this._s.activeCount--,0===this._s.activeCount&&this._s.o.onCompleted()},e}(Un);In.expand=function(t,e){return wn(e)||(e=On),new qo(this,t,e)};var Wo=function(t){function e(e,n){this._sources=e,this._cb=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){if(0===this._sources.length)return t.onCompleted(),an;for(var e=this._sources.length,n={finished:!1,hasResults:new Array(e),hasCompleted:new Array(e),results:new Array(e)},r=new rn,i=0,o=this._sources.length;o>i;i++){var s=this._sources[i];Kt(s)&&(s=ar(s)),r.add(s.subscribe(new Io(t,n,i,this._cb,r)))}return r},e}(Jn),Io=function(t){function e(e,n,r,i,o){this._o=e,this._s=n,this._i=r,this._cb=i,this._subs=o,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._s.finished||(this._s.hasResults[this._i]=!0,this._s.results[this._i]=t)},e.prototype.error=function(t){this._s.finished=!0,this._o.onError(t),this._subs.dispose()},e.prototype.completed=function(){if(!this._s.finished){if(!this._s.hasResults[this._i])return this._o.onCompleted();this._s.hasCompleted[this._i]=!0;for(var t=0;t<this._s.results.length;t++)if(!this._s.hasCompleted[t])return;this._s.finished=!0;var e=ne(this._cb).apply(null,this._s.results);if(e===ee)return this._o.onError(e.e);this._o.onNext(e),this._o.onCompleted()}},e}(Un);$n.forkJoin=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=te(e[t-1])?e.pop():V;return Array.isArray(e[0])&&(e=e[0]),new Wo(e,r)},In.forkJoin=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),$n.forkJoin.apply(null,e)},In.manySelect=In.extend=function(t,e){wn(e)||(e=Ht.Scheduler.immediate);var n=this;return lr(function(){var r;return n.map(function(t){var e=new Uo(t);return r&&r.onNext(t),r=e,e}).tap(Gt,function(t){r&&r.onError(t)},function(){r&&r.onCompleted()}).observeOn(e).map(t)},n)};var Uo=function(t){function e(e){t.call(this),this.head=e,this.tail=new Ts}return Xe(e,t),Ke(e.prototype,Vn,{_subscribe:function(t){var e=new rn;return e.add(On.schedule(this,function(n,r){t.onNext(r.head),e.add(r.tail.mergeAll().subscribe(t))})),e},onCompleted:function(){this.onNext($n.empty())},onError:function(t){this.onNext($n["throw"](t))},onNext:function(t){this.tail.onNext(t),this.tail.onCompleted()}}),e}($n),Bo=Bt.Map||function(){function t(){this.size=0,this._values=[],this._keys=[]}return t.prototype["delete"]=function(t){var e=this._keys.indexOf(t);return-1===e?!1:(this._values.splice(e,1),this._keys.splice(e,1),this.size--,!0)},t.prototype.get=function(t){var e=this._keys.indexOf(t);return-1===e?i:this._values[e]},t.prototype.set=function(t,e){var n=this._keys.indexOf(t);return-1===n?(this._keys.push(t),this._values.push(e),this.size++):this._values[n]=e,this},t.prototype.forEach=function(t,e){for(var n=0;n<this.size;n++)t.call(e,this._values[n],this._keys[n])},t}();mt.prototype.and=function(t){return new mt(this.patterns.concat(t));
},mt.prototype.thenDo=function(t){return new _t(this,t)},_t.prototype.activate=function(t,e,n){for(var r=[],i=wt(e),o=0,s=this.expression.patterns.length;s>o;o++)r.push(xt(t,this.expression.patterns[o],i));var u=new Et(r,gt(this,e),function(){for(var t=0,e=r.length;e>t;t++)r[t].removeActivePlan(u);n(u)});for(o=0,s=r.length;s>o;o++)r[o].addActivePlan(u);return u},Et.prototype.dequeue=function(){this.joinObservers.forEach(function(t){t.queue.shift()})},Et.prototype.match=function(){var t,e,n=!0;for(t=0,e=this.joinObserverArray.length;e>t;t++)if(0===this.joinObserverArray[t].queue.length){n=!1;break}if(n){var r=[],i=!1;for(t=0,e=this.joinObserverArray.length;e>t;t++)r.push(this.joinObserverArray[t].queue[0]),"C"===this.joinObserverArray[t].queue[0].kind&&(i=!0);if(i)this.onCompleted();else{this.dequeue();var o=[];for(t=0,e=r.length;t<r.length;t++)o.push(r[t].value);this.onNext.apply(this,o)}}};var Ho=function(t){function e(e,n){t.call(this),this.source=e,this.onError=n,this.queue=[],this.activePlans=[],this.subscription=new fn,this.isDisposed=!1}Xe(e,t);var n=e.prototype;return n.next=function(t){if(!this.isDisposed){if("E"===t.kind)return this.onError(t.error);this.queue.push(t);for(var e=this.activePlans.slice(0),n=0,r=e.length;r>n;n++)e[n].match()}},n.error=Gt,n.completed=Gt,n.addActivePlan=function(t){this.activePlans.push(t)},n.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},n.removeActivePlan=function(t){this.activePlans.splice(this.activePlans.indexOf(t),1),0===this.activePlans.length&&this.dispose()},n.dispose=function(){t.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},e}(Un);In.and=function(t){return new mt([this,t])},In.thenDo=function(t){return new mt([this]).thenDo(t)},$n.when=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new Ds(function(e){var n=[],r=new Bo,i=Wn(function(t){e.onNext(t)},function(t){r.forEach(function(e){e.onError(t)}),e.onError(t)},function(t){e.onCompleted()});try{for(var o=0,s=t.length;s>o;o++)n.push(t[o].activate(r,i,function(t){var r=n.indexOf(t);n.splice(r,1),0===n.length&&e.onCompleted()}))}catch(u){return Mr(u).subscribe(e)}var a=new rn;return r.forEach(function(t){t.subscribe(),a.add(t)}),a})};var Go=function(t){function e(e,n){this._dt=e,this._s=n,t.call(this)}function n(t,e){e.onNext(0),e.onCompleted()}return Xe(e,t),e.prototype.subscribeCore=function(t){return this._s.scheduleFuture(t,this._dt,n)},e}(Jn),Zo=$n.interval=function(t,e){return St(t,t,wn(e)?e:An)};$n.timer=function(t,e,n){var r;return wn(n)||(n=An),null!=e&&"number"==typeof e?r=e:wn(e)&&(n=e),(t instanceof Date||"number"==typeof t)&&r===i?kt(t,n):t instanceof Date&&r!==i?Ct(t,e,n):St(t,r,n)};In.delay=function(){var t=arguments[0];if("number"==typeof t||t instanceof Date){var e=t,n=arguments[1];return wn(n)||(n=An),e instanceof Date?Dt(this,e,n):Ot(this,e,n)}if($n.isObservable(t)||te(t))return Mt(this,t,arguments[1]);throw new Error("Invalid arguments")};var $o=function(t){function e(e,n,r){wn(r)||(r=An),this.source=e,this._dt=n,this._s=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new pn;return new dn(this.source.subscribe(new Jo(t,this._dt,this._s,e)),e)},e}(Jn),Jo=function(t){function e(e,n,r,i){this._o=e,this._d=n,this._scheduler=r,this._c=i,this._v=null,this._hv=!1,this._id=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._hv=!0,this._v=t;var e=++this._id,n=new fn;this._c.setDisposable(n),n.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(n,r){r._hv&&r._id===e&&r._o.onNext(t),r._hv=!1}))},e.prototype.error=function(t){this._c.dispose(),this._o.onError(t),this._hv=!1,this._id++},e.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},e}(Un);In.debounce=function(){if(te(arguments[0]))return Pt(this,arguments[0]);if("number"==typeof arguments[0])return new $o(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")},In.windowWithTime=In.windowTime=function(t,e,n){var r,i=this;return null==e&&(r=t),wn(n)||(n=An),"number"==typeof e?r=e:wn(e)&&(r=t,n=e),new Ds(function(e){function o(){var t=new fn,i=!1,s=!1;l.setDisposable(t),c===a?(i=!0,s=!0):a>c?i=!0:s=!0;var p=i?c:a,d=p-f;f=p,i&&(c+=r),s&&(a+=r),t.setDisposable(n.scheduleFuture(null,d,function(){if(s){var t=new As;h.push(t),e.onNext(tn(t,u))}i&&h.shift().onCompleted(),o()}))}var s,u,a=r,c=t,h=[],l=new pn,f=0;return s=new rn(l),u=new yn(s),h.push(new As),e.onNext(tn(h[0],u)),o(),s.add(i.subscribe(function(t){for(var e=0,n=h.length;n>e;e++)h[e].onNext(t)},function(t){for(var n=0,r=h.length;r>n;n++)h[n].onError(t);e.onError(t)},function(){for(var t=0,n=h.length;n>t;t++)h[t].onCompleted();e.onCompleted()})),u},i)},In.windowWithTimeOrCount=In.windowTimeOrCount=function(t,e,n){var r=this;return wn(n)||(n=An),new Ds(function(i){function o(e){var r=new fn;s.setDisposable(r),r.setDisposable(n.scheduleFuture(null,t,function(){if(e===h){c=0;var t=++h;l.onCompleted(),l=new As,i.onNext(tn(l,a)),o(t)}}))}var s=new pn,u=new rn(s),a=new yn(u),c=0,h=0,l=new As;return i.onNext(tn(l,a)),o(0),u.add(r.subscribe(function(t){var n=0,r=!1;l.onNext(t),++c===e&&(r=!0,c=0,n=++h,l.onCompleted(),l=new As,i.onNext(tn(l,a))),r&&o(n)},function(t){l.onError(t),i.onError(t)},function(){l.onCompleted(),i.onCompleted()})),a},r)},In.bufferWithTime=In.bufferTime=function(t,e,n){return this.windowWithTime(t,e,n).flatMap(U)},In.bufferWithTimeOrCount=In.bufferTimeOrCount=function(t,e,n){return this.windowWithTimeOrCount(t,e,n).flatMap(U)};var Qo=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Xo(t,this._s))},e}(Jn),Xo=function(t){function e(e,n){this._o=e,this._s=n,this._l=n.now(),t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=this._s.now(),n=e-this._l;this._l=e,this._o.onNext({value:t,interval:n})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);In.timeInterval=function(t){return wn(t)||(t=An),new Qo(this,t)};var Ko=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ts(t,this._s))},e}(Jn),ts=function(t){function e(e,n){this._o=e,this._s=n,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._o.onNext({value:t,timestamp:this._s.now()})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);In.timestamp=function(t){return wn(t)||(t=An),new Ko(this,t)};var es=function(t){function e(e,n){this.source=e,this._sampler=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e={o:t,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new fn};return e.sourceSubscription.setDisposable(this.source.subscribe(new rs(e))),new dn(e.sourceSubscription,this._sampler.subscribe(new ns(e)))},e}(Jn),ns=function(t){function e(e){this._s=e,t.call(this)}return Xe(e,t),e.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},e.prototype.next=function(){this._handleMessage()},e.prototype.error=function(t){this._s.onError(t)},e.prototype.completed=function(){this._handleMessage()},e}(Un),rs=function(t){function e(e){this._s=e,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._s.hasValue=!0,this._s.value=t},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},e}(Un);In.sample=function(t,e){return wn(e)||(e=An),"number"==typeof t?new es(this,Zo(t,e)):new es(this,t)};var is=Ht.TimeoutError=function(t){this.message=t||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};is.prototype=Object.create(Error.prototype),In.timeout=function(){var t=arguments[0];if(t instanceof Date||"number"==typeof t)return At(this,t,arguments[1],arguments[2]);if($n.isObservable(t)||te(t))return Nt(this,t,arguments[1],arguments[2]);throw new Error("Invalid arguments")};var os=function(t){function e(e,n,r,i,o,s){this._state=e,this._cndFn=n,this._itrFn=r,this._resFn=i,this._timeFn=o,this._s=s,t.call(this)}function n(t,e){if(t.hasResult&&t.o.onNext(t.result),t.first)t.first=!1;else if(t.newState=ne(t.self._itrFn)(t.newState),t.newState===ee)return t.o.onError(t.newState.e);if(t.hasResult=ne(t.self._cndFn)(t.newState),t.hasResult===ee)return t.o.onError(t.hasResult.e);if(t.hasResult){if(t.result=ne(t.self._resFn)(t.newState),t.result===ee)return t.o.onError(t.result.e);var n=ne(t.self._timeFn)(t.newState);if(n===ee)return t.o.onError(n.e);e(t,n)}else t.o.onCompleted()}return Xe(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(e,new Date(this._s.now()),n)},e}(Jn);$n.generateWithAbsoluteTime=function(t,e,n,r,i,o){return wn(o)||(o=An),new os(t,e,n,r,i,o)};var ss=function(t){function e(e,n,r,i,o,s){this._state=e,this._cndFn=n,this._itrFn=r,this._resFn=i,this._timeFn=o,this._s=s,t.call(this)}function n(t,e){if(t.hasResult&&t.o.onNext(t.result),t.first)t.first=!1;else if(t.newState=ne(t.self._itrFn)(t.newState),t.newState===ee)return t.o.onError(t.newState.e);if(t.hasResult=ne(t.self._cndFn)(t.newState),t.hasResult===ee)return t.o.onError(t.hasResult.e);if(t.hasResult){if(t.result=ne(t.self._resFn)(t.newState),t.result===ee)return t.o.onError(t.result.e);var n=ne(t.self._timeFn)(t.newState);if(n===ee)return t.o.onError(n.e);e(t,n)}else t.o.onCompleted()}return Xe(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(e,0,n)},e}(Jn);$n.generateWithRelativeTime=function(t,e,n,r,i,o){return wn(o)||(o=An),new ss(t,e,n,r,i,o)};var us=function(t){function e(e,n,r){this.source=e,this._dt=n,this._s=r,t.call(this)}function n(t,e){var n=e[0],r=e[1],i=e[2];i.setDisposable(n.subscribe(r))}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new pn;return e.setDisposable(this._s.scheduleFuture([this.source,t,e],this._dt,n)),e},e}(Jn);In.delaySubscription=function(t,e){return wn(e)||(e=An),new us(this,t,e)};var as=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new cs(t,this))},e}(Jn),cs=function(t){function e(e,n){this._o=e,this._s=n._s,this._d=n._d,this._q=[],t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=this._s.now();for(this._q.push({interval:e,value:t});this._q.length>0&&e-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(var t=this._s.now();this._q.length>0&&t-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value);this._o.onCompleted()},e}(Un);In.skipLastWithTime=function(t,e){return wn(e)||(e=An),new as(this,t,e)};var hs=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ls(t,this._d,this._s))},e}(Jn),ls=function(t){function e(e,n,r){this._o=e,this._d=n,this._s=r,this._q=[],t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=this._s.now();for(this._q.push({interval:e,value:t});this._q.length>0&&e-this._q[0].interval>=this._d;)this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(var t=this._s.now();this._q.length>0;){var e=this._q.shift();t-e.interval<=this._d&&this._o.onNext(e.value)}this._o.onCompleted()},e}(Un);In.takeLastWithTime=function(t,e){return wn(e)||(e=An),new hs(this,t,e)},In.takeLastBufferWithTime=function(t,e){var n=this;return wn(e)||(e=An),new Ds(function(r){var i=[];return n.subscribe(function(n){var r=e.now();for(i.push({interval:r,value:n});i.length>0&&r-i[0].interval>=t;)i.shift()},function(t){r.onError(t)},function(){for(var n=e.now(),o=[];i.length>0;){var s=i.shift();n-s.interval<=t&&o.push(s.value)}r.onNext(o),r.onCompleted()})},n)};var fs=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}function n(t,e){e.onCompleted()}return Xe(e,t),e.prototype.subscribeCore=function(t){return new dn(this._s.scheduleFuture(t,this._d,n),this.source.subscribe(t))},e}(Jn);In.takeWithTime=function(t,e){return wn(e)||(e=An),new fs(this,t,e)};var ps=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,this._open=!1,t.call(this)}function n(t,e){e._open=!0}return Xe(e,t),e.prototype.subscribeCore=function(t){return new dn(this._s.scheduleFuture(this,this._d,n),this.source.subscribe(new ds(t,this)))},e}(Jn),ds=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);In.skipWithTime=function(t,e){return wn(e)||(e=An),new ps(this,t,e)};var vs=function(t){function e(e,n,r){this.source=e,this._st=n,this._s=r,t.call(this)}function n(t,e){e._open=!0}return Xe(e,t),e.prototype.subscribeCore=function(t){return this._open=!1,new dn(this._s.scheduleFuture(this,this._st,n),this.source.subscribe(new ys(t,this)))},e}(Jn),ys=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);In.skipUntilWithTime=function(t,e){return wn(e)||(e=An),new vs(this,t,e)},In.takeUntilWithTime=function(t,e){wn(e)||(e=An);var n=this;return new Ds(function(r){return new dn(e.scheduleFuture(r,t,function(t,e){e.onCompleted()}),n.subscribe(r))},n)},In.throttle=function(t,e){wn(e)||(e=An);var n=+t||0;if(0>=n)throw new RangeError("windowDuration cannot be less or equal zero.");var r=this;return new Ds(function(t){var i=0;return r.subscribe(function(r){var o=e.now();(0===i||o-i>=n)&&(i=o,t.onNext(r))},function(e){t.onError(e)},function(){t.onCompleted()})},r)};var bs=function(t){function e(e,n){this._o=e,this._xform=n,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=ne(this._xform["@@transducer/step"]).call(this._xform,this._o,t);e===ee&&this._o.onError(e.e)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},e}(Un);In.transduce=function(t){var e=this;return new Ds(function(n){var r=t(Tt(n));return e.subscribe(new bs(n,r))},e)};var ms=function(t){function e(e){this.source=e,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new fn,n=new rn,r={hasCurrent:!1,isStopped:!1,o:t,g:n};return n.add(e),e.setDisposable(this.source.subscribe(new _s(r))),n},e}(Jn),_s=function(t){function e(e){this._s=e,t.call(this)}function n(e,n){this._s=e,this._i=n,t.call(this)}return Xe(e,t),e.prototype.next=function(t){if(!this._s.hasCurrent){this._s.hasCurrent=!0,Kt(t)&&(t=ar(t));var e=new fn;this._s.g.add(e),e.setDisposable(t.subscribe(new n(this._s,e)))}},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.isStopped=!0,!this._s.hasCurrent&&1===this._s.g.length&&this._s.o.onCompleted()},Xe(n,t),n.prototype.next=function(t){this._s.o.onNext(t)},n.prototype.error=function(t){this._s.o.onError(t)},n.prototype.completed=function(){this._s.g.remove(this._i),this._s.hasCurrent=!1,this._s.isStopped&&1===this._s.g.length&&this._s.o.onCompleted()},e}(Un);In.switchFirst=function(){return new ms(this)},In.flatMapFirst=In.exhaustMap=function(t,e,n){return new Qn(this,t,e,n).switchFirst()},In.flatMapWithMaxConcurrent=In.flatMapMaxConcurrent=function(t,e,n,r){return new Qn(this,e,n,r).merge(t)};var ws=Ht.VirtualTimeScheduler=function(t){function e(e,n){this.clock=e,this.comparer=n,this.isEnabled=!1,this.queue=new en(1024),t.call(this)}Xe(e,t);var n=e.prototype;return n.now=function(){return this.toAbsoluteTime(this.clock)},n.schedule=function(t,e){return this.scheduleAbsolute(t,this.clock,e)},n.scheduleFuture=function(t,e,n){var r=e instanceof Date?this.toRelativeTime(e-this.now()):this.toRelativeTime(e);return this.scheduleRelative(t,r,n)},n.add=pe,n.toAbsoluteTime=pe,n.toRelativeTime=pe,n.schedulePeriodic=function(t,e,n){var r=new En(this,t,e,n);return r.start()},n.scheduleRelative=function(t,e,n){var r=this.add(this.clock,e);return this.scheduleAbsolute(t,r,n)},n.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var t=this.getNext();null!==t?(this.comparer(t.dueTime,this.clock)>0&&(this.clock=t.dueTime),t.invoke()):this.isEnabled=!1}while(this.isEnabled)}},n.stop=function(){this.isEnabled=!1},n.advanceTo=function(t){var e=this.comparer(this.clock,t);if(this.comparer(this.clock,t)>0)throw new he;if(0!==e&&!this.isEnabled){this.isEnabled=!0;do{var n=this.getNext();null!==n&&this.comparer(n.dueTime,t)<=0?(this.comparer(n.dueTime,this.clock)>0&&(this.clock=n.dueTime),n.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=t}},n.advanceBy=function(t){var e=this.add(this.clock,t),n=this.comparer(this.clock,e);if(n>0)throw new he;0!==n&&this.advanceTo(e)},n.sleep=function(t){var e=this.add(this.clock,t);if(this.comparer(this.clock,e)>=0)throw new he;this.clock=e},n.getNext=function(){for(;this.queue.length>0;){var t=this.queue.peek();if(!t.isCancelled())return t;this.queue.dequeue()}return null},n.scheduleAbsolute=function(t,e,n){function r(t,e){return i.queue.remove(o),n(t,e)}var i=this,o=new bn(this,t,r,e,this.comparer);return this.queue.enqueue(o),o.disposable},e}(mn);Ht.HistoricalScheduler=function(t){function e(e,n){var r=null==e?0:e,i=n||Qt;t.call(this,r,i)}Xe(e,t);var n=e.prototype;return n.add=function(t,e){return t+e},n.toAbsoluteTime=function(t){return new Date(t).getTime()},n.toRelativeTime=function(t){return t},e}(Ht.VirtualTimeScheduler),jt.prototype.equals=function(t){return t===this?!0:null==t?!1:"N"!==t.kind?!1:this.predicate(t.value)},Rt.prototype.equals=function(t){return t===this?!0:null==t?!1:"E"!==t.kind?!1:this.predicate(t.error)};var gs=Ht.ReactiveTest={created:100,subscribed:200,disposed:1e3,onNext:function(t,e){return"function"==typeof e?new xs(t,new jt(e)):new xs(t,jn.createOnNext(e))},onError:function(t,e){return"function"==typeof e?new xs(t,new Rt(e)):new xs(t,jn.createOnError(e))},onCompleted:function(t){return new xs(t,jn.createOnCompleted())},subscribe:function(t,e){return new Es(t,e)}},xs=Ht.Recorded=function(t,e,n){this.time=t,this.value=e,this.comparer=n||Jt};xs.prototype.equals=function(t){return this.time===t.time&&this.comparer(this.value,t.value)},xs.prototype.toString=function(){return this.value.toString()+"@"+this.time};var Es=Ht.Subscription=function(t,e){this.subscribe=t,this.unsubscribe=e||Number.MAX_VALUE};Es.prototype.equals=function(t){return this.subscribe===t.subscribe&&this.unsubscribe===t.unsubscribe},Es.prototype.toString=function(){return"("+this.subscribe+", "+(this.unsubscribe===Number.MAX_VALUE?"Infinite":this.unsubscribe)+")"};var ks=Ht.MockDisposable=function(t){this.scheduler=t,this.disposes=[],this.disposes.push(this.scheduler.clock)};ks.prototype.dispose=function(){this.disposes.push(this.scheduler.clock)};var Cs=function(t){function e(e){t.call(this),this.scheduler=e,this.messages=[]}Xe(e,t);var n=e.prototype;return n.onNext=function(t){this.messages.push(new xs(this.scheduler.clock,jn.createOnNext(t)))},n.onError=function(t){this.messages.push(new xs(this.scheduler.clock,jn.createOnError(t)))},n.onCompleted=function(){this.messages.push(new xs(this.scheduler.clock,jn.createOnCompleted()))},e}(Vn);Ft.prototype.then=function(t,e){var n=this;this.subscriptions.push(new Es(this.scheduler.clock));var r,o=this.subscriptions.length-1,s=Ht.Observer.create(function(e){var u=t(e);if(u&&"function"==typeof u.then)r=u;else{var a=n.scheduler.clock;r=new Ft(n.scheduler,[Ht.ReactiveTest.onNext(a,i),Ht.ReactiveTest.onCompleted(a)])}var c=n.observers.indexOf(s);n.observers.splice(c,1),n.subscriptions[o]=new Es(n.subscriptions[o].subscribe,n.scheduler.clock)},function(t){e(t);var r=n.observers.indexOf(s);n.observers.splice(r,1),n.subscriptions[o]=new Es(n.subscriptions[o].subscribe,n.scheduler.clock)});return this.observers.push(s),r||new Ft(this.scheduler,this.messages)};var Ss=function(t){function e(e,n){t.call(this);var r,i,o=this;this.scheduler=e,this.messages=n,this.subscriptions=[],this.observers=[];for(var s=0,u=this.messages.length;u>s;s++)r=this.messages[s],i=r.value,function(t){e.scheduleAbsolute(null,r.time,function(){for(var e=o.observers.slice(0),n=0,r=e.length;r>n;n++)t.accept(e[n]);return an})}(i)}return Xe(e,t),e.prototype._subscribe=function(t){var e=this;this.observers.push(t),this.subscriptions.push(new Es(this.scheduler.clock));var n=this.subscriptions.length-1;return un(function(){var r=e.observers.indexOf(t);e.observers.splice(r,1),e.subscriptions[n]=new Es(e.subscriptions[n].subscribe,e.scheduler.clock)})},e}($n),Os=function(t){function e(e,n){t.call(this),this.scheduler=e,this.messages=n,this.subscriptions=[]}return Xe(e,t),e.prototype._subscribe=function(t){var e,n,r=this;this.subscriptions.push(new Es(this.scheduler.clock));for(var i=this.subscriptions.length-1,o=new rn,s=0,u=this.messages.length;u>s;s++)e=this.messages[s],n=e.value,function(n){o.add(r.scheduler.scheduleRelative(null,e.time,function(){return n.accept(t),an}))}(n);return un(function(){r.subscriptions[i]=new Es(r.subscriptions[i].subscribe,r.scheduler.clock),o.dispose()})},e}($n);Ht.TestScheduler=function(t){function e(t,e){return t>e?1:e>t?-1:0}function n(){t.call(this,0,e)}return Xe(n,t),n.prototype.scheduleAbsolute=function(e,n,r){return n<=this.clock&&(n=this.clock+1),t.prototype.scheduleAbsolute.call(this,e,n,r)},n.prototype.add=function(t,e){return t+e},n.prototype.toAbsoluteTime=function(t){return new Date(t).getTime()},n.prototype.toRelativeTime=function(t){return t},n.prototype.startScheduler=function(t,e){e||(e={}),null==e.created&&(e.created=gs.created),null==e.subscribed&&(e.subscribed=gs.subscribed),null==e.disposed&&(e.disposed=gs.disposed);var n,r,i=this.createObserver();return this.scheduleAbsolute(null,e.created,function(){return n=t(),an}),this.scheduleAbsolute(null,e.subscribed,function(){return r=n.subscribe(i),an}),this.scheduleAbsolute(null,e.disposed,function(){return r.dispose(),an}),this.start(),i},n.prototype.createHotObservable=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new Ss(this,t)},n.prototype.createColdObservable=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new Os(this,t)},n.prototype.createResolvedPromise=function(t,e){return new Ft(this,[Ht.ReactiveTest.onNext(t,e),Ht.ReactiveTest.onCompleted(t)])},n.prototype.createRejectedPromise=function(t,e){return new Ft(this,[Ht.ReactiveTest.onError(t,e)])},n.prototype.createObserver=function(){return new Cs(this)},n}(ws);var Ds=Ht.AnonymousObservable=function(t){function e(t){return t&&te(t.dispose)?t:te(t)?un(t):an}function n(t,n){var r=n[0],i=n[1],o=ne(i.__subscribe).call(i,r);o!==ee||r.fail(ee.e)||a(ee.e),r.setDisposable(e(o))}function r(e,n){this.source=n,this.__subscribe=e,t.call(this)}return Xe(r,t),r.prototype._subscribe=function(t){var e=new Ms(t),r=[e,this];return On.scheduleRequired()?On.schedule(r,n):n(null,r),e},r}($n),Ms=function(t){function e(e){t.call(this),this.observer=e,this.m=new fn}Xe(e,t);var n=e.prototype;return n.next=function(t){var e=ne(this.observer.onNext).call(this.observer,t);e===ee&&(this.dispose(),a(e.e))},n.error=function(t){var e=ne(this.observer.onError).call(this.observer,t);this.dispose(),e===ee&&a(e.e)},n.completed=function(){var t=ne(this.observer.onCompleted).call(this.observer);this.dispose(),t===ee&&a(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(Un),Ps=function(t){function e(e,n){this._m=e,this._u=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return new dn(this._m.getDisposable(),this._u.subscribe(t))},e}(Jn),Ns=function(t){function e(e,n,r){t.call(this),this.key=e,this.underlyingObservable=r?new Ps(r,n):n}return Xe(e,t),e.prototype._subscribe=function(t){return this.underlyingObservable.subscribe(t)},e}($n),As=Ht.Subject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return Xe(e,t),Ke(e.prototype,Vn.prototype,{_subscribe:function(t){return hn(this),this.isStopped?this.hasError?(t.onError(this.error),an):(t.onCompleted(),an):(this.observers.push(t),new To(this,t))},hasObservers:function(){return hn(this),this.observers.length>0},onCompleted:function(){if(hn(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=s(this.observers),n=e.length;n>t;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(hn(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,n=s(this.observers),r=n.length;r>e;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(hn(this),!this.isStopped)for(var e=0,n=s(this.observers),r=n.length;r>e;e++)n[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),e.create=function(t,e){return new Fs(t,e)},e}($n),Ts=Ht.AsyncSubject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return Xe(e,t),Ke(e.prototype,Vn.prototype,{_subscribe:function(t){return hn(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),an):(this.observers.push(t),new To(this,t))},hasObservers:function(){return hn(this),this.observers.length>0},onCompleted:function(){var t,e;if(hn(this),!this.isStopped){this.isStopped=!0;var n=s(this.observers),e=n.length;if(this.hasValue)for(t=0;e>t;t++){var r=n[t];r.onNext(this.value),r.onCompleted()}else for(t=0;e>t;t++)n[t].onCompleted();this.observers.length=0}},onError:function(t){if(hn(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=s(this.observers),r=n.length;r>e;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){hn(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),e}($n),js=Ht.BehaviorSubject=function(t){function e(e){t.call(this),this.value=e,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return Xe(e,t),Ke(e.prototype,Vn.prototype,{_subscribe:function(t){return hn(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),an):(this.observers.push(t),t.onNext(this.value),new To(this,t))},getValue:function(){return hn(this),this.hasError&&a(this.error),this.value},hasObservers:function(){return hn(this),this.observers.length>0},onCompleted:function(){if(hn(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=s(this.observers),n=e.length;n>t;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(hn(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=s(this.observers),r=n.length;r>e;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(hn(this),!this.isStopped){this.value=t;for(var e=0,n=s(this.observers),r=n.length;r>e;e++)n[e].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),e}($n),Rs=Ht.ReplaySubject=function(t){function e(t,e){return un(function(){e.dispose(),!t.isDisposed&&t.observers.splice(t.observers.indexOf(e),1)})}function n(e,n,i){this.bufferSize=null==e?r:e,this.windowSize=null==n?r:n,this.scheduler=i||On,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.call(this)}var r=Math.pow(2,53)-1;return Xe(n,t),Ke(n.prototype,Vn.prototype,{_subscribe:function(t){hn(this);var n=new Gn(this.scheduler,t),r=e(this,n);this._trim(this.scheduler.now()),this.observers.push(n);for(var i=0,o=this.q.length;o>i;i++)n.onNext(this.q[i].value);return this.hasError?n.onError(this.error):this.isStopped&&n.onCompleted(),n.ensureActive(),r},hasObservers:function(){return hn(this),this.observers.length>0},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){if(hn(this),!this.isStopped){var e=this.scheduler.now();this.q.push({interval:e,value:t}),this._trim(e);for(var n=0,r=s(this.observers),i=r.length;i>n;n++){var o=r[n];o.onNext(t),o.ensureActive()}}},onError:function(t){if(hn(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;var e=this.scheduler.now();this._trim(e);for(var n=0,r=s(this.observers),i=r.length;i>n;n++){var o=r[n];o.onError(t),o.ensureActive()}this.observers.length=0}},onCompleted:function(){if(hn(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var e=0,n=s(this.observers),r=n.length;r>e;e++){var i=n[e];i.onCompleted(),i.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),n}($n),Fs=Ht.AnonymousSubject=function(t){function e(e,n){this.observer=e,this.observable=n,t.call(this)}return Xe(e,t),Ke(e.prototype,Vn.prototype,{_subscribe:function(t){return this.observable.subscribe(t)},onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),e}($n);Ht.Pauser=function(t){function e(){t.call(this)}return Xe(e,t),e.prototype.pause=function(){this.onNext(!1)},e.prototype.resume=function(){this.onNext(!0)},e}(As),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Bt.Rx=Ht,define(function(){return Ht})):Lt&&Yt?It?(Yt.exports=Ht).Rx=Ht:Lt.Rx=Ht:Bt.Rx=Ht;var zs=p()}).call(this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:51}],53:[function(t,e,n){!function(t,r){"use strict";"function"==typeof define&&define.amd?define(r):"object"==typeof n?e.exports=r():t.SAT=r()}(this,function(){"use strict";function t(t,e){this.x=t||0,this.y=e||0}function e(e,n){this.pos=e||new t,this.r=n||0}function n(e,n){this.pos=e||new t,this.angle=0,this.offset=new t,this.setPoints(n||[])}function r(e,n,r){this.pos=e||new t,this.w=n||0,this.h=r||0}function i(){this.a=null,this.b=null,this.overlapN=new t,this.overlapV=new t,this.clear()}function o(t,e,n){for(var r=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=t.length,s=0;o>s;s++){var u=t[s].dot(e);r>u&&(r=u),u>i&&(i=u)}n[0]=r,n[1]=i}function s(t,e,n,r,i,s){var u=b.pop(),a=b.pop(),c=v.pop().copy(e).sub(t),h=c.dot(i);if(o(n,i,u),o(r,i,a),a[0]+=h,a[1]+=h,u[0]>a[1]||a[0]>u[1])return v.push(c),b.push(u),b.push(a),!0;if(s){var l=0;if(u[0]<a[0])if(s.aInB=!1,u[1]<a[1])l=u[1]-a[0],s.bInA=!1;else{var f=u[1]-a[0],p=a[1]-u[0];l=p>f?f:-p}else if(s.bInA=!1,u[1]>a[1])l=u[0]-a[1],s.aInB=!1;else{var f=u[1]-a[0],p=a[1]-u[0];l=p>f?f:-p}var d=Math.abs(l);d<s.overlap&&(s.overlap=d,s.overlapN.copy(i),0>l&&s.overlapN.reverse())}return v.push(c),b.push(u),b.push(a),!1}function u(t,e){var n=t.len2(),r=e.dot(t);return 0>r?w:r>n?x:g}function a(t,e){var n=v.pop().copy(t).sub(e.pos),r=e.r*e.r,i=n.len2();return v.push(n),r>=i}function c(t,e){_.pos.copy(t),m.clear();var n=p(_,e,m);return n&&(n=m.aInB),n}function h(t,e,n){var r=v.pop().copy(e.pos).sub(t.pos),i=t.r+e.r,o=i*i,s=r.len2();if(s>o)return v.push(r),!1;if(n){var u=Math.sqrt(s);n.a=t,n.b=e,n.overlap=i-u,n.overlapN.copy(r.normalize()),
n.overlapV.copy(r).scale(n.overlap),n.aInB=t.r<=e.r&&u<=e.r-t.r,n.bInA=e.r<=t.r&&u<=t.r-e.r}return v.push(r),!0}function l(t,e,n){for(var r=v.pop().copy(e.pos).sub(t.pos),i=e.r,o=i*i,s=t.calcPoints,a=s.length,c=v.pop(),h=v.pop(),l=0;a>l;l++){var f=l===a-1?0:l+1,p=0===l?a-1:l-1,d=0,y=null;c.copy(t.edges[l]),h.copy(r).sub(s[l]),n&&h.len2()>o&&(n.aInB=!1);var b=u(c,h);if(b===w){c.copy(t.edges[p]);var m=v.pop().copy(r).sub(s[p]);if(b=u(c,m),b===x){var _=h.len();if(_>i)return v.push(r),v.push(c),v.push(h),v.push(m),!1;n&&(n.bInA=!1,y=h.normalize(),d=i-_)}v.push(m)}else if(b===x){if(c.copy(t.edges[f]),h.copy(r).sub(s[f]),b=u(c,h),b===w){var _=h.len();if(_>i)return v.push(r),v.push(c),v.push(h),!1;n&&(n.bInA=!1,y=h.normalize(),d=i-_)}}else{var g=c.perp().normalize(),_=h.dot(g),E=Math.abs(_);if(_>0&&E>i)return v.push(r),v.push(g),v.push(h),!1;n&&(y=g,d=i-_,(_>=0||2*i>d)&&(n.bInA=!1))}y&&n&&Math.abs(d)<Math.abs(n.overlap)&&(n.overlap=d,n.overlapN.copy(y))}return n&&(n.a=t,n.b=e,n.overlapV.copy(n.overlapN).scale(n.overlap)),v.push(r),v.push(c),v.push(h),!0}function f(t,e,n){var r=l(e,t,n);if(r&&n){var i=n.a,o=n.aInB;n.overlapN.reverse(),n.overlapV.reverse(),n.a=n.b,n.b=i,n.aInB=n.bInA,n.bInA=o}return r}function p(t,e,n){for(var r=t.calcPoints,i=r.length,o=e.calcPoints,u=o.length,a=0;i>a;a++)if(s(t.pos,e.pos,r,o,t.normals[a],n))return!1;for(var a=0;u>a;a++)if(s(t.pos,e.pos,r,o,e.normals[a],n))return!1;return n&&(n.a=t,n.b=e,n.overlapV.copy(n.overlapN).scale(n.overlap)),!0}var d={};d.Vector=t,d.V=t,t.prototype.copy=t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.perp=t.prototype.perp=function(){var t=this.x;return this.x=this.y,this.y=-t,this},t.prototype.rotate=t.prototype.rotate=function(t){var e=this.x,n=this.y;return this.x=e*Math.cos(t)-n*Math.sin(t),this.y=e*Math.sin(t)+n*Math.cos(t),this},t.prototype.reverse=t.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.normalize=t.prototype.normalize=function(){var t=this.len();return t>0&&(this.x=this.x/t,this.y=this.y/t),this},t.prototype.add=t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.sub=t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.scale=t.prototype.scale=function(t,e){return this.x*=t,this.y*=e||t,this},t.prototype.project=t.prototype.project=function(t){var e=this.dot(t)/t.len2();return this.x=e*t.x,this.y=e*t.y,this},t.prototype.projectN=t.prototype.projectN=function(t){var e=this.dot(t);return this.x=e*t.x,this.y=e*t.y,this},t.prototype.reflect=t.prototype.reflect=function(t){var e=this.x,n=this.y;return this.project(t).scale(2),this.x-=e,this.y-=n,this},t.prototype.reflectN=t.prototype.reflectN=function(t){var e=this.x,n=this.y;return this.projectN(t).scale(2),this.x-=e,this.y-=n,this},t.prototype.dot=t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.len2=t.prototype.len2=function(){return this.dot(this)},t.prototype.len=t.prototype.len=function(){return Math.sqrt(this.len2())},d.Circle=e,e.prototype.getAABB=e.prototype.getAABB=function(){var e=this.r,n=this.pos.clone().sub(new t(e,e));return new r(n,2*e,2*e).toPolygon()},d.Polygon=n,n.prototype.setPoints=n.prototype.setPoints=function(e){var n=!this.points||this.points.length!==e.length;if(n){var r,i=this.calcPoints=[],o=this.edges=[],s=this.normals=[];for(r=0;r<e.length;r++)i.push(new t),o.push(new t),s.push(new t)}return this.points=e,this._recalc(),this},n.prototype.setAngle=n.prototype.setAngle=function(t){return this.angle=t,this._recalc(),this},n.prototype.setOffset=n.prototype.setOffset=function(t){return this.offset=t,this._recalc(),this},n.prototype.rotate=n.prototype.rotate=function(t){for(var e=this.points,n=e.length,r=0;n>r;r++)e[r].rotate(t);return this._recalc(),this},n.prototype.translate=n.prototype.translate=function(t,e){for(var n=this.points,r=n.length,i=0;r>i;i++)n[i].x+=t,n[i].y+=e;return this._recalc(),this},n.prototype._recalc=function(){var t,e=this.calcPoints,n=this.edges,r=this.normals,i=this.points,o=this.offset,s=this.angle,u=i.length;for(t=0;u>t;t++){var a=e[t].copy(i[t]);a.x+=o.x,a.y+=o.y,0!==s&&a.rotate(s)}for(t=0;u>t;t++){var c=e[t],h=u-1>t?e[t+1]:e[0],l=n[t].copy(h).sub(c);r[t].copy(l).perp().normalize()}return this},n.prototype.getAABB=n.prototype.getAABB=function(){for(var e=this.calcPoints,n=e.length,i=e[0].x,o=e[0].y,s=e[0].x,u=e[0].y,a=1;n>a;a++){var c=e[a];c.x<i?i=c.x:c.x>s&&(s=c.x),c.y<o?o=c.y:c.y>u&&(u=c.y)}return new r(this.pos.clone().add(new t(i,o)),s-i,u-o).toPolygon()},d.Box=r,r.prototype.toPolygon=r.prototype.toPolygon=function(){var e=this.pos,r=this.w,i=this.h;return new n(new t(e.x,e.y),[new t,new t(r,0),new t(r,i),new t(0,i)])},d.Response=i,i.prototype.clear=i.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var v=[],y=0;10>y;y++)v.push(new t);for(var b=[],y=0;5>y;y++)b.push([]);var m=new i,_=new r(new t,1,1).toPolygon(),w=-1,g=0,x=1;return d.pointInCircle=a,d.pointInPolygon=c,d.testCircleCircle=h,d.testPolygonCircle=l,d.testCirclePolygon=f,d.testPolygonPolygon=p,d})},{}],54:[function(t,e,n){(function(t,e){!function(e,n){"use strict";function r(t){return v[d]=i.apply(n,t),d++}function i(t){var e=[].slice.call(arguments,1);return function(){"function"==typeof t?t.apply(n,e):new Function(""+t)()}}function o(t){if(y)setTimeout(i(o,t),0);else{var e=v[t];if(e){y=!0;try{e()}finally{s(t),y=!1}}}}function s(t){delete v[t]}function u(){p=function(){var e=r(arguments);return t.nextTick(i(o,e)),e}}function a(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function c(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),p=function(){var n=r(arguments);return e.postMessage(t+n,"*"),n}}function h(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;o(e)},p=function(){var e=r(arguments);return t.port2.postMessage(e),e}}function l(){var t=b.documentElement;p=function(){var e=r(arguments),n=b.createElement("script");return n.onreadystatechange=function(){o(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n),e}}function f(){p=function(){var t=r(arguments);return setTimeout(i(o,t),0),t}}if(!e.setImmediate){var p,d=1,v={},y=!1,b=e.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(e);m=m&&m.setTimeout?m:e,"[object process]"==={}.toString.call(e.process)?u():a()?c():e.MessageChannel?h():b&&"onreadystatechange"in b.createElement("script")?l():f(),m.setImmediate=p,m.clearImmediate=s}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:51}],55:[function(t,e,n){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){this.map={},t instanceof r?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function o(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader;return e.readAsArrayBuffer(t),o(e)}function u(t){var e=new FileReader;return e.readAsText(t),o(e)}function a(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(d.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(d.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!d.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type&&this.headers.set("content-type",this._bodyBlob.type))},d.blob?(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=i(this);return t?t:Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(l)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t){var e=t.toUpperCase();return v.indexOf(e)>-1?e:t}function h(t,e){e=e||{};var n=e.body;if(h.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new r(t.headers)),this.method=t.method,this.mode=t.mode,n||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new r(e.headers)),this.method=c(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function l(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function f(t){var e=new r,n=t.getAllResponseHeaders().trim().split("\n");return n.forEach(function(t){var n=t.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();e.append(r,i)}),e}function p(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof r?e.headers:new r(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){r.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];i||(i=[],this.map[t]=i),i.push(r)},r.prototype["delete"]=function(t){delete this.map[e(t)]},r.prototype.get=function(t){var n=this.map[e(t)];return n?n[0]:null},r.prototype.getAll=function(t){return this.map[e(t)]||[]},r.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},r.prototype.set=function(t,r){this.map[e(t)]=[n(r)]},r.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){t.call(e,r,n,this)},this)},this)};var d={blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t},v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this)},a.call(h.prototype),a.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},p.error=function(){var t=new p(null,{status:0,statusText:""});return t.type="error",t};var y=[301,302,303,307,308];p.redirect=function(t,e){if(-1===y.indexOf(e))throw new RangeError("Invalid status code");return new p(null,{status:e,headers:{location:t}})},t.Headers=r,t.Request=h,t.Response=p,t.fetch=function(t,e){return new Promise(function(n,r){function i(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var o;o=h.prototype.isPrototypeOf(t)&&!e?t:new h(t,e);var s=new XMLHttpRequest;s.onload=function(){var t=1223===s.status?204:s.status;if(100>t||t>599)return void r(new TypeError("Network request failed"));var e={status:t,statusText:s.statusText,headers:f(s),url:i()},o="response"in s?s.response:s.responseText;n(new p(o,e))},s.onerror=function(){r(new TypeError("Network request failed"))},s.open(o.method,o.url,!0),"include"===o.credentials&&(s.withCredentials=!0),"responseType"in s&&d.blob&&(s.responseType="blob"),o.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}]},{},[3]);
//# sourceMappingURL=bundle.js.map
